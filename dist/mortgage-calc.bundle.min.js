!function(){"use strict";
/*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   */function t(t){return t+.5|0}function e(e){return oo(t(2.55*e),0,255)}function n(e){return oo(t(255*e),0,255)}function i(e){return oo(t(e/2.55)/100,0,1)}function o(e){return oo(t(100*e),0,100)}function s(t,e,n){const i=e*Math.min(n,1-n),o=(e,o=(e+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function a(t,e,n){const i=(i,o=(i+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function r(t,e,n){const i=s(t,1,.5);let o;for(e+n>1&&(o=1/(e+n),e*=o,n*=o),o=0;o<3;o++)i[o]*=1-e-n,i[o]+=e;return i}function l(t){const e=t.r/255,n=t.g/255,i=t.b/255,o=Math.max(e,n,i),s=Math.min(e,n,i),a=(o+s)/2;let r,l,c;return o!==s&&(c=o-s,l=a>.5?c/(2-o-s):c/(o+s),r=function(t,e,n,i,o){return t===o?(e-n)/i+(e<n?6:0):e===o?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,o),r=60*r+.5),[0|r,l||0,a]}function c(t,e,i,o){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,o)).map(n)}function d(t,e,n){return c(s,t,e,n)}function h(t){return(t%360+360)%360}function u(t,e,n){if(t){let i=l(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=d(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function p(t,e){return t?Object.assign(e||{},t):t}function g(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=n(t[3]))):(e=p(t,{r:0,g:0,b:0,a:1})).a=n(e.a),e}function f(t){return"r"===t.charAt(0)?function(t){const n=fo.exec(t);let i,o,s,a=255;if(n){if(n[7]!==i){const t=+n[7];a=n[8]?e(t):oo(255*t,0,255)}return i=+n[1],o=+n[3],s=+n[5],i=255&(n[2]?e(i):oo(i,0,255)),o=255&(n[4]?e(o):oo(o,0,255)),s=255&(n[6]?e(s):oo(s,0,255)),{r:i,g:o,b:s,a:a}}}(t):function(t){const i=ho.exec(t);let o,s=255;if(!i)return;i[5]!==o&&(s=i[6]?e(+i[5]):n(+i[5]));const l=h(+i[2]),u=+i[3]/100,p=+i[4]/100;return o="hwb"===i[1]?function(t,e,n){return c(r,t,e,n)}(l,u,p):"hsv"===i[1]?function(t,e,n){return c(a,t,e,n)}(l,u,p):d(l,u,p),{r:o[0],g:o[1],b:o[2],a:s}}(t)}
/*!
   * Chart.js v4.5.0
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   */
function m(){}function y(t){return null==t}function b(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function x(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function v(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function w(t,e){return v(t)?t:e}function _(t,e){return void 0===t?e:t}function E(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function k(t,e,n,i){let o,s,a;if(b(t))for(s=t.length,o=0;o<s;o++)e.call(n,t[o],o);else if(x(t))for(a=Object.keys(t),s=a.length,o=0;o<s;o++)e.call(n,t[a[o]],a[o])}function C(t,e){let n,i,o,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(o=t[n],s=e[n],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function M(t){if(b(t))return t.map(M);if(x(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let o=0;for(;o<i;++o)e[n[o]]=M(t[n[o]]);return e}return t}function S(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function P(t,e,n,i){if(!S(t))return;const o=e[t],s=n[t];x(o)&&x(s)?I(o,s,i):e[t]=M(s)}function I(t,e,n){const i=b(e)?e:[e],o=i.length;if(!x(t))return t;const s=(n=n||{}).merger||P;let a;for(let e=0;e<o;++e){if(a=i[e],!x(a))continue;const o=Object.keys(a);for(let e=0,i=o.length;e<i;++e)s(o[e],t,a,n)}return t}function L(t,e){return I(t,e,{merger:A})}function A(t,e,n){if(!S(t))return;const i=e[t],o=n[t];x(i)&&x(o)?L(i,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=M(o))}function T(t,e){const n=wo[e]||(wo[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const t of e)i+=t,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function D(t){return t.charAt(0).toUpperCase()+t.slice(1)}function O(t,e,n){return Math.abs(t-e)<n}function R(t){const e=Math.round(t);t=O(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Do(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function B(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function z(t,e,n){let i,o,s;for(i=0,o=t.length;i<o;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function F(t){return t*(Co/180)}function H(t){return t*(180/Co)}function N(t){if(!v(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function V(t,e){const n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Co&&(s+=Mo),{angle:s,distance:o}}function W(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function q(t,e){return(t-e+So)%Mo-Co}function $(t){return(t%Mo+Mo)%Mo}function j(t,e,n,i){const o=$(t),s=$(e),a=$(n),r=$(s-o),l=$(a-o),c=$(o-s),d=$(o-a);return o===s||o===a||i&&s===a||r>l&&c<d}function U(t,e,n){return Math.max(e,Math.min(n,t))}function Y(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function X(t,e,n){n=n||(n=>t[n]<e);let i,o=t.length-1,s=0;for(;o-s>1;)i=s+o>>1,n(i)?s=i:o=i;return{lo:s,hi:o}}function Z(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(e);-1!==o&&i.splice(o,1),i.length>0||(zo.forEach(e=>{delete t[e]}),delete t._chartjs)}function K(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}function G(t,e){let n=[],i=!1;return function(...o){n=o,i||(i=!0,Fo.call(window,()=>{i=!1,t.apply(e,n)}))}}function J(t,e,n){const i=e.length;let o=0,s=i;if(t._sorted){const{iScale:a,vScale:r,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=a.axis,{min:h,max:u,minDefined:p,maxDefined:g}=a.getUserBounds();if(p){if(o=Math.min(Ro(l,d,h).lo,n?i:Ro(e,d,a.getPixelForValue(h)).lo),c){const t=l.slice(0,o+1).reverse().findIndex(t=>!y(t[r.axis]));o-=Math.max(0,t)}o=U(o,0,i-1)}if(g){let t=Math.max(Ro(l,a.axis,u,!0).hi+1,n?0:Ro(e,d,a.getPixelForValue(u),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!y(t[r.axis]));t+=Math.max(0,e)}s=U(t,o,i)-o}else s=i-o}return{start:o,count:s}}function Q(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,o={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=o,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,o),s}function tt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function et(t){return tt(t)?t:new bo(t)}function nt(t){return tt(t)?t:new bo(t).saturate(.5).darken(.1).hexString()}function it(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Yo.get(n);return i||(i=new Intl.NumberFormat(t,e),Yo.set(n,i)),i}(e,n).format(t)}function ot(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function st(t,e,n){return"string"==typeof e?I(ot(t,e),n):I(ot(t,""),e)}function at(t,e,n,i,o){let s=e[o];return s||(s=e[o]=t.measureText(o).width,n.push(o)),s>i&&(i=s),i}function rt(t,e,n,i){let o=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(o=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let a=0;const r=n.length;let l,c,d,h,u;for(l=0;l<r;l++)if(h=n[l],null==h||b(h)){if(b(h))for(c=0,d=h.length;c<d;c++)u=h[c],null==u||b(u)||(a=at(t,o,s,a,u))}else a=at(t,o,s,a,h);t.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete o[s[l]];s.splice(0,p)}return a}function lt(t,e,n){const i=t.currentDevicePixelRatio,o=0!==n?Math.max(n/2,.5):0;return Math.round((e-o)*i)/i+o}function ct(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function dt(t,e,n,i){ht(t,e,n,i,null)}function ht(t,e,n,i,o){let s,a,r,l,c,d,h,u;const p=e.pointStyle,g=e.rotation,f=e.radius;let m=(g||0)*Io;if(p&&"object"==typeof p&&(s=p.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void t.restore();if(!(isNaN(f)||f<=0)){switch(t.beginPath(),p){default:o?t.ellipse(n,i,o/2,f,0,0,Mo):t.arc(n,i,f,0,Mo),t.closePath();break;case"triangle":d=o?o/2:f,t.moveTo(n+Math.sin(m)*d,i-Math.cos(m)*f),m+=To,t.lineTo(n+Math.sin(m)*d,i-Math.cos(m)*f),m+=To,t.lineTo(n+Math.sin(m)*d,i-Math.cos(m)*f),t.closePath();break;case"rectRounded":c=.516*f,l=f-c,a=Math.cos(m+Ao)*l,h=Math.cos(m+Ao)*(o?o/2-c:l),r=Math.sin(m+Ao)*l,u=Math.sin(m+Ao)*(o?o/2-c:l),t.arc(n-h,i-r,c,m-Co,m-Lo),t.arc(n+u,i-a,c,m-Lo,m),t.arc(n+h,i+r,c,m,m+Lo),t.arc(n-u,i+a,c,m+Lo,m+Co),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*f,d=o?o/2:l,t.rect(n-d,i-l,2*d,2*l);break}m+=Ao;case"rectRot":h=Math.cos(m)*(o?o/2:f),a=Math.cos(m)*f,r=Math.sin(m)*f,u=Math.sin(m)*(o?o/2:f),t.moveTo(n-h,i-r),t.lineTo(n+u,i-a),t.lineTo(n+h,i+r),t.lineTo(n-u,i+a),t.closePath();break;case"crossRot":m+=Ao;case"cross":h=Math.cos(m)*(o?o/2:f),a=Math.cos(m)*f,r=Math.sin(m)*f,u=Math.sin(m)*(o?o/2:f),t.moveTo(n-h,i-r),t.lineTo(n+h,i+r),t.moveTo(n+u,i-a),t.lineTo(n-u,i+a);break;case"star":h=Math.cos(m)*(o?o/2:f),a=Math.cos(m)*f,r=Math.sin(m)*f,u=Math.sin(m)*(o?o/2:f),t.moveTo(n-h,i-r),t.lineTo(n+h,i+r),t.moveTo(n+u,i-a),t.lineTo(n-u,i+a),m+=Ao,h=Math.cos(m)*(o?o/2:f),a=Math.cos(m)*f,r=Math.sin(m)*f,u=Math.sin(m)*(o?o/2:f),t.moveTo(n-h,i-r),t.lineTo(n+h,i+r),t.moveTo(n+u,i-a),t.lineTo(n-u,i+a);break;case"line":a=o?o/2:Math.cos(m)*f,r=Math.sin(m)*f,t.moveTo(n-a,i-r),t.lineTo(n+a,i+r);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(o?o/2:f),i+Math.sin(m)*f);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function ut(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function pt(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function gt(t){t.restore()}function ft(t,e,n,i,o){if(!e)return t.lineTo(n.x,n.y);if("middle"===o){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===o!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function mt(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function yt(t,e,n,i,o){if(o.strikethrough||o.underline){const s=t.measureText(i),a=e-s.actualBoundingBoxLeft,r=e+s.actualBoundingBoxRight,l=n+s.actualBoundingBoxDescent,c=o.strikethrough?(n-s.actualBoundingBoxAscent+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(a,c),t.lineTo(r,c),t.stroke()}}function bt(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function xt(t,e,n,i,o,s={}){const a=b(e)?e:[e],r=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=o.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),y(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&bt(t,s.backdrop),r&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),y(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),yt(t,n,i,c,s),i+=Number(o.lineHeight);t.restore()}function vt(t,e){const{x:n,y:i,w:o,h:s,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Co,Co,!0),t.lineTo(n,i+s-a.bottomLeft),t.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,Co,Lo,!0),t.lineTo(n+o-a.bottomRight,i+s),t.arc(n+o-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Lo,0,!0),t.lineTo(n+o,i+a.topRight),t.arc(n+o-a.topRight,i+a.topRight,a.topRight,0,-Lo,!0),t.lineTo(n+a.topLeft,i)}function wt(t,e){const n=(""+t).match(ts);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}function _t(t,e){const n={},i=x(e),o=i?Object.keys(e):e,s=x(t)?i?n=>_(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of o)n[t]=ns(s(t));return n}function Et(t){return _t(t,{top:"y",right:"x",bottom:"y",left:"x"})}function kt(t){return _t(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ct(t){const e=Et(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Mt(t,e){let n=_((t=t||{}).size,(e=e||Qo.font).size);"string"==typeof n&&(n=parseInt(n,10));let i=_(t.style,e.style);i&&!(""+i).match(es)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:_(t.family,e.family),lineHeight:wt(_(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:_(t.weight,e.weight),string:""};return o.string=function(t){return!t||y(t.size)||y(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(o),o}function St(t,e,n,i){let o,s,a;for(o=0,s=t.length;o<s;++o)if(a=t[o],void 0!==a&&void 0!==a)return a}function Pt(t,e){return Object.assign(Object.create(t),e)}function It(t,e=[""],n,i,o=()=>t[0]){const s=n||t;void 0===i&&(i=zt("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:o,override:n=>It([n,...t],e,s,i)};return new Proxy(a,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Tt(n,i,()=>function(t,e,n,i){let o;for(const s of e)if(o=zt(is(s,t),n),void 0!==o)return os(t,o)?Rt(n,i,t,o):o}(i,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Ft(t).includes(e),ownKeys:t=>Ft(t),set(t,e,n){const i=t._storage||(t._storage=o());return t[e]=i[e]=n,delete t._keys,!0}})}function Lt(t,e,n,i){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:At(t,i),setContext:e=>Lt(t,e,n,i),override:o=>Lt(t.override(o),e,n,i)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Tt(t,e,()=>function(t,e,n){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=t;let r=i[e];return Eo(r)&&a.isScriptable(e)&&(r=function(t,e,n,i){const{_proxy:o,_context:s,_subProxy:a,_stack:r}=n;if(r.has(t))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+t);r.add(t);let l=e(s,a||i);return r.delete(t),os(t,l)&&(l=Rt(o._scopes,o,t,l)),l}(e,r,t,n)),b(r)&&r.length&&(r=function(t,e,n,i){const{_proxy:o,_context:s,_subProxy:a,_descriptors:r}=n;if(void 0!==s.index&&i(t))return e[s.index%e.length];if(x(e[0])){const n=e,i=o._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Rt(i,o,t,l);e.push(Lt(n,s,a&&a[t],r))}}return e}(e,r,t,a.isIndexable)),os(e,r)&&(r=Lt(r,o,s&&s[e],a)),r}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function At(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:n,indexable:i,isScriptable:Eo(n)?n:()=>n,isIndexable:Eo(i)?i:()=>i}}function Tt(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const i=n();return t[e]=i,i}function Dt(t,e,n){return Eo(t)?t(e,n):t}function Ot(t,e,n,i,o){for(const s of e){const e=ss(n,s);if(e){t.add(e);const s=Dt(e._fallback,n,o);if(void 0!==s&&s!==n&&s!==i)return s}else if(!1===e&&void 0!==i&&n!==i)return null}return!1}function Rt(t,e,n,i){const o=e._rootScopes,s=Dt(e._fallback,n,i),a=[...t,...o],r=new Set;r.add(i);let l=Bt(r,a,n,s||n,i);return null!==l&&(void 0===s||s===n||(l=Bt(r,a,s,l,i),null!==l))&&It(Array.from(r),[""],o,s,()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const o=i[e];return b(o)&&x(n)?n:o||{}}(e,n,i))}function Bt(t,e,n,i,o){for(;n;)n=Ot(t,e,n,i,o);return n}function zt(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function Ft(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function Ht(t,e,n,i){const{iScale:o}=t,{key:s="r"}=this._parsing,a=new Array(i);let r,l,c,d;for(r=0,l=i;r<l;++r)c=r+n,d=e[c],a[r]={r:o.parse(T(d,s),c)};return a}function Nt(t,e,n,i){const o=t.skip?e:t,s=e,a=n.skip?e:n,r=W(s,o),l=W(a,s);let c=r/(r+l),d=l/(r+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const h=i*c,u=i*d;return{previous:{x:s.x-h*(a.x-o.x),y:s.y-h*(a.y-o.y)},next:{x:s.x+u*(a.x-o.x),y:s.y+u*(a.y-o.y)}}}function Vt(t,e,n){return Math.max(Math.min(t,n),e)}function Wt(t,e,n,i,o){let s,a,r,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){const n=ls(e),i=t.length,o=Array(i).fill(0),s=Array(i);let a,r,l,c=rs(t,0);for(a=0;a<i;++a)if(r=l,l=c,c=rs(t,a+1),l){if(c){const t=c[e]-l[e];o[a]=0!==t?(c[n]-l[n])/t:0}s[a]=r?c?Oo(o[a-1])!==Oo(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}!function(t,e,n){const i=t.length;let o,s,a,r,l,c=rs(t,0);for(let d=0;d<i-1;++d)l=c,c=rs(t,d+1),l&&c&&(O(e[d],0,as)?n[d]=n[d+1]=0:(o=n[d]/e[d],s=n[d+1]/e[d],r=Math.pow(o,2)+Math.pow(s,2),r<=9||(a=3/Math.sqrt(r),n[d]=o*a*e[d],n[d+1]=s*a*e[d])))}(t,o,s),function(t,e,n="x"){const i=ls(n),o=t.length;let s,a,r,l=rs(t,0);for(let c=0;c<o;++c){if(a=r,r=l,l=rs(t,c+1),!r)continue;const o=r[n],d=r[i];a&&(s=(o-a[n])/3,r[`cp1${n}`]=o-s,r[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-o)/3,r[`cp2${n}`]=o+s,r[`cp2${i}`]=d+s*e[c])}}(t,s,e)}(t,o);else{let n=i?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)r=t[s],l=Nt(n,r,t[Math.min(s+1,a-(i?0:1))%a],e.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,n=r}e.capBezierPoints&&function(t,e){let n,i,o,s,a,r=ut(t[0],e);for(n=0,i=t.length;n<i;++n)a=s,s=r,r=n<i-1&&ut(t[n+1],e),s&&(o=t[n],a&&(o.cp1x=Vt(o.cp1x,e.left,e.right),o.cp1y=Vt(o.cp1y,e.top,e.bottom)),r&&(o.cp2x=Vt(o.cp2x,e.left,e.right),o.cp2y=Vt(o.cp2y,e.top,e.bottom)))}(t,n)}function qt(){return"undefined"!=typeof window&&"undefined"!=typeof document}function $t(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function jt(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}function Ut(t,e,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const s=ds[o];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Yt(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,o=cs(n),s="border-box"===o.boxSizing,a=Ut(o,"padding"),r=Ut(o,"border","width"),{x:l,y:c,box:d}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:o,offsetY:s}=i;let a,r,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(o,s,t.target))a=o,r=s;else{const t=e.getBoundingClientRect();a=i.clientX-t.left,r=i.clientY-t.top,l=!0}return{x:a,y:r,box:l}}(t,n),h=a.left+(d&&r.left),u=a.top+(d&&r.top);let{width:p,height:g}=e;return s&&(p-=a.width+r.width,g-=a.height+r.height),{x:Math.round((l-h)/p*n.width/i),y:Math.round((c-u)/g*n.height/i)}}function Xt(t,e,n){const i=e||1,o=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||a.height!==o||a.width!==s)&&(t.currentDevicePixelRatio=i,a.height=o,a.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}function Zt(t,e){const n=function(t,e){return cs(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Kt(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Gt(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Jt(t,e,n,i){const o={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=Kt(t,o,n),r=Kt(o,s,n),l=Kt(s,e,n),c=Kt(a,r,n),d=Kt(r,l,n);return Kt(c,d,n)}function Qt(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function te(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function ee(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ne(t){return"angle"===t?{between:j,compare:q,normalize:$}:{between:Y,compare:(t,e)=>t-e,normalize:t=>t}}function ie({start:t,end:e,count:n,loop:i,style:o}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:o}}function oe(t,e,n){if(!n)return[t];const{property:i,start:o,end:s}=n,a=e.length,{compare:r,between:l,normalize:c}=ne(i),{start:d,end:h,loop:u,style:p}=function(t,e,n){const{property:i,start:o,end:s}=n,{between:a,normalize:r}=ne(i),l=e.length;let c,d,{start:h,end:u,loop:p}=t;if(p){for(h+=l,u+=l,c=0,d=l;c<d&&a(r(e[h%l][i]),o,s);++c)h--,u--;h%=l,u%=l}return u<h&&(u+=l),{start:h,end:u,loop:p,style:t.style}}(t,e,n),g=[];let f,m,y,b=!1,x=null;const v=()=>b||l(o,y,f)&&0!==r(o,y),w=()=>!b||0===r(s,f)||l(s,y,f);for(let t=d,n=d;t<=h;++t)m=e[t%a],m.skip||(f=c(m[i]),f!==y&&(b=l(f,o,s),null===x&&v()&&(x=0===r(f,o)?t:n),null!==x&&w()&&(g.push(ie({start:x,end:t,loop:u,count:a,style:p})),x=null),n=t,y=f));return null!==x&&g.push(ie({start:x,end:h,loop:u,count:a,style:p})),g}function se(t,e){const n=[],i=t.segments;for(let o=0;o<i.length;o++){const s=oe(i[o],t.points,e);s.length&&n.push(...s)}return n}function ae(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function re(t,e){if(!e)return!1;const n=[],i=function(t,e){return tt(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function le(t,e,n){return t.options.clip?t[n]:e[n]}function ce(t,e){const n=e._clip;if(n.disabled)return!1;const i=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:le(n,e,"left"),right:le(n,e,"right"),top:le(i,e,"top"),bottom:le(i,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:i.bottom+(!0===n.bottom?0:n.bottom)}}
/*!
   * Chart.js v4.5.0
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   */function de(t,e){const n=t&&t.options||{},i=n.reverse,o=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:o,end:i?o:s}}function he(t,e){const n=[],i=t._getSortedDatasetMetas(e);let o,s;for(o=0,s=i.length;o<s;++o)n.push(i[o].index);return n}function ue(t,e,n,i={}){const o=t.keys,s="single"===i.mode;let a,r,l,c;if(null===e)return;let d=!1;for(a=0,r=o.length;a<r;++a){if(l=+o[a],l===n){if(d=!0,i.all)continue;break}c=t.values[l],v(c)&&(s||0===e||Oo(e)===Oo(c))&&(e+=c)}return d||i.all?e:0}function pe(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function ge(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function fe(t,e,n,i){for(const o of e.getMatchingVisibleMetas(i).reverse()){const e=t[o.index];if(n&&e>0||!n&&e<0)return o.index}return null}function me(t,e){const{chart:n,_cachedMeta:i}=t,o=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:r}=i,l=s.axis,c=a.axis,d=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(s,a,i),h=e.length;let u;for(let t=0;t<h;++t){const n=e[t],{[l]:s,[c]:h}=n;u=(n._stacks||(n._stacks={}))[c]=ge(o,d,s),u[r]=h,u._top=fe(u,a,!0,i.type),u._bottom=fe(u,a,!1,i.type),(u._visualValues||(u._visualValues={}))[r]=h}}function ye(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function be(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}function xe(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,o=n.length;e<o;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=K(i.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let i,o,s,a,r=e._length;const l=()=>{32767!==s&&-32768!==s&&(_o(a)&&(r=Math.min(r,Math.abs(s-a)||r)),a=s)};for(i=0,o=n.length;i<o;++i)s=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),l();return r}function ve(t,e,n,i){return b(t)?function(t,e,n,i){const o=n.parse(t[0],i),s=n.parse(t[1],i),a=Math.min(o,s),r=Math.max(o,s);let l=a,c=r;Math.abs(a)>Math.abs(r)&&(l=r,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:o,end:s,min:a,max:r}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function we(t,e,n,i){const o=t.iScale,s=t.vScale,a=o.getLabels(),r=o===s,l=[];let c,d,h,u;for(c=n,d=n+i;c<d;++c)u=e[c],h={},h[o.axis]=r||o.parse(a[c],c),l.push(ve(u,h,s,c));return l}function _e(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Ee(t,e,n,i){let o=e.borderSkipped;const s={};if(!o)return void(t.borderSkipped=s);if(!0===o)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:r,reverse:l,top:c,bottom:d}=function(t){let e,n,i,o,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(o="end",s="start"):(o="start",s="end"),{start:n,end:i,reverse:e,top:o,bottom:s}}(t);"middle"===o&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?o=c:(n._bottom||0)===i?o=d:(s[ke(d,a,r,l)]=!0,o=c)),s[ke(o,a,r,l)]=!0,t.borderSkipped=s}function ke(t,e,n,i){var o,s,a;return i?(a=n,t=Ce(t=(o=t)===(s=e)?a:o===a?s:o,n,e)):t=Ce(t,e,n),t}function Ce(t,e,n){return"start"===t?e:"end"===t?n:t}function Me(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}function Se(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}function Pe(t,e,n,i){const{controller:o,data:s,_sorted:a}=t,r=o._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(r&&e===r.axis&&"r"!==e&&a&&s.length){const a=r._reversePixels?Bo:Ro;if(!i){const i=a(s,e,n);if(l){const{vScale:e}=o._cachedMeta,{_parsed:n}=t,s=n.slice(0,i.lo+1).reverse().findIndex(t=>!y(t[e.axis]));i.lo-=Math.max(0,s);const a=n.slice(i.hi).findIndex(t=>!y(t[e.axis]));i.hi+=Math.max(0,a)}return i}if(o._sharedOptions){const t=s[0],i="function"==typeof t.getRange&&t.getRange(e);if(i){const t=a(s,e,n-i),o=a(s,e,n+i);return{lo:t.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function Ie(t,e,n,i,o){const s=t.getSortedVisibleDatasetMetas(),a=n[e];for(let t=0,n=s.length;t<n;++t){const{index:n,data:r}=s[t],{lo:l,hi:c}=Pe(s[t],e,a,o);for(let t=l;t<=c;++t){const e=r[t];e.skip||i(e,n,t)}}}function Le(t,e,n,i,o){const s=[];return o||t.isPointInArea(e)?(Ie(t,n,e,function(n,a,r){(o||ut(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:a,index:r})},!0),s):s}function Ae(t,e,n,i,o,s){return s||t.isPointInArea(e)?"r"!==n||i?function(t,e,n,i,o,s){let a=[];const r=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const o=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Ie(t,n,e,function(n,c,d){const h=n.inRange(e.x,e.y,o);if(i&&!h)return;const u=n.getCenterPoint(o);if(!s&&!t.isPointInArea(u)&&!h)return;const p=r(e,u);p<l?(a=[{element:n,datasetIndex:c,index:d}],l=p):p===l&&a.push({element:n,datasetIndex:c,index:d})}),a}(t,e,n,i,o,s):function(t,e,n,i){let o=[];return Ie(t,n,e,function(t,n,s){const{startAngle:a,endAngle:r}=t.getProps(["startAngle","endAngle"],i),{angle:l}=V(t,{x:e.x,y:e.y});j(l,a,r)&&o.push({element:t,datasetIndex:n,index:s})}),o}(t,e,n,o):[]}function Te(t,e,n,i,o){const s=[],a="x"===n?"inXRange":"inYRange";let r=!1;return Ie(t,n,e,(t,i,l)=>{t[a]&&t[a](e[n],o)&&(s.push({element:t,datasetIndex:i,index:l}),r=r||t.inRange(e.x,e.y,o))}),i&&!r?[]:s}function De(t,e){return t.filter(t=>t.pos===e)}function Oe(t,e){return t.filter(t=>-1===Ps.indexOf(t.pos)&&t.box.axis===e)}function Re(t,e){return t.sort((t,n)=>{const i=e?n:t,o=e?t:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function Be(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function ze(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Fe(t,e,n,i){const{pos:o,box:s}=n,a=t.maxPadding;if(!x(o)){n.size&&(t[o]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[o]+=n.size}s.getPadding&&ze(a,s.getPadding());const r=Math.max(0,e.outerWidth-Be(a,t,"left","right")),l=Math.max(0,e.outerHeight-Be(a,t,"top","bottom")),c=r!==t.w,d=l!==t.h;return t.w=r,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function He(t,e){const n=e.maxPadding;return function(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{i[t]=Math.max(e[t],n[t])}),i}(t?["left","right"]:["top","bottom"])}function Ne(t,e,n,i){const o=[];let s,a,r,l,c,d;for(s=0,a=t.length,c=0;s<a;++s){r=t[s],l=r.box,l.update(r.width||e.w,r.height||e.h,He(r.horizontal,e));const{same:a,other:h}=Fe(e,n,r,i);c|=a&&o.length,d=d||h,l.fullSize||o.push(r)}return c&&Ne(o,e,n,i)||d}function Ve(t,e,n,i,o){t.top=n,t.left=e,t.right=e+i,t.bottom=n+o,t.width=i,t.height=o}function We(t,e,n,i){const o=n.padding;let{x:s,y:a}=e;for(const r of t){const t=r.box,l=i[r.stack]||{placed:0,weight:1},c=r.stackWeight/l.weight||1;if(r.horizontal){const i=e.w*c,s=l.size||t.height;_o(l.start)&&(a=l.start),t.fullSize?Ve(t,o.left,a,n.outerWidth-o.right-o.left,s):Ve(t,e.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*c,a=l.size||t.width;_o(l.start)&&(s=l.start),t.fullSize?Ve(t,s,o.top,a,n.outerHeight-o.bottom-o.top):Ve(t,s,e.top+l.placed,a,i),l.start=s,l.placed+=i,s=t.right}}e.x=s,e.y=a}function qe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Rs)}function $e(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function je(t,e,n){const i=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||$e(n.addedNodes,i),e=e&&!$e(n.removedNodes,i);e&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function Ue(t,e,n){const i=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||$e(n.removedNodes,i),e=e&&!$e(n.addedNodes,i);e&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function Ye(){const t=window.devicePixelRatio;t!==zs&&(zs=t,Bs.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Xe(t,e,n){const i=t.canvas,o=i&&$t(i);if(!o)return;const s=G((t,e)=>{const i=o.clientWidth;n(t,e),i<o.clientWidth&&n()},window),a=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||s(n,i)});return a.observe(o),function(t,e){Bs.size||window.addEventListener("resize",Ye),Bs.set(t,e)}(t,s),a}function Ze(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Bs.delete(t),Bs.size||window.removeEventListener("resize",Ye)}(t)}function Ke(t,e,n){const i=t.canvas,o=G(e=>{null!==t.ctx&&n(function(t,e){const n=Ds[t.type]||t.type,{x:i,y:o}=Yt(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==o?o:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Rs)}(i,e,o),o}function Ge(t,e,n,i,o){const s=_(i,0),a=Math.min(_(o,t.length),t.length);let r,l,c,d=0;for(n=Math.ceil(n),o&&(r=o-i,n=r/Math.floor(r/n)),c=s;c<0;)d++,c=Math.round(s+d*n);for(l=Math.max(s,0);l<a;l++)l===c&&(e.push(t[l]),d++,c=Math.round(s+d*n))}function Je(t,e){const n=[],i=t.length/e,o=t.length;let s=0;for(;s<o;s+=i)n.push(t[Math.floor(s)]);return n}function Qe(t,e,n){const i=t.ticks.length,o=Math.min(e,i-1),s=t._startPixel,a=t._endPixel,r=1e-6;let l,c=t.getPixelForTick(o);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(o-1))/2,c+=o<e?l:-l,c<s-r||c>a+r)))return c}function tn(t){return t.drawTicks?t.tickLength:0}function en(t,e){if(!t.display)return 0;const n=Mt(t.font,e),i=Ct(t.padding);return(b(t.text)?t.text.length:1)*n.lineHeight+i.height}function nn(t,e,n){let i=Ho(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}function on(t,e){return e||!1!==t?!0===t?{}:t:null}function sn(t,{plugin:e,local:n},i,o){const s=t.pluginScopeKeys(e),a=t.getOptionScopes(i,s);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function an(t,e){return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||(Qo.datasets[t]||{}).indexAxis||"x"}function rn(t){if("x"===t||"y"===t||"r"===t)return t}function ln(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function cn(t,...e){if(rn(t))return t;for(const n of e){const e=n.axis||ln(n.position)||t.length>1&&rn(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function dn(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function hn(t){const e=t.options||(t.options={});e.plugins=_(e.plugins,{}),e.scales=function(t,e){const n=Ko[t.type]||{scales:{}},i=e.scales||{},o=an(t.type,e),s=Object.create(null);return Object.keys(i).forEach(e=>{const a=i[e];if(!x(a))return console.error(`Invalid scale configuration for scale: ${e}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const r=cn(e,a,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return dn(t,"x",n[0])||dn(t,"y",n[0])}return{}}(e,t),Qo.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(r,o),c=n.scales||{};s[e]=L(Object.create(null),[{axis:r},a,c[r],c[l]])}),t.data.datasets.forEach(n=>{const o=n.type||t.type,a=n.indexAxis||an(o,e),r=(Ko[o]||{}).scales||{};Object.keys(r).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),o=n[e+"AxisID"]||e;s[o]=s[o]||Object.create(null),L(s[o],[{axis:e},i[o],r[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];L(e,[Qo.scales[e.type],Qo.scale])}),s}(t,e)}function un(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}function pn(t,e){let n=Ys.get(t);return n||(n=e(),Ys.set(t,n),Xs.add(n)),n}function gn(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const o=n.join();let s=i.get(o);return s||(s={resolver:It(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},i.set(o,s)),s}function fn(t,e){return"top"===t||"bottom"===t||-1===Js.indexOf(t)&&"x"===e}function mn(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function yn(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),E(n&&n.onComplete,[t],e)}function bn(t){const e=t.chart,n=e.options.animation;E(n&&n.onProgress,[t],e)}function xn(t){return qt()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}function vn(t,e,n){const i=Object.keys(t);for(const o of i){const i=+o;if(i>=e){const s=t[o];delete t[o],(n>0||i>e)&&(t[i+n]=s)}}}function wn(){return k(ea.instances,t=>t._plugins.invalidate())}function _n(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function En(t,e,n,i,o,s){const{x:a,y:r,startAngle:l,pixelMargin:c,innerRadius:d}=e,h=Math.max(e.outerRadius+i+n-c,0),u=d>0?d+i+n+c:0;let p=0;const g=o-l;if(i){const t=((d>0?d-i:0)+(h>0?h-i:0))/2;p=(g-(0!==t?g*t/(t+i):g))/2}const f=(g-Math.max(.001,g*h-n/Co)/h)/2,m=l+f+p,y=o-f-p,{outerStart:b,outerEnd:x,innerStart:v,innerEnd:w}=function(t,e,n,i){const o=_t(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),s=(n-e)/2,a=Math.min(s,i*e/2),r=t=>{const e=(n-Math.min(s,t))*i/2;return U(t,0,Math.min(s,e))};return{outerStart:r(o.outerStart),outerEnd:r(o.outerEnd),innerStart:U(o.innerStart,0,a),innerEnd:U(o.innerEnd,0,a)}}(e,u,h,y-m),_=h-b,E=h-x,k=m+b/_,C=y-x/E,M=u+v,S=u+w,P=m+v/M,I=y-w/S;if(t.beginPath(),s){const e=(k+C)/2;if(t.arc(a,r,h,k,e),t.arc(a,r,h,e,C),x>0){const e=_n(E,C,a,r);t.arc(e.x,e.y,x,C,y+Lo)}const n=_n(S,y,a,r);if(t.lineTo(n.x,n.y),w>0){const e=_n(S,I,a,r);t.arc(e.x,e.y,w,y+Lo,I+Math.PI)}const i=(y-w/u+(m+v/u))/2;if(t.arc(a,r,u,y-w/u,i,!0),t.arc(a,r,u,i,m+v/u,!0),v>0){const e=_n(M,P,a,r);t.arc(e.x,e.y,v,P+Math.PI,m-Lo)}const o=_n(_,m,a,r);if(t.lineTo(o.x,o.y),b>0){const e=_n(_,k,a,r);t.arc(e.x,e.y,b,m-Lo,k)}}else{t.moveTo(a,r);const e=Math.cos(k)*h+a,n=Math.sin(k)*h+r;t.lineTo(e,n);const i=Math.cos(C)*h+a,o=Math.sin(C)*h+r;t.lineTo(i,o)}t.closePath()}function kn(t,e,n=e){t.lineCap=_(n.borderCapStyle,e.borderCapStyle),t.setLineDash(_(n.borderDash,e.borderDash)),t.lineDashOffset=_(n.borderDashOffset,e.borderDashOffset),t.lineJoin=_(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=_(n.borderWidth,e.borderWidth),t.strokeStyle=_(n.borderColor,e.borderColor)}function Cn(t,e,n){t.lineTo(n.x,n.y)}function Mn(t,e,n={}){const i=t.length,{start:o=0,end:s=i-1}=n,{start:a,end:r}=e,l=Math.max(o,a),c=Math.min(s,r);return{count:i,start:l,loop:e.loop,ilen:c<l&&!(o<a&&s<a||o>r&&s>r)?i+c-l:c-l}}function Sn(t,e,n,i){const{points:o,options:s}=e,{count:a,start:r,loop:l,ilen:c}=Mn(o,n,i),d=function(t){return t.stepped?ft:t.tension||"monotone"===t.cubicInterpolationMode?mt:Cn}(s);let h,u,p,{move:g=!0,reverse:f}=i||{};for(h=0;h<=c;++h)u=o[(r+(f?c-h:h))%a],u.skip||(g?(t.moveTo(u.x,u.y),g=!1):d(t,p,u,f,s.stepped),p=u);return l&&(u=o[(r+(f?c:0))%a],d(t,p,u,f,s.stepped)),!!l}function Pn(t,e,n,i){const o=e.points,{count:s,start:a,ilen:r}=Mn(o,n,i),{move:l=!0,reverse:c}=i||{};let d,h,u,p,g,f,m=0,y=0;const b=t=>(a+(c?r-t:t))%s,x=()=>{p!==g&&(t.lineTo(m,g),t.lineTo(m,p),t.lineTo(m,f))};for(l&&(h=o[b(0)],t.moveTo(h.x,h.y)),d=0;d<=r;++d){if(h=o[b(d)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===u?(n<p?p=n:n>g&&(g=n),m=(y*m+e)/++y):(x(),t.lineTo(e,n),u=i,y=0,p=g=n),f=n}x()}function In(t){const e=t.options;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?Sn:Pn}function Ln(t,e,n,i){const o=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<o.radius+o.hitRadius}function An(t,e){const{x:n,y:i,base:o,width:s,height:a}=t.getProps(["x","y","base","width","height"],e);let r,l,c,d,h;return t.horizontal?(h=a/2,r=Math.min(n,o),l=Math.max(n,o),c=i-h,d=i+h):(h=s/2,r=n-h,l=n+h,c=Math.min(i,o),d=Math.max(i,o)),{left:r,top:c,right:l,bottom:d}}function Tn(t,e,n,i){return t?0:U(e,n,i)}function Dn(t,e,n,i){const o=null===e,s=null===n,a=t&&!(o&&s)&&An(t,i);return a&&(o||Y(e,a.left,a.right))&&(s||Y(n,a.top,a.bottom))}function On(t,e){t.rect(e.x,e.y,e.w,e.h)}function Rn(t,e,n={}){const i=t.x!==n.x?-e:0,o=t.y!==n.y?-e:0;return{x:t.x+i,y:t.y+o,w:t.w+((t.x+t.w!==n.x+n.w?e:0)-i),h:t.h+((t.y+t.h!==n.y+n.h?e:0)-o),radius:t.radius}}function Bn(t){return sa[t%sa.length]}function zn(t){return aa[t%aa.length]}function Fn(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Hn(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Nn(t){t.data.datasets.forEach(t=>{Hn(t)})}function Vn(t,e,n,i){if(i)return;let o=e[t],s=n[t];return"angle"===t&&(o=$(o),s=$(s)),{property:t,start:o,end:s}}function Wn(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function qn(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function $n(t,e){let n=[],i=!1;return b(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},o=e.points,s=[];return e.segments.forEach(({start:t,end:e})=>{e=Wn(t,e,o);const a=o[t],r=o[e];null!==i?(s.push({x:a.x,y:i}),s.push({x:r.x,y:i})):null!==n&&(s.push({x:n,y:a.y}),s.push({x:n,y:r.y}))}),s}(t,e),n.length?new ia({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function jn(t){return t&&!1!==t.fill}function Un(t,e,n){let i=t[e].fill;const o=[e];let s;if(!n)return i;for(;!1!==i&&-1===o.indexOf(i);){if(!v(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function Yn(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=_(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(x(i))return!isNaN(i.value)&&i;let o=parseFloat(i);return v(o)&&Math.floor(o)===o?function(t,e,n,i){return"-"!==t&&"+"!==t||(n=e+n),!(n===e||n<0||n>=i)&&n}(i[0],e,o,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Xn(t,e,n){const i=[];for(let o=0;o<n.length;o++){const s=n[o],{first:a,last:r,point:l}=Zn(s,e,"x");if(!(!l||a&&r))if(a)i.unshift(l);else if(t.push(l),!r)break}t.push(...i)}function Zn(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const o=i[n],s=t.segments,a=t.points;let r=!1,l=!1;for(let t=0;t<s.length;t++){const e=s[t],i=a[e.start][n],c=a[e.end][n];if(Y(o,i,c)){r=o===i,l=o===c;break}}return{first:r,last:l,point:i}}function Kn(t,e,n){const i=function(t){const{chart:e,fill:n,line:i}=t;if(v(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,o=[],s=i.segments,a=i.points,r=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const o=i[t];if(o.index===e)break;o.hidden||n.unshift(o.dataset)}return n}(e,n);r.push($n({x:null,y:e.bottom},i));for(let t=0;t<s.length;t++){const e=s[t];for(let t=e.start;t<=e.end;t++)Xn(o,a[t],r)}return new ia({points:o,options:{}})}(t);if("shape"===n)return!0;const o=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,o=e.getLabels().length,s=i.reverse?e.max:e.min,a=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:x(t)?t.value:e.getBaseValue(),i}(n,e,s),r=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,s);return new ca({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let t=0;t<o;++t)r.push(e.getPointPositionForValue(t,a));return r}(t):function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:x(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(v(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return o instanceof ca?o:$n(o,i)}(e),{chart:o,index:s,line:a,scale:r,axis:l}=e,c=a.options,d=c.fill,h=c.backgroundColor,{above:u=h,below:p=h}=d||{},g=o.getDatasetMeta(s),f=ce(o,g);i&&a.points.length&&(pt(t,n),function(t,e){const{line:n,target:i,above:o,below:s,area:a,scale:r,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let d=s;s!==o&&("x"===c?(Gn(t,i,a.top),Qn(t,{line:n,target:i,color:o,scale:r,property:c,clip:l}),t.restore(),t.save(),Gn(t,i,a.bottom)):"y"===c&&(Jn(t,i,a.left),Qn(t,{line:n,target:i,color:s,scale:r,property:c,clip:l}),t.restore(),t.save(),Jn(t,i,a.right),d=o)),Qn(t,{line:n,target:i,color:d,scale:r,property:c,clip:l}),t.restore()}(t,{line:a,target:i,above:u,below:p,area:n,scale:r,axis:l,clip:f}),gt(t))}function Gn(t,e,n){const{segments:i,points:o}=e;let s=!0,a=!1;t.beginPath();for(const r of i){const{start:i,end:l}=r,c=o[i],d=o[Wn(i,l,o)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,r,{move:a}),a?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Jn(t,e,n){const{segments:i,points:o}=e;let s=!0,a=!1;t.beginPath();for(const r of i){const{start:i,end:l}=r,c=o[i],d=o[Wn(i,l,o)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(n,c.y),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,r,{move:a}),a?t.closePath():t.lineTo(n,d.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Qn(t,e){const{line:n,target:i,property:o,color:s,scale:a,clip:r}=e,l=function(t,e,n){const i=t.segments,o=t.points,s=e.points,a=[];for(const t of i){let{start:i,end:r}=t;r=Wn(i,r,o);const l=Vn(n,o[i],o[r],t.loop);if(!e.segments){a.push({source:t,target:l,start:o[i],end:o[r]});continue}const c=se(e,l);for(const e of c){const i=Vn(n,s[e.start],s[e.end],e.loop),r=oe(t,o,i);for(const t of r)a.push({source:t,target:e,start:{[n]:qn(l,i,"start",Math.max)},end:{[n]:qn(l,i,"end",Math.min)}})}}return a}(n,i,o);for(const{source:e,target:c,start:d,end:h}of l){const{style:{backgroundColor:l=s}={}}=e,u=!0!==i;t.save(),t.fillStyle=l,ti(t,a,r,u&&Vn(o,d,h)),t.beginPath();const p=!!n.pathSegment(t,e);let g;if(u){p?t.closePath():ei(t,i,h,o);const e=!!i.pathSegment(t,c,{move:p,reverse:!0});g=p&&e,g||ei(t,i,d,o)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function ti(t,e,n,i){const o=e.chart.chartArea,{property:s,start:a,end:r}=i||{};if("x"===s||"y"===s){let e,i,l,c;"x"===s?(e=a,i=o.top,l=r,c=o.bottom):(e=o.left,i=a,l=o.right,c=r),t.beginPath(),n&&(e=Math.max(e,n.left),l=Math.min(l,n.right),i=Math.max(i,n.top),c=Math.min(c,n.bottom)),t.rect(e,i,l-e,c-i),t.clip()}}function ei(t,e,n,i){const o=e.interpolate(n,i);o&&t.lineTo(o.x,o.y)}function ni(t,e){return e*(t.text?t.text.length:0)}function ii(t,e){return e&&(b(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function oi(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function si(t,e){const{element:n,datasetIndex:i,index:o}=e,s=t.getDatasetMeta(i).controller,{label:a,value:r}=s.getLabelAndValue(o);return{chart:t,label:a,parsed:s.getParsed(o),raw:t.data.datasets[i].data[o],formattedValue:r,dataset:s.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function ai(t,e){const n=t.chart.ctx,{body:i,footer:o,title:s}=t,{boxWidth:a,boxHeight:r}=e,l=Mt(e.bodyFont),c=Mt(e.titleFont),d=Mt(e.footerFont),h=s.length,u=o.length,p=i.length,g=Ct(e.padding);let f=g.height,m=0,y=i.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);y+=t.beforeBody.length+t.afterBody.length,h&&(f+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y&&(f+=p*(e.displayColors?Math.max(r,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*e.bodySpacing),u&&(f+=e.footerMarginTop+u*d.lineHeight+(u-1)*e.footerSpacing);let b=0;const x=function(t){m=Math.max(m,n.measureText(t).width+b)};return n.save(),n.font=c.string,k(t.title,x),n.font=l.string,k(t.beforeBody.concat(t.afterBody),x),b=e.displayColors?a+2+e.boxPadding:0,k(i,t=>{k(t.before,x),k(t.lines,x),k(t.after,x)}),b=0,n.font=d.string,k(t.footer,x),n.restore(),m+=g.width,{width:m,height:f}}function ri(t,e,n,i){const{x:o,width:s}=n,{width:a,chartArea:{left:r,right:l}}=t;let c="center";return"center"===i?c=o<=(r+l)/2?"left":"right":o<=s/2?c="left":o>=a-s/2&&(c="right"),function(t,e,n,i){const{x:o,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===t&&o+s+a>e.width||"right"===t&&o-s-a<0||void 0}(c,t,e,n)&&(c="center"),c}function li(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||ri(t,e,n,i),yAlign:i}}function ci(t,e,n,i){const{caretSize:o,caretPadding:s,cornerRadius:a}=t,{xAlign:r,yAlign:l}=n,c=o+s,{topLeft:d,topRight:h,bottomLeft:u,bottomRight:p}=kt(a);let g=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,r);const f=function(t,e,n){let{y:i,height:o}=t;return"top"===e?i+=n:i-="bottom"===e?o+n:o/2,i}(e,l,c);return"center"===l?"left"===r?g+=c:"right"===r&&(g-=c):"left"===r?g-=Math.max(d,u)+o:"right"===r&&(g+=Math.max(h,p)+o),{x:U(g,0,i.width-e.width),y:U(f,0,i.height-e.height)}}function di(t,e,n){const i=Ct(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function hi(t){return ii([],oi(t))}function ui(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}function pi(t,e,n,i){const o=t[e].call(n,i);return void 0===o?xa[e].call(n,i):o}function gi(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function fi(t,e,{horizontal:n,minRotation:i}){const o=F(i),s=(n?Math.sin(o):Math.cos(o))||.001;return Math.min(e/s,.75*e*(""+t).length)}function mi(t){return 1===t/Math.pow(10,Ea(t))}function yi(t,e,n){const i=Math.pow(10,n),o=Math.floor(t/i);return Math.ceil(e/i)-o}function bi(t){const e=t.ticks;if(e.display&&t.display){const t=Ct(e.backdropPadding);return _(e.font&&e.font.size,Qo.font.size)+t.height}return 0}function xi(t,e,n){return n=b(n)?n:[n],{w:rt(t,e.string,n),h:n.length*e.lineHeight}}function vi(t,e,n,i,o){return t===i||t===o?{start:e-n/2,end:e+n/2}:t<i||t>o?{start:e-n,end:e}:{start:e,end:e+n}}function wi(t,e,n,i,o){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let r=0,l=0;i.start<e.l?(r=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-r)):i.end>e.r&&(r=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+r)),o.start<e.t?(l=(e.t-o.start)/a,t.t=Math.min(t.t,e.t-l)):o.end>e.b&&(l=(o.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function _i(t,e,n){const i=t.drawingArea,{extra:o,additionalAngle:s,padding:a,size:r}=n,l=t.getPointPosition(e,i+o+a,s),c=Math.round(H($(l.angle+Lo))),d=function(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}(l.y,r.h,c),h=function(t){return 0===t||180===t?"center":t<180?"left":"right"}(c),u=(p=l.x,g=r.w,"right"===(f=h)?p-=g:"center"===f&&(p-=g/2),p);var p,g,f;return{visible:!0,x:l.x,y:d,textAlign:h,left:u,top:d,right:u+r.w,bottom:d+r.h}}function Ei(t,e){if(!e)return!0;const{left:n,top:i,right:o,bottom:s}=t;return!(ut({x:n,y:i},e)||ut({x:n,y:s},e)||ut({x:o,y:i},e)||ut({x:o,y:s},e))}function ki(t,e,n){const{left:i,top:o,right:s,bottom:a}=n,{backdropColor:r}=e;if(!y(r)){const n=kt(e.borderRadius),l=Ct(e.backdropPadding);t.fillStyle=r;const c=i-l.left,d=o-l.top,h=s-i+l.width,u=a-o+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),vt(t,{x:c,y:d,w:h,h:u,radius:n}),t.fill()):t.fillRect(c,d,h,u)}}function Ci(t,e,n,i){const{ctx:o}=t;if(n)o.arc(t.xCenter,t.yCenter,e,0,Mo);else{let n=t.getPointPosition(0,e);o.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),o.lineTo(n.x,n.y)}}function Mi(t,e){return t-e}function Si(t,e){if(y(e))return null;const n=t._adapter,{parser:i,round:o,isoWeekday:s}=t._parseOpts;let a=e;return"function"==typeof i&&(a=i(a)),v(a)||(a="string"==typeof i?n.parse(a,i):n.parse(a)),null===a?null:(o&&(a="week"!==o||!B(s)&&!0!==s?n.startOf(a,o):n.startOf(a,"isoWeek",s)),+a)}function Pi(t,e,n,i){const o=Ma.length;for(let s=Ma.indexOf(t);s<o-1;++s){const t=Ca[Ma[s]];if(t.common&&Math.ceil((n-e)/((t.steps?t.steps:Number.MAX_SAFE_INTEGER)*t.size))<=i)return Ma[s]}return Ma[o-1]}function Ii(t,e,n){if(n){if(n.length){const{lo:i,hi:o}=X(n,e);t[n[i]>=e?n[i]:n[o]]=!0}}else t[e]=!0}function Li(t,e,n){const i=[],o={},s=e.length;let a,r;for(a=0;a<s;++a)r=e[a],o[r]=a,i.push({value:r,major:!1});return 0!==s&&n?function(t,e,n,i){const o=t._adapter,s=+o.startOf(e[0].value,i),a=e[e.length-1].value;let r,l;for(r=s;r<=a;r=+o.add(r,1,i))l=n[r],l>=0&&(e[l].major=!0);return e}(t,i,o,n):i}function Ai(t,e,n){let i,o,s,a,r=0,l=t.length-1;n?(e>=t[r].pos&&e<=t[l].pos&&({lo:r,hi:l}=Ro(t,"pos",e)),({pos:i,time:s}=t[r]),({pos:o,time:a}=t[l])):(e>=t[r].time&&e<=t[l].time&&({lo:r,hi:l}=Ro(t,"time",e)),({time:i,pos:s}=t[r]),({time:o,pos:a}=t[l]));const c=o-i;return c?s+(a-s)*(e-i)/c:s}function Ti(){console.log("Initializing charts...");const t=document.getElementById("sourcesUsesChart");if(!t)return void console.error("Sources & Uses chart canvas not found");const e={type:"bar",data:{labels:["Debt","Equity","Fees","Other"],datasets:[{label:"Amount",data:[5e6,3e6,2e5,1e5],backgroundColor:["#4caf50","#2196f3","#ff9800","#9c27b0"],borderRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:t=>{const e=t.raw,n=(e/t.chart.data.datasets[0].data.reduce((t,e)=>t+e,0)*100).toFixed(1);return`$${e.toLocaleString()} (${n}%)`}}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{display:!1},ticks:{callback:t=>`$${t.toLocaleString()}`}}},animation:{duration:500}}};try{console.log("Creating Sources & Uses chart...");const n=new Chart(t,e);console.log("Sources & Uses chart created successfully"),window.updateSourcesUsesChart=function(t){n.data.datasets[0].data=t,n.update()},function(t){const e=document.getElementById("table-container");e&&(e.innerHTML="",t.labels.forEach(t=>{const n=document.createElement("div");n.className="table-row";const i=document.createElement("div");i.className="oval",i.dataset.key=t;const o=document.createElement("div");o.className="table-text",o.textContent=t,n.append(i,o),e.appendChild(n)}))}(n.data);const i=document.getElementById("table-container");i&&(i.addEventListener("mouseover",t=>Di(t,!0,n)),i.addEventListener("mouseout",t=>Di(t,!1,n)))}catch(t){console.error("Error creating Sources & Uses chart:",t)}}function Di(t,e,n){const i=t.target.closest(".oval");if(!i||!n)return;const o=i.dataset.key,s=n.data.labels.findIndex(t=>t===o);if(-1!==s){const t=0;n.setActiveElements(e?[{datasetIndex:t,index:s}]:[]),n.tooltip.setActiveElements(e?[{datasetIndex:t,index:s}]:[],{x:0,y:0}),n.update()}}function Oi(t){const e=formDictionary["purchase-price"]||0,n=formDictionary["closing-costs"]||0,i=formDictionary["im-closing-fee"]||0,o=formDictionary["hel-closing-fee"]||0,s=formDictionary["hel-amount"]||0,a=formDictionary["down-payment-percent"]||0,r=formDictionary["use-hel"],l=e-e*a,c=l*i+r*s*o,d=e+n+c,h=d-(r?s+l:l);return{equity:h,hel:r?s:0,initialMortgage:l,totalSources:r*s+l+h,purchasePrice:e,closingCosts:n,closingLoanCosts:c,totalUses:d}}function Ri(t,e,n,i=0,o=0){if(0===t)return-(n+i)/e;const s=Math.pow(1+t,e);let a=t/(s-1)*-(n*s+i);return 1===o&&(a/=1+t),a}function Bi(t,e,n,i,o=0,s=0){return e<1||e>=n+1?null:Ri(t,n,i,o,s)-function(t,e,n,i,o=0,s=0){if(e<1||e>=n+1)return null;const a=function(t,e,n,i,o=0){if(0===e)return-i;const s=Math.pow(1+t,e);let a=-i*s-n*(s-1)/t;return 1===o&&(a/=1+t),a}(t,e-1,Ri(t,n,i,o,s),i,s);return a*t}(t,e,n,i,o,s)}function zi(t,e){const n=Oi();let i=0;const o=e["im-rate"]/12,s=e["rm-rate"]/12,a=e["hel-rate"]/12,r=!!e["refinance-mortgage"],l=r?12*e["refinance-years"]:-1;let c=Array.from({length:t.months.length},(t,e)=>0),d=Array.from({length:t.months.length},(t,e)=>0);if(e["im-extra-payments"]){const n=Math.floor(12/e["im-extra-payment-times"]);d=Array.from({length:t.months.length},(t,e)=>0===e?0:e%n===0?1:0)}let h=Array.from({length:t.months.length},(t,e)=>0),u=Array.from({length:t.months.length},(t,e)=>0),p=Array.from({length:t.months.length},(t,e)=>0),g=Array.from({length:t.months.length},(t,e)=>0),f=Array.from({length:t.months.length},(t,e)=>0),m=Array.from({length:t.months.length},(t,e)=>0),y=0,b=0,x=Array.from({length:t.months.length},(t,e)=>0),v=Array.from({length:t.months.length},(t,e)=>0);if(e["hel-extra-payments"]){const n=Math.floor(12/e["hel-extra-payment-times"]);v=Array.from({length:t.months.length},(t,e)=>0===e?0:e%n===0?1:0)}let w=Array.from({length:t.months.length},(t,e)=>0),_=Array.from({length:t.months.length},(t,e)=>0),E=Array.from({length:t.months.length},(t,e)=>0),k=Array.from({length:t.months.length},(t,e)=>0),C=Array.from({length:t.months.length},(t,e)=>0),M=0,S=0,P=Array.from({length:t.months.length},(t,e)=>0),I=Array.from({length:t.months.length},(t,e)=>0);if(e["rm-extra-payments"]&&e["refinance-mortgage"]){const n=Math.floor(12/e["rm-extra-payment-times"]),i=Math.round(12*e["refinance-years"]);I=Array.from({length:t.months.length},(t,e)=>e<=i||0===e?0:e%n===0?1:0)}let L=Array.from({length:t.months.length},(t,e)=>0),A=Array.from({length:t.months.length},(t,e)=>0),T=Array.from({length:t.months.length},(t,e)=>0),D=Array.from({length:t.months.length},(t,e)=>0),O=Array.from({length:t.months.length},(t,e)=>0),R=0,B=0;for(let z=0;z<t.months.length;z++)0===z?(y=0,c[0]=n.initialMortgage,x[0]=n.hel,M=0,R=0):r&&z>l?(y=0,M=k[z-1],R=D[z-1]):(y=f[z-1],M=k[z-1],R=D[z-1]),d[z]&&(h[z]=-e["im-extra-payment-amount"]/e["im-extra-payment-times"]),I[z]&&(L[z]=-e["rm-extra-payment-amount"]/e["rm-extra-payment-times"]),v[z]&&(w[z]=-e["hel-extra-payment-amount"]/e["hel-extra-payment-times"]),t.imPaymentPeriod[z]>0&&(p[z]=-Math.min(-Bi(o,z,12*e["im-term"],n.initialMortgage,0),y+c[z]+h[z])),t.helPaymentPeriod[z]>0&&(_[z]=-Math.min(-Bi(a,z,12*e["hel-term"],n.hel,0),M+x[z]+w[z])),t.rmPaymentPeriod[z]>0&&(A[z]=-Math.min(-Bi(s,t.rmPaymentPeriod[z],12*e["rm-term"],i,0),R+P[z]+L[z])),r&&z==l&&(i=y+c[z]+h[z]+p[z],u[z]=-i,P[z]=i),b=y+(c[z]+h[z]+u[z]+p[z]),S=M+(x[z]+w[z]+_[z]),B=R+(P[z]+L[z]+A[z]),r&&z>=l&&(b=0),g[z]=y,f[z]=b,E[z]=M,k[z]=S,T[z]=R,D[z]=B,0===z?(m[z]=(y+c[z])*t.holdPeriod[z]*o,C[z]=(M+x[z])*t.holdPeriod[z]*a,O[z]=(R+P[z])*t.holdPeriod[z]*s):(m[z]=r&&z>l?0:t.imPaymentPeriod[z]>0?y*t.holdPeriod[z]*o:0,O[z]=r&&z>l&&t.rmPaymentPeriod[z]>0?R*t.holdPeriod[z]*s:0,C[z]=t.helPaymentPeriod[z]>0?M*t.holdPeriod[z]*a:0);return{"Initial Mortgage":{BOP:g,Issuance:c,"Extra Payments":h,Refinance:u,"Scheduled Payments":p,EOP:f,"Interest Expense":m},"Home Equity Loan":{BOP:E,Issuance:x,"Extra Payments":w,"Scheduled Payments":_,EOP:k,"Interest Expense":C},"Refinanced Mortgage":{BOP:T,Issuance:P,"Extra Payments":L,"Scheduled Payments":A,EOP:D,"Interest Expense":O}}}function Fi(t){let e=12*t["investment-years"]+1,n=Array.from({length:e},(t,e)=>e),i=n.map((t,e)=>0===e?0:1),o=n.map((t,e)=>0===e?0:1),s=n.map((t,e)=>0===e?0:1),a=n.map((t,e)=>0===e?0:1),r=Array.from({length:e},(t,e)=>0===e?0:e%12==0?1:0);const l=t["use-hel"],c=l?12*t["hel-term"]:0;if(t["refinance-mortgage"]){const e=12*t["refinance-years"];o=i.map((t,n)=>0===n?0:n<=e?n:0),a=i.map((t,n)=>n<=e?0:n-e),s=i.map((t,e)=>0===e?0:l&&e<=c?e:0)}else o=i.map((t,e)=>0===e?0:e),a=Array.from({length:e},(t,e)=>0),s=i.map((t,e)=>0===e?0:l&&e<=c?e:0);return{months:n,annualFlag:r,holdPeriod:i,imPaymentPeriod:o,helPaymentPeriod:s,rmPaymentPeriod:a}}function Hi(t,e,n){const i=Oi();var o=document.getElementById("toggle-switch");let s=Array.from({length:t.months.length},(t,e)=>0),a=Array.from({length:t.months.length},(t,e)=>0),r=Array.from({length:t.months.length},(t,e)=>0),l=Array.from({length:t.months.length},(t,e)=>0),c=Array.from({length:t.months.length},(t,e)=>0),d=Array.from({length:t.months.length},(t,e)=>0),h=Array.from({length:t.months.length},(t,e)=>0),u=t.months.map((t,n)=>(1+e["cpi-assumption"]/12)**Math.max(0,n-1)),p=t.months.map((t,n)=>e["purchase-price"]*(1+e["home-growth-rate"]/12)**Math.max(0,n-1)),g=p,f=t.months.map((t,n)=>(1+e["annual-rent-increase"])**Math.max(0,Math.floor((n-1)/12)));o.checked?(g=t.months.map((t,n)=>e["purchase-price"]*(1+e["property-tax-growth"]/12)**Math.max(0,n-1)),s=t.holdPeriod.map((t,n)=>t*e["occupancy-rate"]*e["monthly-rent"]*f[n]),a=t.holdPeriod.map((t,n)=>t*e["monthly-rent"]*f[n]),r=t.holdPeriod.map((t,n)=>n%12==0?-t*e["annual-insurance"]*(1+e["annual-insurance-growth"]/12)**n:0),l=t.holdPeriod.map((t,n)=>n%12==0?-t*e["annual-hoa"]*(1+e["annual-hoa-growth"]/12)**n:0),c=t.holdPeriod.map((t,n)=>n%12==0?-t*g[n]*e["annual-property-tax"]:0),d=t.holdPeriod.map((t,n)=>n%12==0?-t*e["annual-maintenance"]*(1+e["maintenance-growth"]/12)**n:0),h=s.map((t,n)=>-t*e["management-fee"])):(s=t.holdPeriod.map((t,n)=>t*e["monthly-rent"]*f[n]),a=s.slice(),r=t.holdPeriod.map((t,n)=>n%12==0?-t*e["annual-insurance"]*u[n]:0),l=t.holdPeriod.map((t,n)=>n%12==0?-t*e["annual-hoa"]*u[n]:0),c=t.holdPeriod.map((t,n)=>n%12==0?-t*p[n]*e["annual-property-tax"]:0),d=t.holdPeriod.map((t,n)=>n%12==0?-t*e["annual-maintenance"]*u[n]:0),h=s.map((t,n)=>-t*e["management-fee"]));let m=s.map((t,e)=>t+r[e]+l[e]+c[e]+d[e]+h[e]),y=n["Initial Mortgage"]["Extra Payments"].map((t,e)=>t+n["Initial Mortgage"]["Scheduled Payments"][e]-n["Initial Mortgage"]["Interest Expense"][e]),b=n["Home Equity Loan"]["Extra Payments"].map((t,e)=>t+n["Home Equity Loan"]["Scheduled Payments"][e]-n["Home Equity Loan"]["Interest Expense"][e]),x=n["Refinanced Mortgage"]["Extra Payments"].map((t,e)=>t+n["Refinanced Mortgage"]["Scheduled Payments"][e]-n["Refinanced Mortgage"]["Interest Expense"][e]),v=n["Initial Mortgage"]["Scheduled Payments"].map(t=>-t),w=n["Home Equity Loan"]["Scheduled Payments"].map(t=>-t),_=n["Refinanced Mortgage"]["Scheduled Payments"].map(t=>-t),E=n["Initial Mortgage"]["Interest Expense"],k=n["Home Equity Loan"]["Interest Expense"],C=n["Refinanced Mortgage"]["Interest Expense"],M=n["Initial Mortgage"]["Extra Payments"].map(t=>-t),S=n["Home Equity Loan"]["Extra Payments"].map(t=>-t),P=n["Refinanced Mortgage"]["Extra Payments"].map(t=>-t),I=y.map((t,e)=>t+x[e]+b[e]),L=m.map((t,e)=>t+I[e]),A=L.map((t,e)=>Math.max(0,t)),T=L.map((t,e)=>-Math.min(t,0)),D=T.reduce((t,e)=>t+e,0),O=L.slice(),R=p[t.months.length-1],B=n["Initial Mortgage"].EOP[t.months.length-1],z=n["Home Equity Loan"].EOP[t.months.length-1],F=n["Refinanced Mortgage"].EOP[t.months.length-1],H=R-B-z-F;O[0]=-i.equity,O[t.months.length-1]+=H;let N=D+i.equity,V=function(t,e){function n(n){let i=0;for(let o=0;o<t.length;o++)i+=t[o]/Math.pow(1+n,e[o]/12);return i}if(t.length!==e.length)throw new Error("Values and months arrays must have the same length.");let i=-1,o=1,s=.2,a=n(s);for(let t=0;t<100;t++){if(Math.abs(a)<1e-7)return s;if(s-=a/((n(1.000001*s)-a)/(1e-6*s)),a=n(s),a>0?i=s:o=s,Math.abs(o-i)<1e-7)return s}throw new Error("XIRR calculation did not converge.")}(O,t.months),W=(A.reduce((t,e)=>t+e,0)+H)/N,q=n["Initial Mortgage"].EOP.slice(),$=n["Home Equity Loan"].EOP.slice(),j=n["Refinanced Mortgage"].EOP.slice(),U=q.map((t,e)=>t+$[e]+j[e]),Y=[i.equity];for(let e=1;e<t.months.length;e++)Y.push(Math.max(0,-L[e]));let X=i.equity+D,Z=[];for(let e=0;e<t.months.length-1;e++)Z.push(Math.max(0,L[e]));let K=Math.max(0,L[t.months.length-1])+H;Z.push(K);let G=A.reduce((t,e)=>t+e,0)+H,J=[],Q=[],tt=[],et=0,nt=0;for(let e=0;e<t.months.length;e++)et+=Y[e],nt+=Z[e],J.push(et),Q.push(nt),tt.push(nt-et);return{IRR:V,MOIC:W,ROE:V,"Additional Equity":T,"Operating CF":m,"Levered FCF":L,Revenue:s,"Raw Revenue":a,Insurance:r,"Property Tax":c,HOA:l,Maintenance:d,"Management Fee":h,"Property Price":p,"Appraised Value":g,"Equity Contributions":Y,"Equity Distributions":Z,"Total Equity Invested":X,"Total Equity Returned":G,"Cumulative Contributions":J,"Cumulative Distributions":Q,"Net Equity":tt,"IM Principal":v,"IM Interest":E,"IM Extra Payments":M,"IM Debt Service":y,"IM Balance":q,"HEL Principal":w,"HEL Interest":k,"HEL Extra Payments":S,"HEL Debt Service":b,"HEL Balance":$,"RM Principal":_,"RM Interest":C,"RM Extra Payments":P,"RM Debt Service":x,"RM Balance":j,"Total Debt Service":I,"Total Debt Balance":U,"Home Sale Components":{"Property Value":R,"Initial Mortgage Balance":B,"Home Equity Loan Balance":z,"Refinanced Mortgage Balance":F,"Net Sale Proceeds":H}}}function Ni(t){return"number"!=typeof t?t:"$"+t.toLocaleString("en-US")}function Vi(){const t=window.innerWidth,e=document.getElementById("sourcesUsesChart-wrapper"),n=document.getElementById("table-container"),i=document.getElementById("charts-container");if(e&&n&&i){if(t<768?(n.style.width="100%",n.style.float="none",n.style.overflow="auto",i.style.width="100%",i.style.float="none",i.style.marginTop="20px",i.style.height="300px",n.style.overflowX="auto",n.style.WebkitOverflowScrolling="touch"):(n.style.width="33%",n.style.float="left",i.style.width="66%",i.style.float="right",n.style.overflowX=""),window.sourcesUsesChart)try{if("function"==typeof window.sourcesUsesChart.resize)window.sourcesUsesChart.resize();else if("function"==typeof window.sourcesUsesChart.update)window.sourcesUsesChart.update();else{const t=document.getElementById("sourcesUsesChart");if(t){const e=t.style.display;t.style.display="none",t.style.display=e}}}catch(t){console.warn("Chart resize/update failed:",t);try{document.getElementById("sourcesUsesChart")&&console.log("Would normally recreate chart here, but skipping to avoid disruption")}catch(t){console.error("Chart recovery failed:",t)}}"function"==typeof synchronizeHeights&&synchronizeHeights()}}function Wi(){function t(t,e,n=!1){const i=12*e+1,o=i+12;if(n&&c&&e===m){const e=12*(m+1);let n=0;for(let o=i;o<e;o++)o<t.length&&(n+=Math.abs(t[o]||0));return n}let s=0;for(let e=i;e<o;e++)e<t.length&&(s+=Math.abs(t[e]||0));return s}if(!window.debtPaymentChart||!window.financialOutputs)return void console.error("Chart or financial outputs not available");const e=window.financialOutputs,n=window.formDictionary||{},i=n["investment-years"]||n["investment-years-advanced"]||20,o=Array.from({length:i},(t,e)=>`Year ${e+1}`),s=document.getElementById("toggle-switch")?.checked||!1,a=document.querySelector('input[name="use-hel"]:checked'),r=document.querySelector('input[name="refinance-mortgage"]:checked'),l=s&&(a&&"yes"===a.value||1===n["use-hel"]),c=s&&(r&&"yes"===r.value||1===n["refinance-mortgage"]),d=document.querySelector('input[name="im-extra-payments"]:checked'),h=s&&(d&&"yes"===d.value||1===n["im-extra-payments"]),u=document.querySelector('input[name="hel-extra-payments"]:checked'),p=l&&(u&&"yes"===u.value||1===n["hel-extra-payments"]),g=document.querySelector('input[name="rm-extra-payments"]:checked'),f=c&&(g&&"yes"===g.value||1===n["rm-extra-payments"]),m=c?parseInt(n["refinance-years"]||5):0;let y=Array(i).fill(0),b=Array(i).fill(0),x=Array(i).fill(0),v=Array(i).fill(0),w=Array(i).fill(0),_=Array(i).fill(0),E=Array(i).fill(0),k=Array(i).fill(0),C=Array(i).fill(0);if(e["IM Principal"]&&e["IM Interest"])for(let n=0;n<i;n++)(!c||n<m)&&(y[n]=t(e["IM Principal"],n,c&&n===m-1),b[n]=t(e["IM Interest"],n,c&&n===m-1),h&&e["IM Extra Payments"]&&(x[n]=t(e["IM Extra Payments"],n,c&&n===m-1)));if(c&&e["RM Principal"]&&e["RM Interest"])for(let n=0;n<i;n++)n>=m&&(v[n]=t(e["RM Principal"],n),w[n]=t(e["RM Interest"],n),f&&e["RM Extra Payments"]&&(_[n]=t(e["RM Extra Payments"],n)));if(l&&e["HEL Principal"]&&e["HEL Interest"])for(let n=0;n<i;n++)E[n]=t(e["HEL Principal"],n),k[n]=t(e["HEL Interest"],n),p&&e["HEL Extra Payments"]&&(C[n]=t(e["HEL Extra Payments"],n));window.debtPaymentChart.data.labels=o,window.debtPaymentChart.data.datasets[0].data=y,window.debtPaymentChart.data.datasets[1].data=b,window.debtPaymentChart.data.datasets[2].data=x,window.debtPaymentChart.data.datasets[3].data=v,window.debtPaymentChart.data.datasets[4].data=w,window.debtPaymentChart.data.datasets[5].data=_,window.debtPaymentChart.data.datasets[6].data=E,window.debtPaymentChart.data.datasets[7].data=k,window.debtPaymentChart.data.datasets[8].data=C,window.debtPaymentChart.data.datasets[0].hidden=y.every(t=>0===t),window.debtPaymentChart.data.datasets[1].hidden=b.every(t=>0===t),window.debtPaymentChart.data.datasets[2].hidden=!h||x.every(t=>0===t),window.debtPaymentChart.data.datasets[3].hidden=!c||v.every(t=>0===t),window.debtPaymentChart.data.datasets[4].hidden=!c||w.every(t=>0===t),window.debtPaymentChart.data.datasets[5].hidden=!f||_.every(t=>0===t),window.debtPaymentChart.data.datasets[6].hidden=!l||E.every(t=>0===t),window.debtPaymentChart.data.datasets[7].hidden=!l||k.every(t=>0===t),window.debtPaymentChart.data.datasets[8].hidden=!p||C.every(t=>0===t),window.debtPaymentChart.update()}function qi(t,e){let n;return function(){const i=this,o=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(i,o)},e)}}function $i(){return window.innerWidth<992}function ji(){$i()?(io(),function(){const t=document.getElementById("form-container"),e=document.getElementById("chart-container"),n=document.querySelector(".container-wrapper");if(!t||!e||!n)return;if(document.querySelector(".mobile-form-toggle"))return;const i=document.createElement("div");i.className="mobile-button-wrapper",i.style.cssText="\n        width: 100%;\n        margin-bottom: 15px;\n        position: relative;\n    ";const o=document.createElement("button");o.textContent="Show Input Assumptions",o.className="mobile-form-toggle",o.style.cssText="\n        padding: 12px;\n        background-color: rgba(255, 206, 86, 1);\n        color: #333333; /* Dark gray text */\n        border: none;\n        border-radius: 4px;\n        font-weight: bold;\n        width: 100%;\n        margin: 0;\n        display: block;\n        font-size: 16px;\n        cursor: pointer;\n        box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n        transition: background-color 0.2s ease;\n    ",o.addEventListener("mouseover",function(){this.style.backgroundColor="rgba(245, 196, 76, 1)"}),o.addEventListener("mouseout",function(){this.style.backgroundColor="rgba(255, 206, 86, 1)"}),i.appendChild(o),n.insertBefore(i,n.firstChild),t.style.transition="opacity 0.3s ease, max-height 0.5s ease",t.style.overflow="hidden",t.style.display="none",t.style.opacity="0",t.style.maxHeight="0",o.addEventListener("click",function(){"none"===t.style.display?(t.style.display="block",o.textContent="Hide Input Assumptions",t.style.maxHeight="5000px",t.style.opacity="1"):(t.style.opacity="0",t.style.maxHeight="0",o.textContent="Show Input Assumptions",setTimeout(()=>{"0"===t.style.opacity&&(t.style.display="none")},300))});const s=document.createElement("style");s.textContent="\n        @media (max-width: 991px) {\n            .container-wrapper {\n                display: flex;\n                flex-direction: column;\n            }\n            \n            .mobile-button-wrapper {\n                order: -1; /* Make sure it's always at the top */\n            }\n            \n            #form-container {\n                order: 0;\n            }\n            \n            #chart-container {\n                order: 1;\n            }\n        }\n    ",document.head.appendChild(s)}(),Yi(),Xi(),function(){const t={radioButtons:document.querySelectorAll('input[type="radio"]'),radioLabels:document.querySelectorAll(".radio-group label"),textInputs:document.querySelectorAll('input[type="text"], input[type="number"]'),collapsibleHeaders:document.querySelectorAll(".collapsible-header"),toggleSwitch:document.getElementById("toggle-switch")};t.radioButtons.forEach(t=>{t.style.transform="scale(1.2)",t.style.margin="0 8px 0 0"}),t.radioLabels.forEach(t=>{t.style.minHeight="44px",t.style.display="flex",t.style.alignItems="center",t.style.marginTop="0",t.style.padding="5px 0"}),t.textInputs.forEach(t=>{t.style.padding="12px",t.style.fontSize="16px",t.style.minHeight="44px"}),t.collapsibleHeaders.forEach(t=>{t.style.padding="15px 10px",t.style.minHeight="44px"}),document.querySelectorAll(".radio-group").forEach(t=>{t.style.display="flex",t.style.flexWrap="wrap",t.style.gap="12px"})}(),Ui(),function(){const t=document.getElementById("sourcesUsesChart"),e=document.getElementById("charts-container");if(t&&e&&$i()){t.style.height="350px",t.style.maxHeight="400px",e.style.height="350px",e.style.maxHeight="400px";const n=new ResizeObserver(n=>{for(let i of n)i.target!==t&&i.target!==e||i.contentRect.height>400&&(i.target.style.height="350px")});n.observe(t),n.observe(e),window._chartResizeObserver=n}}(),Gi(),Ji(),function(){let t,e=!1;if(!$i())return;window.addEventListener("scroll",function(){e=!0,clearTimeout(t),t=setTimeout(function(){e=!1},150)},{passive:!0});const n=document.addEventListener;document.addEventListener=function(t,i,o){return n.call(this,t,"formDictionaryChanged"===t?function(t){e||i.call(this,t)}:i,o)},function(){function t(){r=!0,document.body.classList.add("preserve-state"),i||(i=!0,s.forEach((t,e)=>{n.set(t.id||`checkbox-${e}`,{checked:t.checked,userInteracted:"true"===t.dataset.userInteracted,expanded:t.dataset.expanded,header:t.nextElementSibling,content:t.nextElementSibling?.nextElementSibling,icon:t.nextElementSibling?.querySelector(".collapsible-icon")})}))}function e(){i&&(document.body.classList.add("no-transitions"),s.forEach((t,e)=>{const i=n.get(t.id||`checkbox-${e}`);if(i&&i.userInteracted){const e=i.checked;if(t.checked!==e){t.checked=e;const n=i.content,o=i.icon;n&&(n.style.display=e?"block":"none",n.style.opacity=e?"1":"0",n.style.height=e?"auto":"0"),o&&(o.textContent=e?"-":"+",o.style.fontSize=e?"24px":"16px")}}}),setTimeout(()=>{document.body.classList.remove("no-transitions")},20))}if(!$i())return;console.log("Setting up enhanced collapsible state preservation");const n=new Map;let i=!1;const o=document.getElementById("toggle-switch")?.checked?document.getElementById("advanced-form"):document.getElementById("basic-form");if(!o)return;const s=o.querySelectorAll('.collapsible input[type="checkbox"]');s.forEach((t,e)=>{const i=t.id||`checkbox-${e}`;let o;n.set(i,{checked:t.checked,userInteracted:"true"===t.dataset.userInteracted,expanded:t.dataset.expanded,header:t.nextElementSibling,content:t.nextElementSibling?.nextElementSibling,icon:t.nextElementSibling?.querySelector(".collapsible-icon")}),t.addEventListener("change",function(){clearTimeout(o),this.dataset.userInteracted="true",this.dataset.expanded=this.checked,o=setTimeout(()=>{n.set(i,{checked:t.checked,userInteracted:!0,expanded:t.dataset.expanded,header:t.nextElementSibling,content:t.nextElementSibling?.nextElementSibling,icon:t.nextElementSibling?.querySelector(".collapsible-icon")})},50)})});let a,r=!1,l=0;window.addEventListener("scroll",function(){const n=window.scrollY,o=Math.abs(n-l);!r&&o>15&&t(),l=n,clearTimeout(a),a=setTimeout(function(){r=!1,document.body.classList.remove("preserve-state"),setTimeout(()=>{i=!1},100),setTimeout(e,50)},150)},{passive:!0});const c=document.createElement("style");c.innerHTML="\n      .preserve-state .collapsible-content {\n        transition: none !important;\n      }\n      \n      .no-transitions * {\n        transition: none !important;\n        animation: none !important;\n      }\n    ",document.head.appendChild(c);new MutationObserver(t=>{r&&t.some(t=>t.target.classList?.contains("collapsible-content")||"INPUT"===t.target.tagName&&"checkbox"===t.target.type)&&e()}).observe(o,{attributes:!0,attributeFilter:["checked","style","class"],subtree:!0})}()}(),function(){if(!$i())return;let t,e=!1;if(window.addEventListener("scroll",function(){e=!0,clearTimeout(t),t=setTimeout(function(){e=!1},300)},{passive:!0}),"undefined"!=typeof Chart){const t=Chart.prototype.update;Chart.prototype.update=function(n){if(!e||"none"===n||"resize"===n)return t.apply(this,arguments);clearTimeout(this._updateTimer),this._updateTimer=setTimeout(()=>{t.apply(this,arguments)},400)}}}(),function(){if(!$i())return;console.log("Setting up balanced scroll freeze");let t=!1,e=null,n=[],i=!1,o=0,s=0;const a=document.createElement("style");a.innerHTML='\n      /* Disable transitions during scroll */\n      body.is-scrolling * {\n        transition: none !important;\n        animation: none !important;\n      }\n      \n      /* Disable transitions during restoration */\n      body.instant-changes * {\n        transition: none !important;\n        animation: none !important;\n      }\n      \n      /* Lock the form while scrolling */\n      body.is-scrolling #form-container .collapsible-content {\n        pointer-events: none;\n      }\n      \n      /* Explicitly define collapsed and expanded states to avoid confusion */\n      body.is-scrolling .collapsible input[type="checkbox"]:checked + .collapsible-header + .collapsible-content {\n        display: block !important;\n        opacity: 1 !important;\n        height: auto !important;\n        overflow: hidden !important;\n      }\n      \n      body.is-scrolling .collapsible input[type="checkbox"]:not(:checked) + .collapsible-header + .collapsible-content {\n        display: none !important;\n        opacity: 0 !important;\n        height: 0 !important;\n        overflow: hidden !important;\n      }\n    ',document.head.appendChild(a),window.addEventListener("scroll",function(){const a=window.scrollY,r=Date.now();t?s=r:(o=a,s=r,function(t){const e=Date.now();return Math.abs(t-o)>20||e-s>300}(a)&&(t=!0,document.body.classList.add("is-scrolling"),function(){if(!i){i=!0,n=[];try{const t=document.getElementById("toggle-switch")?.checked?document.getElementById("advanced-form"):document.getElementById("basic-form");if(!t)return;t.querySelectorAll('.collapsible input[type="checkbox"]').forEach(t=>{const e=t.nextElementSibling?.nextElementSibling,i=t.nextElementSibling?.querySelector(".collapsible-icon");n.push({element:t,checked:t.checked,userInteracted:"true"===t.dataset.userInteracted,expanded:t.dataset.expanded,contentDisplay:e?.style.display,contentOpacity:e?.style.opacity,contentHeight:e?.style.height,iconText:i?.textContent,iconFontSize:i?.style.fontSize})})}finally{i=!1}}}())),clearTimeout(e),e=setTimeout(function(){t=!1,document.body.classList.remove("is-scrolling"),setTimeout(()=>{!function(){if(!i){i=!0;try{document.body.classList.add("instant-changes"),n.forEach(t=>{if(document.body.contains(t.element)&&(t.userInteracted||t.element.checked!==t.checked)){t.element.checked!==t.checked&&(t.element.checked=t.checked);const e=t.element.nextElementSibling?.nextElementSibling;e&&(t.checked?(e.style.display="block",e.style.opacity="1",e.style.height="auto"):(e.style.display="none",e.style.opacity="0",e.style.height="0"));const n=t.element.nextElementSibling?.querySelector(".collapsible-icon");n&&(n.textContent=t.checked?"-":"+",n.style.fontSize=t.checked?"24px":"16px")}}),setTimeout(()=>{document.body.classList.remove("instant-changes")},50)}finally{i=!1}}}()},50)},300)},{passive:!0});const r=document.addEventListener;document.addEventListener=function(e,n,i){return r.call(this,e,"formDictionaryChanged"===e?function(e){t||n.call(this,e)}:n,i)},document.body.addEventListener("click",function(e){if(t&&e.target.closest(".collapsible-header"))return e.preventDefault(),e.stopPropagation(),!1},!0)}()):Zi()}function Ui(){[document.getElementById("barChart"),document.getElementById("sourcesUsesChart"),document.getElementById("annualCashFlowChart"),document.getElementById("annualDebtPaymentChart"),document.getElementById("debtBalanceChart")].forEach(t=>{if(!t)return;const e=t.getBoundingClientRect();if(!(e.width>0&&e.height>0)){console.log("Fixing invisible chart:",t.id),t.style.height="350px",t.style.minHeight="350px",t.style.width="100%",t.style.display="block",t.style.visibility="visible",t.style.opacity="1";let e=t.parentElement;for(;e&&e!==document.body;)e.style&&(e.style.minHeight="350px",e.style.visibility="visible",e.style.display="block"),e=e.parentElement;if("undefined"!=typeof Chart){const e=Chart.getChart(t);if(e)try{e.resize()}catch(t){console.warn("Error resizing chart:",t)}}}}),document.querySelectorAll(".subheading").forEach(t=>{t.textContent.includes("How You Stack Up")&&(t.style.display="block",t.style.visibility="visible",t.style.marginTop="30px",t.style.marginBottom="20px")});const t=Array.from(document.querySelectorAll(".subheading")).find(t=>t.textContent.includes("How You Stack Up"));if(t){let e=t,n=!1;for(let t=0;t<5&&(e=e.nextElementSibling,e);t++)if("barChart"===e.id||"CANVAS"===e.tagName){n=!0,e.style.height="350px",e.style.minHeight="350px",e.style.display="block",e.style.visibility="visible";break}if(!n&&void 0!==window.financialOutputs){const t=document.getElementById("barChart");t&&!t.parentNode.querySelector(".chart-fallback")&&function(t){const e=document.createElement("div");e.className="chart-fallback",e.innerHTML=`\n        <div>\n            <h3>Your Investment Performance</h3>\n            <p>IRR: ${(100*window.financialOutputs?.IRR||0).toFixed(1)}%</p>\n            <p>S&P 500: 11.5%</p>\n            <p>Real Estate ETF: 6.8%</p>\n            <p>Bond ETF: 3.9%</p>\n        </div>\n    `,t.parentNode.insertBefore(e,t),t.style.display="none"}(t)}}}function Yi(){[document.querySelector("#equity-summary-table-container table"),document.querySelector("#spreadsheet-container table"),document.querySelector("#cashflow-detail-table")].forEach(t=>{if(!t)return;if(t.parentNode.classList.contains("mobile-table-scroll"))return;const e=document.createElement("div");e.className="mobile-table-scroll",e.style.cssText="\n            overflow-x: auto;\n            -webkit-overflow-scrolling: touch;\n            width: 100%;\n            margin-bottom: 15px;\n            position: relative;\n        ",t.parentNode.insertBefore(e,t),e.appendChild(t);const n=document.createElement("div");n.className="mobile-table-fade-edge",n.style.cssText="\n            position: absolute;\n            top: 0;\n            right: 0;\n            height: 100%;\n            width: 30px;\n            background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,0.9));\n            pointer-events: none;\n        ",e.appendChild(n)});const t=document.getElementById("table-container"),e=document.getElementById("charts-container");t&&e&&(t.style.width="100%",t.style.float="none",e.style.width="100%",e.style.float="none",e.style.marginTop="20px")}function Xi(){if(!$i())return;if("undefined"==typeof Chart)return console.warn("Chart.js not loaded yet, trying again in 500ms"),void setTimeout(Xi,500);const t=document.getElementById("sourcesUsesChart"),e=document.getElementById("charts-container"),n=document.getElementById("sourcesUsesChart-wrapper");t&&e&&(t.style.position="static",e.style.position="relative",e.style.overflow="hidden",t.style.height="350px",t.style.maxHeight="350px",e.style.height="350px",e.style.maxHeight="350px",n&&(n.style.overflow="hidden",n.style.width="100%"));const i=document.querySelectorAll("canvas");if(i.forEach(t=>{t.style.height="350px",t.style.maxHeight="350px",t.style.width="100%",t.style.maxWidth="100%",t.style.display="block";const e=t.parentElement;e&&e!==document.body&&(e.style.overflow="hidden",e.style.width="100%",e.style.maxWidth="100%")}),i.forEach(t=>{let e;try{e=Chart.getChart(t)}catch(e){return void console.warn(`Error getting chart for ${t.id}:`,e)}if(!e){if("barChart"!==t.id||!window.myChart)return;e=window.myChart}if(!e._originalOptions)try{e._originalOptions=JSON.parse(JSON.stringify({legend:e.options.plugins?.legend?.display,aspectRatio:e.options.maintainAspectRatio,pointRadius:e.data.datasets.map(t=>t.pointRadius),pointHoverRadius:e.data.datasets.map(t=>t.pointHoverRadius)}))}catch(t){console.warn("Error storing original chart options:",t)}try{e.options.maintainAspectRatio=!1,e.options.responsive=!0,"sourcesUsesChart"===t.id&&(e.options.onResize=null,e.options.layout&&(e.options.layout.padding={left:0,right:0,top:10,bottom:10})),e.options.plugins||(e.options.plugins={}),e.options.plugins.customCanvasBackgroundColor={color:"white"},e.update()}catch(e){console.warn(`Error optimizing chart ${t.id}:`,e)}}),document.querySelectorAll("[id$='-wrapper']").forEach(t=>{t.style.overflow="hidden",t.style.width="100%",t.style.maxWidth="100%"}),!document.querySelector('meta[name="viewport"]')){const t=document.createElement("meta");t.name="viewport",t.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",document.head.appendChild(t)}!function(){if(!$i())return;let t=document.getElementById("mobile-chart-fixes");t||(t=document.createElement("style"),t.id="mobile-chart-fixes",document.head.appendChild(t)),t.textContent="\n        /* We're adding a mobile-specific selector to all rules */\n        @media (max-width: 991px) {\n            /* Fix chart container overflow */\n            #sourcesUsesChart-wrapper, #barChart-wrapper, #annual-cashflow-chart-container, \n            #annual-debt-payment-container, #debt-balance-container {\n                overflow: hidden !important;\n                width: 100% !important;\n                max-width: 100% !important;\n                position: relative !important;\n            }\n            \n            /* Chart canvas containment */\n            canvas {\n                max-width: 100% !important;\n                width: 100% !important;\n                height: 350px !important;\n                max-height: 350px !important;\n            }\n            \n            /* Fix S&U chart specifically */\n            #sourcesUsesChart-wrapper {\n                display: block !important;\n            }\n            \n            #table-container, #charts-container {\n                width: 100% !important;\n                float: none !important;\n            }\n            \n            #charts-container {\n                margin-top: 20px !important;\n                height: 350px !important;\n                max-height: 350px !important;\n                overflow: hidden !important;\n            }\n            \n            /* Fix stacking context issues */\n            .container-wrapper {\n                overflow: hidden;\n                width: 95%;\n            }\n        }\n    ",document}()}function Zi(){const t=document.querySelector(".mobile-form-toggle");t&&t.remove();const e=document.getElementById("form-container");e&&(e.style.display="block"),document.querySelectorAll(".chart-fallback").forEach(t=>t.remove()),document.querySelectorAll("canvas").forEach(t=>{t.style.display="block",t.style.width="100%",t.style.maxWidth="",t.style.maxHeight="",t.style.height="",t.style.position="",t.style.minHeight="",t.style.top="",t.style.left="",t.style.visibility="",t.style.opacity="",t.style.zIndex=""}),"undefined"!=typeof Chart&&document.querySelectorAll("canvas").forEach(t=>{try{const e=Chart.getChart(t);if(!e||!e._originalOptions)return;e.options.plugins&&e.options.plugins.legend&&(e.options.plugins.legend.display=e._originalOptions.legend),e.options.maintainAspectRatio=e._originalOptions.aspectRatio,"annualCashFlowChart"===t.id&&e.data.datasets.length>8&&e.data.datasets.forEach((t,n)=>{e._originalOptions.pointRadius[n]&&(t.pointRadius=e._originalOptions.pointRadius[n]),e._originalOptions.pointHoverRadius[n]&&(t.pointHoverRadius=e._originalOptions.pointHoverRadius[n])}),e.update(),setTimeout(()=>{e&&"function"==typeof e.resize&&e.resize()},50)}catch(e){console.warn(`Error restoring chart ${t.id}:`,e)}});const n=document.getElementById("mobile-chart-fixes");n&&n.remove();const i=document.getElementById("sourcesUsesChart-wrapper");i&&(i.style.display="flex",i.style.flexWrap="wrap",i.style.width="100%",i.style.overflow="",i.style.height="",i.style.maxHeight="",i.style.position="");const o=document.getElementById("table-container"),s=document.getElementById("charts-container");o&&s&&(o.style.width="33%",o.style.float="left",o.style.minHeight="350px",o.style.paddingRight="10px",o.style.boxSizing="border-box",o.style.overflow="",o.style.height="",o.style.maxHeight="",s.style.width="66%",s.style.float="right",s.style.marginTop="0",s.style.height="350px",s.style.position="relative",s.style.maxHeight="",s.style.overflow=""),window.originalSynchronizeHeights&&(window.synchronizeHeights=window.originalSynchronizeHeights,window.originalSynchronizeHeights=null,setTimeout(()=>{if(window.synchronizeHeights&&"function"==typeof window.synchronizeHeights)try{window.synchronizeHeights()}catch(t){console.warn("Error calling synchronizeHeights:",t)}},100)),window.sourcesUsesChart&&"function"==typeof window.sourcesUsesChart.resize&&setTimeout(()=>{try{window.sourcesUsesChart.resize()}catch(t){console.warn("Error resizing sources-uses chart:",t)}},150)}function Ki(){const t=$i();setTimeout(()=>{const e=$i();t!==e&&(console.log(`Switched from ${t?"mobile":"desktop"} to ${e?"mobile":"desktop"}`),e?ji():Zi())},100)}function Gi(){const t=document.querySelector(".container-wrapper");t&&(t.style.maxWidth="95%",t.style.width="95%",t.style.boxSizing="border-box",t.style.overflow="hidden",t.style.margin="0 auto"),document.querySelectorAll(".chart-block").forEach(t=>{t.style.width="100%",t.style.maxWidth="100%",t.style.boxSizing="border-box",t.style.overflow="hidden",t.style.padding="15px"});const e=document.getElementById("sourcesUsesChart-wrapper");e&&(e.style.width="100%",e.style.maxWidth="100%",e.style.boxSizing="border-box",e.style.overflow="hidden");const n=document.getElementById("table-container"),i=document.getElementById("charts-container");n&&(n.style.width="100%",n.style.float="none",n.style.margin="0 0 15px 0",n.style.padding="0",n.style.boxSizing="border-box",n.style.overflowX="auto"),i&&(i.style.width="100%",i.style.float="none",i.style.margin="0",i.style.padding="0",i.style.boxSizing="border-box",i.style.height="300px",i.style.minHeight="300px"),document.querySelectorAll(".summary-table td:nth-child(2), .currency-cell").forEach(t=>{t.style.whiteSpace="nowrap"}),document.querySelectorAll("canvas").forEach(t=>{t.style.maxWidth="100%"})}function Ji(){const t=document.getElementById("equity-container"),e=document.getElementById("equity-summary-table-container");t&&e&&setTimeout(()=>{const n=e.querySelector("table");if(!n)return;const i=n.offsetHeight;e.style.height="auto",e.style.minHeight="auto",e.style.maxHeight="none",e.style.overflow="visible";const o=i+50;t.style.minHeight=o+"px",console.log("Adjusted equity summary height to",o,"px")},300)}function Qi(){const t=document.getElementById("equity-container"),e=document.getElementById("equity-summary-table-container");if(!t||!e)return;const n=e.querySelector("table");if(!n)return;const i=n.getBoundingClientRect().height,o=i+80;t.style.height=o+"px",t.style.minHeight=o+"px",e.style.height=i+"px",e.style.minHeight=i+"px",t.style.overflow="visible",e.style.overflow="visible",console.log("Fixed equity container height to",o,"px")}function to(){if(window.innerWidth>=992)return;if(La)return;console.log("Collapsing all sections for mobile view");const t=document.getElementById("toggle-switch")?.checked?document.getElementById("advanced-form"):document.getElementById("basic-form");if(!t)return;t.querySelectorAll('.collapsible input[type="checkbox"]').forEach(function(t,e){t.checked=!1;const n=t.nextElementSibling?.nextElementSibling;n&&(n.style.display="none",n.style.height="0",n.style.opacity="0")});const e=document.getElementById("form-container");e&&(e.style.height="auto")}function eo(){if(window.innerWidth>=992)return;console.log("Setting up mobile collapsible sections with proper icons");const t=document.getElementById("toggle-switch")?.checked?document.getElementById("advanced-form"):document.getElementById("basic-form");if(!t)return;const e=t.querySelectorAll('.collapsible input[type="checkbox"]');window._originalCollapsibleStates||(window._originalCollapsibleStates=new Map),e.forEach(function(t,e){if(window._originalCollapsibleStates.has(t)||window._originalCollapsibleStates.set(t,t.checked),t.dataset.userInteracted){const e="true"===t.dataset.expanded;t.checked=e;const n=t.nextElementSibling,i=n?n.querySelector(".collapsible-icon"):null;i&&(i.textContent=e?"-":"+",i.style.fontSize=e?"24px":"16px");const o=t.nextElementSibling?.nextElementSibling;o&&(o.style.display=e?"block":"none",o.style.opacity=e?"1":"0",o.style.height=e?"auto":"0")}else{t.checked=!1;const e=t.nextElementSibling,n=e?e.querySelector(".collapsible-icon"):null;n&&(n.textContent="+",n.style.fontSize="16px");const i=t.nextElementSibling?.nextElementSibling;i&&(i.style.display="none",i.style.opacity="0",i.style.height="0")}}),e.forEach(function(t){if(!t.dataset.handlerAttached){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),e.addEventListener("change",no),e.dataset.handlerAttached="true",t.dataset.userInteracted&&(e.dataset.userInteracted="true"),t.dataset.expanded&&(e.dataset.expanded=t.dataset.expanded)}})}function no(t){La=!0,t.target.dataset.userInteracted="true",t.target.setAttribute("data-expanded",t.target.checked);const e=t.target.nextElementSibling,n=e?e.querySelector(".collapsible-icon"):null,i=e?.nextElementSibling;i&&n&&(t.target.checked?(n.textContent="-",n.style.fontSize="24px",i.style.display="block",i.style.opacity="1",i.style.height="auto"):(n.textContent="+",n.style.fontSize="16px",i.style.opacity="0",i.style.height="0",setTimeout(()=>{t.target.checked||(i.style.display="none")},300)))}function io(){if(!$i())return;console.log("Applying Android keyboard fix");let t=null,e=null;document.querySelectorAll('input[type="text"], input[type="number"]').forEach(n=>{n.addEventListener("focus",function(n){if(t=this,e=function(t){let e=t;for(;e&&!e.classList.contains("collapsible");)e=e.parentElement;return e}(this),e){const t=e.querySelector('input[type="checkbox"]'),n=e.querySelector(".collapsible-content"),i=e.querySelector(".collapsible-icon");t&&!t.checked&&(t.checked=!0,n&&(n.style.display="block",n.style.opacity="1",n.style.height="auto"),i&&(i.textContent="-",i.style.fontSize="24px"),La=!0,t.dataset.keyboardLocked="true")}},!0),n.addEventListener("blur",function(){setTimeout(()=>{document.activeElement&&["INPUT","SELECT","TEXTAREA"].includes(document.activeElement.tagName)||(t=null,e=null)},100)},!0)});const n=window.addEventListener;window.addEventListener=function(e,i,o){return n.call(this,e,"resize"===e?function(e){t&&document.activeElement===t||Math.abs(window.innerHeight-lastKeyboardHeight)>100&&window.innerWidth===Ia||i.call(this,e)}:i,o)};const i=Ki;Ki=function(){t&&document.activeElement===t||i.apply(this,arguments)}}const oo=(t,e,n)=>Math.max(Math.min(t,n),e),so={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ao=[..."0123456789ABCDEF"],ro=t=>ao[15&t],lo=t=>ao[(240&t)>>4]+ao[15&t],co=t=>(240&t)>>4==(15&t),ho=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/,uo={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},po={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let go;const fo=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,mo=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,yo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);class bo{constructor(t){if(t instanceof bo)return t;const e=typeof t;let n;var i,o,s;"object"===e?n=g(t):"string"===e&&(s=(i=t).length,"#"===i[0]&&(4===s||5===s?o={r:255&17*so[i[1]],g:255&17*so[i[2]],b:255&17*so[i[3]],a:5===s?17*so[i[4]]:255}:7!==s&&9!==s||(o={r:so[i[1]]<<4|so[i[2]],g:so[i[3]]<<4|so[i[4]],b:so[i[5]]<<4|so[i[6]],a:9===s?so[i[7]]<<4|so[i[8]]:255})),n=o||function(t){go||(go=function(){const t={},e=Object.keys(po),n=Object.keys(uo);let i,o,s,a,r;for(i=0;i<e.length;i++){for(a=r=e[i],o=0;o<n.length;o++)s=n[o],r=r.replace(s,uo[s]);s=parseInt(po[a],16),t[r]=[s>>16&255,s>>8&255,255&s]}return t}(),go.transparent=[0,0,0,0]);const e=go[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||f(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=p(this._rgb);return t&&(t.a=i(t.a)),t}set rgb(t){this._rgb=g(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${i(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?(e=(t=>co(t.r)&&co(t.g)&&co(t.b)&&co(t.a))(t=this._rgb)?ro:lo,t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0):void 0;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=l(t),n=e[0],s=o(e[1]),a=o(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${i(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let o;const s=e===o?.5:e,a=2*s-1,r=n.a-i.a,l=((a*r===-1?a:(a+r)/(1+a*r))+1)/2;o=1-l,n.r=255&l*n.r+o*i.r+.5,n.g=255&l*n.g+o*i.g+.5,n.b=255&l*n.b+o*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,o){const s=yo(i(t.r)),a=yo(i(t.g)),r=yo(i(t.b));return{r:n(mo(s+o*(yo(i(e.r))-s))),g:n(mo(a+o*(yo(i(e.g))-a))),b:n(mo(r+o*(yo(i(e.b))-r))),a:t.a+o*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new bo(this.rgb)}alpha(t){return this._rgb.a=n(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const e=this._rgb,n=t(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=n,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return u(this._rgb,2,t),this}darken(t){return u(this._rgb,2,-t),this}saturate(t){return u(this._rgb,1,t),this}desaturate(t){return u(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=l(t);n[0]=h(n[0]+e),n=d(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}const xo=(()=>{let t=0;return()=>t++})(),vo=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t,wo={"":t=>t,x:t=>t.x,y:t=>t.y},_o=t=>void 0!==t,Eo=t=>"function"==typeof t,ko=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},Co=Math.PI,Mo=2*Co,So=Mo+Co,Po=Number.POSITIVE_INFINITY,Io=Co/180,Lo=Co/2,Ao=Co/4,To=2*Co/3,Do=Math.log10,Oo=Math.sign,Ro=(t,e,n,i)=>X(t,n,i?i=>{const o=t[i][e];return o<n||o===n&&t[i+1][e]===n}:i=>t[i][e]<n),Bo=(t,e,n)=>X(t,n,i=>t[i][e]>=n),zo=["push","pop","shift","splice","unshift"],Fo="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame,Ho=t=>"start"===t?"left":"end"===t?"right":"center",No=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,Vo=t=>0===t||1===t,Wo=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*Mo/n),qo=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Mo/n)+1,$o={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Lo),easeOutSine:t=>Math.sin(t*Lo),easeInOutSine:t=>-.5*(Math.cos(Co*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Vo(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Vo(t)?t:Wo(t,.075,.3),easeOutElastic:t=>Vo(t)?t:qo(t,.075,.3),easeInOutElastic(t){const e=.1125;return Vo(t)?t:t<.5?.5*Wo(2*t,e,.45):.5+.5*qo(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-$o.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*$o.easeInBounce(2*t):.5*$o.easeOutBounce(2*t-1)+.5},jo=["x","y","borderWidth","radius","tension"],Uo=["color","borderColor","backgroundColor"],Yo=new Map,Xo={values:t=>b(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let o,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const a=Do(Math.abs(s)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:o,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),it(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Do(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Xo.numeric.call(this,t,e,n):""}};var Zo={formatters:Xo};const Ko=Object.create(null),Go=Object.create(null);class Jo{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>nt(e.backgroundColor),this.hoverBorderColor=(t,e)=>nt(e.borderColor),this.hoverColor=(t,e)=>nt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return st(this,t,e)}get(t){return ot(this,t)}describe(t,e){return st(Go,t,e)}override(t,e){return st(Ko,t,e)}route(t,e,n,i){const o=ot(this,t),s=ot(this,n),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=s[i];return x(t)?Object.assign({},e,t):_(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach(t=>t(this))}}var Qo=new Jo({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Uo},numbers:{type:"number",properties:jo}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);const ts=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,es=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,ns=t=>+t||0,is=(t,e)=>t?t+D(e):e,os=(t,e)=>x(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object),ss=(t,e)=>!0===t?e:"string"==typeof t?T(e,t):void 0,as=Number.EPSILON||1e-14,rs=(t,e)=>e<t.length&&!t[e].skip&&t[e],ls=t=>"x"===t?"y":"x",cs=t=>t.ownerDocument.defaultView.getComputedStyle(t,null),ds=["top","right","bottom","left"],hs=t=>Math.round(10*t)/10,us=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};qt()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();class ps{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const o=e.duration;e.listeners[i].forEach(i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Fo.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let s,a=o.length-1,r=!1;for(;a>=0;--a)s=o[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),r=!0):(o[a]=o[o.length-1],o.pop());r&&(i.draw(),this._notify(i,n,t,"progress")),o.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var gs=new ps;const fs="transparent",ms={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=et(t||fs),o=i.valid&&et(e||fs);return o&&o.valid?o.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class ys{constructor(t,e,n,i){const o=e[n];i=St([t.to,i,o,t.from]);const s=St([t.from,o,i]);this._active=!0,this._fn=t.fn||ms[t.type||typeof s],this._easing=$o[t.easing]||$o.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,s=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=St([t.to,e,i,t.from]),this._from=St([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,o=this._from,s=this._loop,a=this._to;let r;if(this._active=o!==a&&(s||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=o:(r=e/n%2,r=s&&r>1?2-r:r,r=this._easing(Math.min(1,Math.max(0,r))),this._target[i]=this._fn(o,a,r))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class bs{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!x(t))return;const e=Object.keys(Qo.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const o=t[i];if(!x(o))return;const s={};for(const t of e)s[t]=o[t];(b(o.properties)&&o.properties||[i]).forEach(t=>{t!==i&&n.has(t)||n.set(t,s)})})}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(t,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const o=t[i[e]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,i=[],o=t.$animations||(t.$animations={}),s=Object.keys(e),a=Date.now();let r;for(r=s.length-1;r>=0;--r){const l=s[r];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let d=o[l];const h=n.get(l);if(d){if(h&&d.active()){d.update(h,c,a);continue}d.cancel()}h&&h.duration?(o[l]=d=new ys(h,t,l,c),i.push(d)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(gs.add(this._chart,n),!0):void 0}}const xs=t=>"reset"===t||"none"===t,vs=(t,e)=>e?t:Object.assign({},t);class ws{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=pe(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&be(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,o=e.xAxisID=_(n.xAxisID,ye(t,"x")),s=e.yAxisID=_(n.yAxisID,ye(t,"y")),a=e.rAxisID=_(n.rAxisID,ye(t,"r")),r=e.indexAxis,l=e.iAxisID=i(r,o,s,a),c=e.vAxisID=i(r,s,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Z(this._data,this),t._stacked&&be(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(x(e))this._data=function(t,e){const{iScale:n,vScale:i}=e,o="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",a=Object.keys(t),r=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],r[l]={[o]:d,[s]:t[d]};return r}(e,this._cachedMeta);else if(n!==e){if(n){Z(n,this);const t=this._cachedMeta;be(t),t._parsed=[]}e&&Object.isExtensible(e)&&((i=e)._chartjs?i._chartjs.listeners.push(this):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),zo.forEach(t=>{const e="_onData"+D(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const o=n.apply(this,t);return i._chartjs.listeners.forEach(n=>{"function"==typeof n[e]&&n[e](...t)}),o}})}))),this._syncList=[],this._data=e}var i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=e._stacked;e._stacked=pe(e.vScale,e),e.stack!==n.stack&&(i=!0,be(e),e.stack=n.stack),this._resyncElements(t),(i||o!==e._stacked)&&(me(this,e._parsed),e._stacked=pe(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:s}=n,a=o.axis;let r,l,c,d=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=b(i[t])?this.parseArrayData(n,i,t,e):x(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const o=()=>null===l[a]||h&&l[a]<h[a];for(r=0;r<e;++r)n._parsed[r+t]=l=c[r],d&&(o()&&(d=!1),h=l);n._sorted=d}s&&me(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:o,vScale:s}=t,a=o.axis,r=s.axis,l=o.getLabels(),c=o===s,d=new Array(i);let h,u,p;for(h=0,u=i;h<u;++h)p=h+n,d[h]={[a]:c||o.parse(l[p],p),[r]:s.parse(e[p],p)};return d}parseArrayData(t,e,n,i){const{xScale:o,yScale:s}=t,a=new Array(i);let r,l,c,d;for(r=0,l=i;r<l;++r)c=r+n,d=e[c],a[r]={x:o.parse(d[0],c),y:s.parse(d[1],c)};return a}parseObjectData(t,e,n,i){const{xScale:o,yScale:s}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l=new Array(i);let c,d,h,u;for(c=0,d=i;c<d;++c)h=c+n,u=e[h],l[c]={x:o.parse(T(u,a),h),y:s.parse(T(u,r),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this._cachedMeta,o=e[t.axis];return ue({keys:he(this.chart,!0),values:e._stacks[t.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const o=n[e.axis];let s=null===o?NaN:o;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,s=ue(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){function n(){p=o[u];const e=p[r.axis];return!v(p[t.axis])||d>e||h<e}const i=this._cachedMeta,o=i._parsed,s=i._sorted&&t===i.iScale,a=o.length,r=this._getOtherScale(t),l=((t,e)=>t&&!e.hidden&&e._stacked&&{keys:he(this.chart,!0),values:null})(e,i),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=function(t){const{min:e,max:n,minDefined:i,maxDefined:o}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}(r);let u,p;for(u=0;u<a&&(n()||(this.updateRangeFromParsed(c,t,p,l),!s));++u);if(s)for(u=a-1;u>=0;--u)if(!n()){this.updateRangeFromParsed(c,t,p,l);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,o,s;for(i=0,o=e.length;i<o;++i)s=e[i][t.axis],v(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,o;return x(t)?(e=t.top,n=t.right,i=t.bottom,o=t.left):e=n=i=o=t,{top:e,right:n,bottom:i,left:o,disabled:!1===t}}(_(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=de(t,n),o=de(e,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this._cachedMeta,n=e.data||[],i=this.chart.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||n.length-s,r=this.options.drawActiveElementsOnTop;let l;for(e.dataset&&e.dataset.draw(t,i,s,a),l=s;l<s+a;++l){const e=n[l];e.hidden||(e.active&&r?o.push(e):e.draw(t,i))}for(l=0;l<o.length;++l)o[l].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];o=e.$context||(e.$context=function(t,e,n){return Pt(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(t,e){return Pt(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,o=this._cachedDataOpts,s=t+"-"+e,a=o[s],r=this.enableOptionSharing&&_o(n);if(a)return vs(a,r);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),u=Object.keys(Qo.elements[t]),p=l.resolveNamedOptions(h,u,()=>this.getContext(n,i,e),d);return p.$shared&&(p.$shared=r,o[s]=Object.freeze(vs(p,r))),p}_resolveAnimations(t,e,n){const i=this.chart,o=this._cachedDataOpts,s=`animation-${e}`,a=o[s];if(a)return a;let r;if(!1!==i.options.animation){const i=this.chart.config,o=i.datasetAnimationScopeKeys(this._type,e),s=i.getOptionScopes(this.getDataset(),o);r=i.createResolver(s,this.getContext(t,n,e))}const l=new bs(i,r&&r.animations);return r&&r._cacheable&&(o[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||xs(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,o=this.getSharedOptions(n),s=this.includeOptions(e,o)||o!==i;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:s}}updateElement(t,e,n,i){xs(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!xs(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const o=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,o=e.length,s=Math.min(o,i);s&&this.parse(0,s),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,e,n=!0){const i=this._cachedMeta,o=i.data,s=t+e;let a;const r=t=>{for(t.length+=e,a=t.length-1;a>=s;a--)t[a]=t[a-e]};for(r(o),a=t;a<s;++a)o[a]=new this.dataElementType;this._parsing&&r(i._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&be(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class _s extends ws{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,o)=>{const s=t.getDatasetMeta(0).controller.getStyle(o);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let o,s,a=t=>+n[t];if(x(n[t])){const{key:t="value"}=this._parsing;a=e=>+T(n[e],t)}for(o=t,s=t+e;o<s;++o)i._parsed[o]=a(o)}}_getRotation(){return F(this.options.rotation-90)}_getCircumference(){return F(this.options.circumference)}_getRotationExtents(){let t=Mo,e=-Mo;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),s=i._getCircumference();t=Math.min(t,o),e=Math.max(e,o+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,o=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),r=Math.min((c=a,"string"==typeof(l=this.options.cutout)&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:f,offsetY:m}=function(t,e,n){let i=1,o=1,s=0,a=0;if(e<Mo){const r=t,l=r+e,c=Math.cos(r),d=Math.sin(r),h=Math.cos(l),u=Math.sin(l),p=(t,e,i)=>j(t,r,l,!0)?1:Math.max(e,e*n,i,i*n),g=(t,e,i)=>j(t,r,l,!0)?-1:Math.min(e,e*n,i,i*n),f=p(0,c,h),m=p(Lo,d,u),y=g(Co,c,h),b=g(Co+Lo,d,u);i=(f-y)/2,o=(m-b)/2,s=-(f+y)/2,a=-(m+b)/2}return{ratioX:i,ratioY:o,offsetX:s,offsetY:a}}(u,h,r),y=Math.max(Math.min((n.width-s)/p,(n.height-s)/g)/2,0),b=vo(this.options.radius,y),x=(b-Math.max(b*r,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*b,this.offsetY=m*b,i.total=this.calculateTotal(),this.outerRadius=b-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/Mo)}updateElements(t,e,n,i){const o="reset"===i,s=this.chart,a=s.chartArea,r=(a.left+a.right)/2,l=(a.top+a.bottom)/2,c=o&&s.options.animation.animateScale,d=c?0:this.innerRadius,h=c?0:this.outerRadius,{sharedOptions:u,includeOptions:p}=this._getSharedOptions(e,i);let g,f=this._getRotation();for(g=0;g<e;++g)f+=this._circumference(g,o);for(g=e;g<e+n;++g){const e=this._circumference(g,o),n=t[g],s={x:r+this.offsetX,y:l+this.offsetY,startAngle:f,endAngle:f+e,circumference:e,outerRadius:h,innerRadius:d};p&&(s.options=u||this.resolveDataElementOptions(g,n.active?"active":i)),f+=e,this.updateElement(n,g,s,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const o=t._parsed[n];null===o||isNaN(o)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Mo*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this.chart,n=e.data.labels||[],i=it(this._cachedMeta._parsed[t],e.options.locale);return{label:n[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,o,s,a,r;if(!t)for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),t=s.data,a=s.controller;break}if(!t)return 0;for(i=0,o=t.length;i<o;++i)r=a.resolveDataElementOptions(i),"inner"!==r.borderAlign&&(e=Math.max(e,r.borderWidth||0,r.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(_(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Es extends ws{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,o)=>{const s=t.getDatasetMeta(0).controller.getStyle(o);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this.chart,n=e.data.labels||[],i=it(this._cachedMeta._parsed[t].r,e.options.locale);return{label:n[t]||"",value:i}}parseObjectData(t,e,n,i){return Ht.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(i/2,0),s=(o-Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,i){const o="reset"===i,s=this.chart,a=s.options.animation,r=this._cachedMeta.rScale,l=r.xCenter,c=r.yCenter,d=r.getIndexAngle(0)-.5*Co;let h,u=d;const p=360/this.countVisibleElements();for(h=0;h<e;++h)u+=this._computeAngle(h,i,p);for(h=e;h<e+n;h++){const e=t[h];let n=u,g=u+this._computeAngle(h,i,p),f=s.getDataVisibility(h)?r.getDistanceFromCenterForValue(this.getParsed(h).r):0;u=g,o&&(a.animateScale&&(f=0),a.animateRotate&&(n=g=d));const m={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){let t=0;return this._cachedMeta.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?F(this.resolveDataElementOptions(t,e).angle||n):0}}var ks=Object.freeze({__proto__:null,BarController:class extends ws{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,i){return we(t,e,n,i)}parseArrayData(t,e,n,i){return we(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:o,vScale:s}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l="x"===o.axis?a:r,c="x"===s.axis?a:r,d=[];let h,u,p,g;for(h=n,u=n+i;h<u;++h)g=e[h],p={},p[o.axis]=o.parse(T(g,l),h),d.push(ve(T(g,c),p,s,h));return d}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const o=n._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,o=this.getParsed(t),s=o._custom,a=_e(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const o="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,r=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(e,i);for(let u=e;u<e+n;u++){const e=this.getParsed(u),n=o||y(e[a.axis])?{base:r,head:r}:this._calculateBarValuePixels(u),p=this._calculateBarIndexPixels(u,c),g=(e._stacks||{})[a.axis],f={horizontal:l,base:n.base,enableBorderRadius:!g||_e(e._custom)||s===g._top||s===g._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};h&&(f.options=d||this.resolveDataElementOptions(u,t[u].active?"active":i));const m=f.options||t[u].options;Ee(f,m,g,s),Me(f,m,c.ratio),this.updateElement(t[u],u,f,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),o=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(e),r=a&&a[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===r),i=e&&e[t.vScale.axis];if(y(i)||isNaN(i))return!0};for(const n of i)if((void 0===e||!l(n))&&((!1===o||-1===s.indexOf(n.stack)||void 0===o&&void 0===n.stack)&&s.push(n.stack),n.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[_("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const i=this._getStacks(t,n),o=void 0!==e?i.indexOf(e):-1;return-1===o?i.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let o,s;for(o=0,s=e.data.length;o<s;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||xe(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:o,minBarLength:s}}=this,a=o||0,r=this.getParsed(t),l=r._custom,c=_e(l);let d,h,u=r[e.axis],p=0,g=n?this.applyStack(e,r,n):u;g!==u&&(p=g-u,g=u),c&&(u=l.barStart,g=l.barEnd-l.barStart,0!==u&&Oo(u)!==Oo(l.barEnd)&&(p=0),p+=u);const f=y(o)||c?p:o;let m=e.getPixelForValue(f);if(d=this.chart.getDataVisibility(t)?e.getPixelForValue(p+g):m,h=d-m,Math.abs(h)<s){h=function(t,e,n){return 0!==t?Oo(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,a)*s,u===a&&(m-=h/2);const t=e.getPixelForDecimal(0),o=e.getPixelForDecimal(1),l=Math.min(t,o),p=Math.max(t,o);m=Math.max(Math.min(m,p),l),d=m+h,n&&!c&&(r._stacks[e.axis]._visualValues[i]=e.getValueForPixel(d)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=Oo(h)*e.getLineWidthForValue(a)/2;m+=t,h-=t}return{size:h,base:m,head:d,center:d+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,o=i.skipNull,s=_(i.maxBarThickness,1/0);let a,r;const l=this._getAxisCount();if(e.grouped){const n=o?this._getStackCount(t):e.stackCount,c="flex"===i.barThickness?function(t,e,n,i){const o=e.pixels,s=o[t];let a=t>0?o[t-1]:null,r=t<o.length-1?o[t+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===r?e.end-e.start:r-s)),null===r&&(r=s+s-a);const c=s-(s-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n*l):function(t,e,n,i){const o=n.barThickness;let s,a;return y(o)?(s=e.min*n.categoryPercentage,a=n.barPercentage):(s=o*i,a=1),{chunk:s/i,ratio:a,start:e.pixels[t]-s/2}}(t,e,i,n*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(_(d,this.getFirstScaleIdForIndexAxis())),u=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+h;a=c.start+c.chunk*u+c.chunk/2,r=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),r=Math.min(s,e.min*e.ratio);return{base:a-r/2,head:a+r/2,center:a,size:r}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let o=0;for(;o<i;++o)null===this.getParsed(o)[e.axis]||n[o].hidden||n[o].draw(this._ctx)}},BubbleController:class extends ws{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const o=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<o.length;t++)o[t]._custom=this.resolveDataElementOptions(t+n).radius;return o}parseArrayData(t,e,n,i){const o=super.parseArrayData(t,e,n,i);for(let t=0;t<o.length;t++)o[t]._custom=_(e[n+t][2],this.resolveDataElementOptions(t+n).radius);return o}parseObjectData(t,e,n,i){const o=super.parseObjectData(t,e,n,i);for(let t=0;t<o.length;t++){const i=e[n+t];o[t]._custom=_(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=e,s=this.getParsed(t),a=i.getLabelForValue(s.x),r=o.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+a+", "+r+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const o="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:r,includeOptions:l}=this._getSharedOptions(e,i),c=s.axis,d=a.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!o&&this.getParsed(h),u={},p=u[c]=o?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),g=u[d]=o?a.getBasePixel():a.getPixelForValue(n[d]);u.skip=isNaN(p)||isNaN(g),l&&(u.options=r||this.resolveDataElementOptions(h,e.active?"active":i),o&&(u.options.radius=0)),this.updateElement(e,h,u,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return"active"!==e&&(i.radius=0),i.radius+=_(n&&n._custom,o),i}},DoughnutController:_s,LineController:class extends ws{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=e,s=this.chart._animationsDisabled;let{start:a,count:r}=J(e,i,s);this._drawStart=a,this._drawCount=r,Q(e)&&(a=0,r=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(i,a,r,t)}updateElements(t,e,n,i){const o="reset"===i,{iScale:s,vScale:a,_stacked:r,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,i),h=s.axis,u=a.axis,{spanGaps:p,segment:g}=this.options,f=B(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||o||"none"===i,b=e+n,x=t.length;let v=e>0&&this.getParsed(e-1);for(let n=0;n<x;++n){const p=t[n],x=m?p:{};if(n<e||n>=b){x.skip=!0;continue}const w=this.getParsed(n),_=y(w[u]),E=x[h]=s.getPixelForValue(w[h],n),k=x[u]=o||_?a.getBasePixel():a.getPixelForValue(r?this.applyStack(a,w,r):w[u],n);x.skip=isNaN(E)||isNaN(k)||_,x.stop=n>0&&Math.abs(w[h]-v[h])>f,g&&(x.parsed=w,x.raw=l.data[n]),d&&(x.options=c||this.resolveDataElementOptions(n,p.active?"active":i)),m||this.updateElement(p,n,x,i),v=w}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends _s{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Es,RadarController:class extends ws{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Ht.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],o=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0),this.updateElement(n,void 0,{_loop:!0,_fullLoop:o.length===i.length,options:e},t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const o=this._cachedMeta.rScale,s="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),r=o.getPointPositionForValue(a,this.getParsed(a).r),l=s?o.xCenter:r.x,c=s?o.yCenter:r.y,d={x:l,y:c,angle:r.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,d,i)}}},ScatterController:class extends ws{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=e,s=this.getParsed(t),a=i.getLabelForValue(s.x),r=o.getLabelForValue(s.y);return{label:n[t]||"",value:"("+a+", "+r+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:o,count:s}=J(e,n,i);if(this._drawStart=o,this._drawCount=s,Q(e)&&(o=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:s}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!s._decimated,o.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,o,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const o="reset"===i,{iScale:s,vScale:a,_stacked:r,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(c),h=this.includeOptions(i,d),u=s.axis,p=a.axis,{spanGaps:g,segment:f}=this.options,m=B(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||"none"===i;let x=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),g=b?e:{},v=y(n[p]),w=g[u]=s.getPixelForValue(n[u],c),_=g[p]=o||v?a.getBasePixel():a.getPixelForValue(r?this.applyStack(a,n,r):n[p],c);g.skip=isNaN(w)||isNaN(_)||v,g.stop=c>0&&Math.abs(n[u]-x[u])>m,f&&(g.parsed=n,g.raw=l.data[c]),h&&(g.options=d||this.resolveDataElementOptions(c,e.active?"active":i)),b||this.updateElement(e,c,g,i),x=n}this.updateSharedOptions(d,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const o=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,o,s)/2}}});class Cs{static override(t){Object.assign(Cs.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Se()}parse(){return Se()}format(){return Se()}add(){return Se()}diff(){return Se()}startOf(){return Se()}endOf(){return Se()}}var Ms=Cs,Ss={modes:{index(t,e,n,i){const o=Yt(e,t),s=n.axis||"x",a=n.includeInvisible||!1,r=n.intersect?Le(t,o,s,i,a):Ae(t,o,s,!1,i,a),l=[];return r.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=r[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,i){const o=Yt(e,t),s=n.axis||"xy",a=n.includeInvisible||!1;let r=n.intersect?Le(t,o,s,i,a):Ae(t,o,s,!1,i,a);if(r.length>0){const e=r[0].datasetIndex,n=t.getDatasetMeta(e).data;r=[];for(let t=0;t<n.length;++t)r.push({element:n[t],datasetIndex:e,index:t})}return r},point:(t,e,n,i)=>Le(t,Yt(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest:(t,e,n,i)=>Ae(t,Yt(e,t),n.axis||"xy",n.intersect,i,n.includeInvisible||!1),x:(t,e,n,i)=>Te(t,Yt(e,t),"x",n.intersect,i),y:(t,e,n,i)=>Te(t,Yt(e,t),"y",n.intersect,i)}};const Ps=["left","top","right","bottom"];var Is={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const o=Ct(t.options.layout.padding),s=Math.max(e-o.width,0),a=Math.max(n-o.height,0),r=function(t){const e=function(t){const e=[];let n,i,o,s,a,r;for(n=0,i=(t||[]).length;n<i;++n)o=t[n],({position:s,options:{stack:a,stackWeight:r=1}}=o),e.push({index:n,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:a&&s+a,stackWeight:r});return e}(t),n=Re(e.filter(t=>t.box.fullSize),!0),i=Re(De(e,"left"),!0),o=Re(De(e,"right")),s=Re(De(e,"top"),!0),a=Re(De(e,"bottom")),r=Oe(e,"x"),l=Oe(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:o.concat(l).concat(a).concat(r),chartArea:De(e,"chartArea"),vertical:i.concat(o).concat(l),horizontal:s.concat(a).concat(r)}}(t.boxes),l=r.vertical,c=r.horizontal;k(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const d=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:o,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),u=Object.assign({},o);ze(u,Ct(i));const p=Object.assign({maxPadding:u,w:s,h:a,x:o.left,y:o.top},o),g=function(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:o}=n;if(!t||!Ps.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:o}=e;let s,a,r;for(s=0,a=t.length;s<a;++s){r=t[s];const{fullSize:a}=r.box,l=n[r.stack],c=l&&r.stackWeight/l.weight;r.horizontal?(r.width=c?c*i:a&&e.availableWidth,r.height=o):(r.width=i,r.height=c?c*o:a&&e.availableHeight)}return n}(l.concat(c),h);Ne(r.fullSize,p,h,g),Ne(l,p,h,g),Ne(c,p,h,g)&&Ne(l,p,h,g),function(t){function e(e){const i=Math.max(n[e]-t[e],0);return t[e]+=i,i}const n=t.maxPadding;t.y+=e("top"),t.x+=e("left"),e("right"),e("bottom")}(p),We(r.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,We(r.rightAndBottom,p,h,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},k(r.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Ls{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class As extends Ls{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ts="$chartjs",Ds={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Os=t=>null===t||""===t,Rs=!!us&&{passive:!0},Bs=new Map;let zs=0;class Fs extends Ls{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),o=t.getAttribute("width");if(t[Ts]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Os(o)){const e=Zt(t,"width");void 0!==e&&(t.width=e)}if(Os(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Zt(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Ts])return!1;const n=e[Ts].initial;["height","width"].forEach(t=>{const i=n[t];y(i)?e.removeAttribute(t):e.setAttribute(t,i)});const i=n.style||{};return Object.keys(i).forEach(t=>{e.style[t]=i[t]}),e.width=e.width,delete e[Ts],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:je,detach:Ue,resize:Xe}[e]||Ke)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];i&&(({attach:Ze,detach:Ze,resize:Ze}[e]||qe)(t,e,i),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return function(t,e,n,i){const o=cs(t),s=Ut(o,"margin"),a=jt(o.maxWidth,t,"clientWidth")||Po,r=jt(o.maxHeight,t,"clientHeight")||Po,l=function(t,e,n){let i,o;if(void 0===e||void 0===n){const s=t&&$t(t);if(s){const t=s.getBoundingClientRect(),a=cs(s),r=Ut(a,"border","width"),l=Ut(a,"padding");e=t.width-l.width-r.width,n=t.height-l.height-r.height,i=jt(a.maxWidth,s,"clientWidth"),o=jt(a.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||Po,maxHeight:o||Po}}(t,e,n);let{width:c,height:d}=l;if("content-box"===o.boxSizing){const t=Ut(o,"border","width"),e=Ut(o,"padding");c-=e.width+t.width,d-=e.height+t.height}return c=Math.max(0,c-s.width),d=Math.max(0,i?c/i:d-s.height),c=hs(Math.min(c,a,l.maxWidth)),d=hs(Math.min(d,r,l.maxHeight)),c&&!d&&(d=hs(c/2)),(void 0!==e||void 0!==n)&&i&&l.height&&d>l.height&&(d=l.height,c=hs(Math.floor(d*i))),{width:c,height:d}}(t,e,n,i)}isAttached(t){const e=t&&$t(t);return!(!e||!e.isConnected)}}class Hs{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return B(this.x)&&B(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),i}}const Ns=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Vs=(t,e)=>Math.min(e||t,t);class Ws extends Hs{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=w(t,Number.POSITIVE_INFINITY),e=w(e,Number.NEGATIVE_INFINITY),n=w(n,Number.POSITIVE_INFINITY),i=w(i,Number.NEGATIVE_INFINITY),{min:w(t,n),max:w(e,i),minDefined:v(t),maxDefined:v(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();if(o&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let r=0,l=a.length;r<l;++r)e=a[r].controller.getMinMax(this,t),o||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=o&&n>i?n:i,{min:w(n,w(i,n)),max:w(i,w(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){E(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:o}=t,s=vo(e,(o-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(s)),max:a(o,s)}}(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const r=a<this.ticks.length;this._convertTicksToLabels(r?Je(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=function(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize();return Math.floor(Math.min(t._length/n+(e?0:1),t._maxLength/n))}(t),o=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],a=s.length,r=s[0],l=s[a-1],c=[];if(a>o)return function(t,e,n,i){let o,s=0,a=n[0];for(i=Math.ceil(i),o=0;o<t.length;o++)o===a&&(e.push(t[o]),s++,a=n[s*i])}(e,c,s,a/o),c;const d=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),o=e.length/n;if(!i)return Math.max(o,1);const s=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(i);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>o)return e}return Math.max(o,1)}(s,e,o);if(a>0){let t,n;const i=a>1?Math.round((l-r)/(a-1)):null;for(Ge(e,c,d,y(i)?0:r-i,r),t=0,n=a-1;t<n;t++)Ge(e,c,d,s[t],s[t+1]);return Ge(e,c,d,l,y(i)?e.length:l+i),c}return Ge(e,c,d),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),r&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){E(this.options.afterUpdate,[this])}beforeSetDimensions(){E(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){E(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),E(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){E(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=E(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){E(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){E(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Vs(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,o=e.maxRotation;let s,a,r,l=i;if(!this._isVisible()||!e.display||i>=o||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),d=c.widest.width,h=c.highest.height,u=U(this.chart.width-d,0,this.maxWidth);s=t.offset?this.maxWidth/n:u/(n-1),d+6>s&&(s=u/(n-(t.offset?.5:1)),a=this.maxHeight-tn(t.grid)-e.padding-en(t.title,this.chart.options.font),r=Math.sqrt(d*d+h*h),l=H(Math.min(Math.asin(U((c.highest.height+6)/s,-1,1)),Math.asin(U(a/r,-1,1))-Math.asin(U(h/r,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){E(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){E(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=en(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=tn(o)+s):(t.height=this.maxHeight,t.width=tn(o)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:o,highest:s}=this._getLabelSizes(),r=2*n.padding,l=F(this.labelRotation),c=Math.cos(l),d=Math.sin(l);a?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:d*o.width+c*s.height)+r):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:c*o.width+d*s.height)+r),this._calculatePadding(e,i,d,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:o,padding:s},position:a}=this.options,r=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,h=0;r?l?(d=i*t.width,h=n*e.height):(d=n*t.height,h=i*e.width):"start"===o?h=e.width:"end"===o?d=t.width:"inner"!==o&&(d=t.width/2,h=e.width/2),this.paddingLeft=Math.max((d-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===o?(n=0,i=t.height):"end"===o&&(n=e.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){E(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)y(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Je(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:o}=this,s=[],a=[],r=Math.floor(e/Vs(e,n));let l,c,d,h,u,p,g,f,m,x,v,w=0,_=0;for(l=0;l<e;l+=r){if(h=t[l].label,u=this._resolveTickFontOptions(l),i.font=p=u.string,g=o[p]=o[p]||{data:{},gc:[]},f=u.lineHeight,m=x=0,y(h)||b(h)){if(b(h))for(c=0,d=h.length;c<d;++c)v=h[c],y(v)||b(v)||(m=at(i,g.data,g.gc,m,v),x+=f)}else m=at(i,g.data,g.gc,m,h),x=f;s.push(m),a.push(x),w=Math.max(m,w),_=Math.max(x,_)}!function(t,e){k(t,t=>{const n=t.gc,i=n.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[n[o]];n.splice(0,i)}})}(o,e);const E=s.indexOf(w),C=a.indexOf(_),M=t=>({width:s[t]||0,height:a[t]||0});return{first:M(0),last:M(e-1),widest:M(E),highest:M(C),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return U(this._alignToPixels?lt(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Pt(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Pt(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=F(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),o=this._getLabelSizes(),s=t.autoSkipPadding||0,a=o?o.widest.width+s:0,r=o?o.highest.height+s:0;return this.isHorizontal()?r*n>a*i?a/n:r/i:r*i<a*n?r/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:o,position:s,border:a}=i,r=o.offset,l=this.isHorizontal(),c=this.ticks.length+(r?1:0),d=tn(o),h=[],u=a.setContext(this.getContext()),p=u.display?u.width:0,g=p/2,f=function(t){return lt(n,t,p)};let m,y,b,v,w,E,k,C,M,S,P,I;if("top"===s)m=f(this.bottom),E=this.bottom-d,C=m-g,S=f(t.top)+g,I=t.bottom;else if("bottom"===s)m=f(this.top),S=t.top,I=f(t.bottom)-g,E=m+g,C=this.top+d;else if("left"===s)m=f(this.right),w=this.right-d,k=m-g,M=f(t.left)+g,P=t.right;else if("right"===s)m=f(this.left),M=t.left,P=f(t.right)-g,w=m+g,k=this.left+d;else if("x"===e){if("center"===s)m=f((t.top+t.bottom)/2+.5);else if(x(s)){const t=Object.keys(s)[0];m=f(this.chart.scales[t].getPixelForValue(s[t]))}S=t.top,I=t.bottom,E=m+g,C=E+d}else if("y"===e){if("center"===s)m=f((t.left+t.right)/2);else if(x(s)){const t=Object.keys(s)[0];m=f(this.chart.scales[t].getPixelForValue(s[t]))}w=m-g,k=w-d,M=t.left,P=t.right}const L=_(i.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/L));for(y=0;y<c;y+=A){const t=this.getContext(y),e=o.setContext(t),i=a.setContext(t),s=e.lineWidth,c=e.color,d=i.dash||[],u=i.dashOffset,p=e.tickWidth,g=e.tickColor,f=e.tickBorderDash||[],m=e.tickBorderDashOffset;b=Qe(this,y,r),void 0!==b&&(v=lt(n,b,s),l?w=k=M=P=v:E=C=S=I=v,h.push({tx1:w,ty1:E,tx2:k,ty2:C,x1:M,y1:S,x2:P,y2:I,width:s,color:c,borderDash:d,borderDashOffset:u,tickWidth:p,tickColor:g,tickBorderDash:f,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:o}=n,s=this.isHorizontal(),a=this.ticks,{align:r,crossAlign:l,padding:c,mirror:d}=o,h=tn(n.grid),u=h+c,p=d?-c:u,g=-F(this.labelRotation),f=[];let m,y,v,w,_,E,k,C,M,S,P,I,L="middle";if("top"===i)E=this.bottom-p,k=this._getXAxisLabelAlignment();else if("bottom"===i)E=this.top+p,k=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);k=t.textAlign,_=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);k=t.textAlign,_=t.x}else if("x"===e){if("center"===i)E=(t.top+t.bottom)/2+u;else if(x(i)){const t=Object.keys(i)[0];E=this.chart.scales[t].getPixelForValue(i[t])+u}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)_=(t.left+t.right)/2-u;else if(x(i)){const t=Object.keys(i)[0];_=this.chart.scales[t].getPixelForValue(i[t])}k=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===r?L="top":"end"===r&&(L="bottom"));const A=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){v=a[m],w=v.label;const t=o.setContext(this.getContext(m));C=this.getPixelForTick(m)+o.labelOffset,M=this._resolveTickFontOptions(m),S=M.lineHeight,P=b(w)?w.length:1;const e=P/2,n=t.color,r=t.textStrokeColor,c=t.textStrokeWidth;let h,u=k;if(s?(_=C,"inner"===k&&(u=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),I="top"===i?"near"===l||0!==g?-P*S+S/2:"center"===l?-A.highest.height/2-e*S+S:S/2-A.highest.height:"near"===l||0!==g?S/2:"center"===l?A.highest.height/2-e*S:A.highest.height-P*S,d&&(I*=-1),0===g||t.showLabelBackdrop||(_+=S/2*Math.sin(g))):(E=C,I=(1-P)*S/2),t.showLabelBackdrop){const e=Ct(t.backdropPadding),n=A.heights[m],i=A.widths[m];let o=I-e.top,s=0-e.left;switch(L){case"middle":o-=n/2;break;case"bottom":o-=n}switch(k){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:o,width:i+e.width,height:n+e.height,color:t.backdropColor}}f.push({label:w,font:M,textOffset:I,options:{rotation:g,color:n,strokeColor:r,strokeWidth:c,textAlign:u,textBaseline:L,translation:[_,E],backdrop:h}})}return f}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-F(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,s=t+o,a=this._getLabelSizes().widest.width;let r,l;return"left"===e?i?(l=this.right+o,"near"===n?r="left":"center"===n?(r="center",l+=a/2):(r="right",l+=a)):(l=this.right-s,"near"===n?r="right":"center"===n?(r="center",l-=a/2):(r="left",l=this.left)):"right"===e?i?(l=this.left+o,"near"===n?r="right":"center"===n?(r="center",l-=a/2):(r="left",l-=a)):(l=this.left+s,"near"===n?r="left":"center"===n?(r="center",l+=a/2):(r="right",l=this.right)):r="right",{textAlign:r,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:o,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,o,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,s;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(o=0,s=i.length;o<s;++o){const t=i[o];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),s=n.display?o.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,r=this._borderValue;let l,c,d,h;this.isHorizontal()?(l=lt(t,this.left,s)-s/2,c=lt(t,this.right,a)+a/2,d=h=r):(d=lt(t,this.top,s)-s/2,h=lt(t,this.bottom,a)+a/2,l=c=r),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(l,d),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&pt(e,n);const i=this.getLabelItems(t);for(const t of i)xt(e,t.label,0,t.textOffset,t.font,t.options);n&&gt(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const o=Mt(n.font),s=Ct(n.padding),a=n.align;let r=o.lineHeight/2;"bottom"===e||"center"===e||x(e)?(r+=s.bottom,b(n.text)&&(r+=o.lineHeight*(n.text.length-1))):r+=s.top;const{titleX:l,titleY:c,maxWidth:d,rotation:h}=function(t,e,n,i){const{top:o,left:s,bottom:a,right:r,chart:l}=t,{chartArea:c,scales:d}=l;let h,u,p,g=0;const f=a-o,m=r-s;if(t.isHorizontal()){if(u=No(i,s,r),x(n)){const t=Object.keys(n)[0];p=d[t].getPixelForValue(n[t])+f-e}else p="center"===n?(c.bottom+c.top)/2+f-e:Ns(t,n,e);h=r-s}else{if(x(n)){const t=Object.keys(n)[0];u=d[t].getPixelForValue(n[t])-m+e}else u="center"===n?(c.left+c.right)/2-m+e:Ns(t,n,e);p=No(i,a,o),g="left"===n?-Lo:Lo}return{titleX:u,titleY:p,maxWidth:h,rotation:g}}(this,r,e,a);xt(t,n.text,0,0,o,{color:n.color,maxWidth:d,rotation:h,textAlign:nn(a,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=_(t.grid&&t.grid.z,-1),i=_(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Ws.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,s;for(o=0,s=e.length;o<s;++o){const s=e[o];s[n]!==this.id||t&&s.type!==t||i.push(s)}return i}_resolveTickFontOptions(t){return Mt(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class qs{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,o=t.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,function(t,e,n){const i=I(Object.create(null),[n?Qo.get(n):{},Qo.get(e),t.defaults]);Qo.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),o=i.pop(),s=[t].concat(i).join("."),a=e[n].split("."),r=a.pop(),l=a.join(".");Qo.route(s,o,l,r)})}(e,t.defaultRoutes),t.descriptors&&Qo.describe(e,t.descriptors)}(t,s,n),this.override&&Qo.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in Qo[i]&&(delete Qo[i][n],this.override&&delete Ko[n])}}class $s{constructor(){this.controllers=new qs(ws,"datasets",!0),this.elements=new qs(Hs,"elements"),this.plugins=new qs(Object,"plugins"),this.scales=new qs(Ws,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):k(e,e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)})})}_exec(t,e,n){const i=D(t);E(n["before"+i],[],n),e[t](n),E(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var js=new $s;class Us{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(o,t,e,n);return"afterDestroy"===e&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,i){i=i||{};for(const o of t){const t=o.plugin;if(!1===E(t[n],[e,i,o.options],t)&&i.cancelable)return!1}return!0}invalidate(){y(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=_(n.options&&n.options.plugins,{}),o=function(t){const e={},n=[],i=Object.keys(js.plugins.items);for(let t=0;t<i.length;t++)n.push(js.getPlugin(i[t]));const o=t.plugins||[];for(let t=0;t<o.length;t++){const i=o[t];-1===n.indexOf(i)&&(n.push(i),e[i.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,{plugins:e,localIds:n},i,o){const s=[],a=t.getContext();for(const r of e){const e=r.id,l=on(i[e],o);null!==l&&s.push({plugin:r,options:sn(t.config,{plugin:r,local:n[e]},l,a)})}return s}(t,o,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}const Ys=new Map,Xs=new Set,Zs=(t,e,n)=>{const i=T(e,n);void 0!==i&&t.add(i)};class Ks{constructor(t){this._config=function(t){return(t=t||{}).data=un(t.data),hn(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=un(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),hn(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return pn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return pn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return pn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return pn(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:o}=this,s=this._cachedScopes(t,n),a=s.get(e);if(a)return a;const r=new Set;e.forEach(e=>{t&&(r.add(t),e.forEach(e=>Zs(r,t,e))),e.forEach(t=>Zs(r,i,t)),e.forEach(t=>Zs(r,Ko[o]||{},t)),e.forEach(t=>Zs(r,Qo,t)),e.forEach(t=>Zs(r,Go,t))});const l=Array.from(r);return 0===l.length&&l.push(Object.create(null)),Xs.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ko[e]||{},Qo.datasets[e]||{},{type:e},Qo,Go]}resolveNamedOptions(t,e,n,i=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=gn(this._resolverCache,t,i);let r=s;(function(t,e){const{isScriptable:n,isIndexable:i}=At(t);for(const o of e){const e=n(o),s=i(o),a=(s||e)&&t[o];if(e&&(Eo(a)||Gs(a))||s&&b(a))return!0}return!1})(s,e)&&(o.$shared=!1,r=Lt(s,n=Eo(n)?n():n,this.createResolver(t,n,a)));for(const t of e)o[t]=r[t];return o}createResolver(t,e,n=[""],i){const{resolver:o}=gn(this._resolverCache,t,n);return x(e)?Lt(o,e,void 0,i):o}}const Gs=t=>x(t)&&Object.getOwnPropertyNames(t).some(e=>Eo(t[e])),Js=["top","bottom","left","right","chartArea"],Qs={},ta=t=>{const e=xn(t);return Object.values(Qs).filter(t=>t.canvas===e).pop()};let ea=class{static defaults=Qo;static instances=Qs;static overrides=Ko;static registry=js;static version="4.5.0";static getChart=ta;static register(...t){js.add(...t),wn()}static unregister(...t){js.remove(...t),wn()}constructor(t,e){const n=this.config=new Ks(e),i=xn(t),o=ta(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!qt()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?As:Fs}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),r=a&&a.canvas,l=r&&r.height,c=r&&r.width;this.id=xo(),this.ctx=a,this.canvas=r,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Us,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}(t=>this.update(t),s.resizeDelay||0),this._dataChanges=[],Qs[this.id]=this,a&&r?(gs.listen(this,"complete",yn),gs.listen(this,"progress",bn),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:o}=this;return y(t)?e&&o?o:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return js}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Xt(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ct(this.canvas,this.ctx),this}stop(){return gs.stop(this),this}resize(t,e){gs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Xt(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),E(n.onResize,[this,i],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){k(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let o=[];e&&(o=o.concat(Object.keys(e).map(t=>{const n=e[t],i=cn(t,n),o="r"===i,s="x"===i;return{options:n,dposition:o?"chartArea":s?"bottom":"left",dtype:o?"radialLinear":s?"category":"linear"}}))),k(o,e=>{const o=e.options,s=o.id,a=cn(s,o),r=_(o.type,e.dtype);void 0!==o.position&&fn(o.position,a)===fn(e.dposition)||(o.position=e.dposition),i[s]=!0;let l=null;s in n&&n[s].type===r?l=n[s]:(l=new(js.getScale(r))({id:s,type:r,ctx:this.ctx,chart:this}),n[l.id]=l),l.init(o,t)}),k(i,(t,e)=>{t||delete n[e]}),k(n,t=>{Is.configure(this,t,t.options),Is.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(mn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let o=this.getDatasetMeta(n);const s=i.type||this.config.type;if(o.type&&o.type!==s&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=s,o.indexAxis=i.indexAxis||an(s,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const e=js.getController(s),{datasetElementType:i,dataElementType:a}=Qo.datasets[s];Object.assign(e,{dataElementType:js.getElement(a),datasetElementType:i&&js.getElement(i)}),o.controller=new e(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){k(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===o.indexOf(e);e.buildOrUpdateElements(n),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||k(o,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(mn("z","_idx"));const{_active:a,_lastEvent:r}=this;r?this._eventHandler(r,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){k(this.scales,t=>{Is.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);ko(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of e)vn(t,i,"_removeElements"===n?-o:o)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),i=n(0);for(let t=1;t<e;t++)if(!ko(i,n(t)))return;return Array.from(i).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Is.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],k(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Eo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(gs.has(this)?this.attached&&!gs.running(this)&&gs.start(this):(this.draw(),yn({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];t&&!o.visible||n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=ce(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&pt(e,i),t.controller.draw(),i&&gt(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return ut(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const o=Ss.modes[e];return"function"==typeof o?o(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(t=>t&&t._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Pt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),s=o.controller._resolveAnimations(void 0,i);_o(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(o,{visible:n}),this.update(e=>e.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),gs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ct(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Qs[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};k(this.options.events,t=>n(t,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},o=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",s)};s=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():s()}unbindEvents(){k(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},k(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let o,s,a,r;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,r=t.length;a<r;++a){s=t[a];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}});!C(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const i=this.options.hover,o=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=o(e,t),a=n?t:o(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:o}=this,s=this._getActiveElements(t,i,n,e),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),r=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,E(o.onHover,[t,s,this],this),a&&E(o.onClick,[t,s,this],this));const l=!C(s,i);return(l||e)&&(this._active=s,this._updateHoverStyles(s,i,e)),this._lastEvent=r,l}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}};const na="function"==typeof Path2D;class ia extends Hs{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;!n.tension&&"monotone"!==n.cubicInterpolationMode||n.stepped||this._pointsUpdated||(Wt(this._points,n,t,n.spanGaps?this._loop:this._fullLoop,e),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,o=n.length;if(!o)return[];const s=!!t._loop,{start:a,end:r}=function(t,e,n,i){let o=0,s=e-1;if(n&&!i)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,n&&(s+=o);s>o&&t[s%e].skip;)s--;return s%=e,{start:o,end:s}}(n,o,s,i);return function(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){function o(t,e,i,o){const s=l?-1:1;if(t!==e){for(t+=c;n[t%c].skip;)t-=s;for(;n[e%c].skip;)e+=s;t%c!==e%c&&(d.push({start:t%c,end:e%c,loop:i,style:o}),h=o,u=e%c)}}const s=t._chart.getContext(),a=ae(t.options),{_datasetIndex:r,options:{spanGaps:l}}=t,c=n.length,d=[];let h=a,u=e[0].start,p=u;for(const t of e){u=l?u:t.start;let e,a=n[u%c];for(p=u+1;p<=t.end;p++){const l=n[p%c];e=ae(i.setContext(Pt(s,{type:"segment",p0:a,p1:l,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:r}))),re(e,h)&&o(u,p-1,t.loop,h),a=l,h=e}u<p-1&&o(u,p-1,t.loop,h)}return d}(t,e,n,i):e}(t,!0===i?[{start:a,end:r,loop:s}]:function(t,e,n,i){const o=t.length,s=[];let a,r=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%o];n.skip||n.stop?l.skip||(s.push({start:e%o,end:(a-1)%o,loop:i=!1}),e=r=n.stop?a:null):(r=a,l.skip&&(e=a)),l=n}return null!==r&&s.push({start:e%o,end:r%o,loop:i}),s}(n,a,r<a?r+o:r,!!t._fullLoop&&0===a&&r===o-1),n,e)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,e=t.length;return e&&this.points[t[e-1].end]}interpolate(t,e){const n=this.options,i=t[e],o=this.points,s=se(this,{property:e,start:i,end:i});if(!s.length)return;const a=[],r=function(t){return t.stepped?Gt:t.tension||"monotone"===t.cubicInterpolationMode?Jt:Kt}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],h=o[c],u=o[d];if(h===u){a.push(h);continue}const p=r(h,u,Math.abs((i-h[e])/(u[e]-h[e])),n.stepped);p[e]=t[e],a.push(p)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return In(this)(t,this,e,n)}path(t,e,n){const i=this.segments,o=In(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)s&=o(t,this,a,{start:e,end:e+n-1});return!!s}draw(t,e,n,i){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function(t,e,n,i){na&&!e.options.segment?function(t,e,n,i){let o=e._path;o||(o=e._path=new Path2D,e.path(o,n,i)&&o.closePath()),kn(t,e.options),t.stroke(o)}(t,e,n,i):function(t,e,n,i){const{segments:o,options:s}=e,a=In(e);for(const r of o)kn(t,s,r.style),t.beginPath(),a(t,e,r,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}var oa=Object.freeze({__proto__:null,ArcElement:class extends Hs{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:o,distance:s}=V(i,{x:t,y:e}),{startAngle:a,endAngle:r,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,u=_(d,r-a),p=j(o,a,r)&&a!==r,g=u>=Mo||p,f=Y(s,l+h,c+h);return g&&f}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:r,spacing:l}=this.options,c=(i+o)/2,d=(s+a+l+r)/2;return{x:e+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,o=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>Mo?Math.floor(n/Mo):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const r=i*(1-Math.sin(Math.min(Co,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,o){const{fullCircles:s,startAngle:a,circumference:r}=e;let l=e.endAngle;if(s){En(t,e,n,i,l,o);for(let e=0;e<s;++e)t.fill();isNaN(r)||(l=a+(r%Mo||Mo))}En(t,e,n,i,l,o),t.fill()}(t,this,r,o,s),function(t,e,n,i,o){const{fullCircles:s,startAngle:a,circumference:r,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:u,borderRadius:p}=l,g="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=u,g?(t.lineWidth=2*c,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let f=e.endAngle;if(s){En(t,e,n,i,f,o);for(let e=0;e<s;++e)t.stroke();isNaN(r)||(f=a+(r%Mo||Mo))}g&&function(t,e,n){const{startAngle:i,pixelMargin:o,x:s,y:a,outerRadius:r,innerRadius:l}=e;let c=o/r;t.beginPath(),t.arc(s,a,r,i-c,n+c),l>o?(c=o/l,t.arc(s,a,l,n+c,i-c,!0)):t.arc(s,a,o,n+Lo,i-Lo),t.closePath(),t.clip()}(t,e,f),l.selfJoin&&f-a>=Co&&0===p&&"miter"!==d&&function(t,e,n){const{startAngle:i,x:o,y:s,outerRadius:a,innerRadius:r,options:l}=e,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/a,$(i-n));if(t.beginPath(),t.arc(o,s,a-c/2,i+h/2,n-h/2),r>0){const e=Math.min(c/r,$(i-n));t.arc(o,s,r+c/2,n-e/2,i+e/2,!0)}else{const e=Math.min(c/2,a*$(i-n));if("round"===d)t.arc(o,s,e,n-Co/2,i+Co/2,!0);else if("bevel"===d){const a=2*e*e,r=-a*Math.cos(n+Co/2)+o,l=-a*Math.sin(n+Co/2)+s,c=a*Math.cos(i+Co/2)+o,d=a*Math.sin(i+Co/2)+s;t.lineTo(r,l),t.lineTo(c,d)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,f),s||(En(t,e,n,i,f,o),t.stroke())}(t,this,r,o,s),t.restore()}},BarElement:class extends Hs{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:s}=function(t){const e=An(t),n=e.right-e.left,i=e.bottom-e.top,o=function(t,e,n){const i=t.borderSkipped,o=Et(t.options.borderWidth);return{t:Tn(i.top,o.top,0,n),r:Tn(i.right,o.right,0,e),b:Tn(i.bottom,o.bottom,0,n),l:Tn(i.left,o.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,s=kt(o),a=Math.min(e,n),r=t.borderSkipped,l=i||x(o);return{topLeft:Tn(!l||r.top||r.left,s.topLeft,0,a),topRight:Tn(!l||r.top||r.right,s.topRight,0,a),bottomLeft:Tn(!l||r.bottom||r.left,s.bottomLeft,0,a),bottomRight:Tn(!l||r.bottom||r.right,s.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+o.l,y:e.top+o.t,w:n-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}(this),a=(r=s.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?vt:On;var r;t.save(),s.w===o.w&&s.h===o.h||(t.beginPath(),a(t,Rn(s,e,o)),t.clip(),a(t,Rn(o,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Rn(o,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Dn(this,t,e,n)}inXRange(t,e){return Dn(this,t,null,e)}inYRange(t,e){return Dn(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+i)/2:e,y:o?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:ia,PointElement:class extends Hs{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:o,y:s}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Ln(this,t,"x",e)}inYRange(t,e){return Ln(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!ut(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,dt(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const sa=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],aa=sa.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));var ra={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:o}=t.config,{elements:s}=o,a=Fn(i)||(r=o)&&(r.borderColor||r.backgroundColor)||s&&Fn(s)||"rgba(0,0,0,0.1)"!==Qo.borderColor||"rgba(0,0,0,0.1)"!==Qo.backgroundColor;var r;if(!n.forceOverride&&a)return;const l=function(t){let e=0;return(n,i)=>{const o=t.getDatasetMeta(i).controller;o instanceof _s?e=function(t,e){return t.backgroundColor=t.data.map(()=>Bn(e++)),e}(n,e):o instanceof Es?e=function(t,e){return t.backgroundColor=t.data.map(()=>zn(e++)),e}(n,e):o&&(e=function(t,e){return t.borderColor=Bn(e),t.backgroundColor=zn(e),++e}(n,e))}}(t);i.forEach(l)}},la={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void Nn(t);const i=t.width;t.data.datasets.forEach((e,o)=>{const{_data:s,indexAxis:a}=e,r=t.getDatasetMeta(o),l=s||e.data;if("y"===St([a,t.options.indexAxis]))return;if(!r.controller.supportsDecimation)return;const c=t.scales[r.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let d,{start:h,count:u}=function(t,e){const n=e.length;let i,o=0;const{iScale:s}=t,{min:a,max:r,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(o=U(Ro(e,s.axis,a).lo,0,n-1)),i=c?U(Ro(e,s.axis,r).hi+1,o,n)-o:n-o,{start:o,count:i}}(r,l);if(u<=(n.threshold||4*i))Hn(e);else{switch(y(s)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,i,o){const s=o.samples||i;if(s>=n)return t.slice(e,e+n);const a=[],r=(n-2)/(s-2);let l=0;const c=e+n-1;let d,h,u,p,g,f=e;for(a[l++]=t[f],d=0;d<s-2;d++){let i,o=0,s=0;const c=Math.floor((d+1)*r)+1+e,m=Math.min(Math.floor((d+2)*r)+1,n)+e,y=m-c;for(i=c;i<m;i++)o+=t[i].x,s+=t[i].y;o/=y,s/=y;const b=Math.floor(d*r)+1+e,x=Math.min(Math.floor((d+1)*r)+1,n)+e,{x:v,y:w}=t[f];for(u=p=-1,i=b;i<x;i++)p=.5*Math.abs((v-o)*(t[i].y-w)-(v-t[i].x)*(s-w)),p>u&&(u=p,h=t[i],g=i);a[l++]=h,f=g}return a[l++]=t[c],a}(l,h,u,i,n);break;case"min-max":d=function(t,e,n,i){let o,s,a,r,l,c,d,h,u,p,g=0,f=0;const m=[],b=t[e].x,x=t[e+n-1].x-b;for(o=e;o<e+n;++o){s=t[o],a=(s.x-b)/x*i,r=s.y;const e=0|a;if(e===l)r<u?(u=r,c=o):r>p&&(p=r,d=o),g=(f*g+s.x)/++f;else{const n=o-1;if(!y(c)&&!y(d)){const e=Math.min(c,d),i=Math.max(c,d);e!==h&&e!==n&&m.push({...t[e],x:g}),i!==h&&i!==n&&m.push({...t[i],x:g})}o>0&&n!==h&&m.push(t[n]),m.push(s),l=e,f=0,u=p=r,c=d=h=o}}return m}(l,h,u,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=d}})},destroy(t){Nn(t)}};class ca{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:o,radius:s}=this;return t.arc(i,o,s,(e=e||{start:0,end:Mo}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,o=t.angle;return{x:e+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}var da={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,o=[];let s,a,r,l;for(a=0;a<i;++a)s=t.getDatasetMeta(a),r=s.dataset,l=null,r&&r.options&&r instanceof ia&&(l={visible:t.isDatasetVisible(a),index:a,fill:Yn(r,a,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:r}),s.$filler=l,o.push(l);for(a=0;a<i;++a)l=o[a],l&&!1!==l.fill&&(l.fill=Un(o,a,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,o=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let e=o.length-1;e>=0;--e){const n=o[e].$filler;n&&(n.line.updateControlPoints(s,n.axis),i&&n.fill&&Kn(t.ctx,n,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;jn(n)&&Kn(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;jn(i)&&"beforeDatasetDraw"===n.drawTime&&Kn(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ha=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class ua extends Hs{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=E(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Mt(n.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:r}=ha(n,o);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,o,a,r)+10):(c=this.maxHeight,l=this._fitCols(s,i,a,r)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let d=t;o.textAlign="left",o.textBaseline="middle";let h=-1,u=-c;return this.legendItems.forEach((t,p)=>{const g=n+e/2+o.measureText(t.text).width;(0===p||l[l.length-1]+g+2*a>s)&&(d+=c,l[l.length-(p>0?0:1)]=0,u+=c,h++),r[p]={left:0,top:u,row:h,width:g,height:i},l[l.length-1]+=g+a}),d}_fitCols(t,e,n,i){const{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let d=a,h=0,u=0,p=0,g=0;return this.legendItems.forEach((t,s)=>{const{itemWidth:f,itemHeight:m}=function(t,e,n,i,o){const s=function(t,e,n,i){let o=t.text;return o&&"string"!=typeof o&&(o=o.reduce((t,e)=>t.length>e.length?t:e)),e+n.size/2+i.measureText(o).width}(i,t,e,n),a=function(t,e,n){let i=t;return"string"!=typeof e.text&&(i=ni(e,n)),i}(o,i,e.lineHeight);return{itemWidth:s,itemHeight:a}}(n,e,o,t,i);s>0&&u+m+2*a>c&&(d+=h+a,l.push({width:h,height:u}),p+=h+a,g++,h=u=0),r[s]={left:p,top:u,col:g,width:f,height:m},h=Math.max(h,f),u+=m+a}),d+=h,l.push({width:h,height:u}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:o}}=this,s=Qt(o,this.left,this.width);if(this.isHorizontal()){let o=0,a=No(n,this.left+i,this.right-this.lineWidths[o]);for(const r of e)o!==r.row&&(o=r.row,a=No(n,this.left+i,this.right-this.lineWidths[o])),r.top+=this.top+t+i,r.left=s.leftForLtr(s.x(a),r.width),a+=r.width+i}else{let o=0,a=No(n,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const r of e)r.col!==o&&(o=r.col,a=No(n,this.top+t+i,this.bottom-this.columnSizes[o].height)),r.top=a,r.left+=this.left+i,r.left=s.leftForLtr(s.x(r.left),r.width),a+=r.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;pt(t,this),this._draw(),gt(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:o,labels:s}=t,a=Qo.color,r=Qt(t.rtl,this.left,this.width),l=Mt(s.font),{padding:c}=s,d=l.size,h=d/2;let u;this.drawTitle(),i.textAlign=r.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:g,itemHeight:f}=ha(s,d),m=this.isHorizontal(),y=this._computeTitleHeight();u=m?{x:No(o,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:No(o,this.top+y+c,this.bottom-e[0].height),line:0},te(this.ctx,t.textDirection);const b=f+c;this.legendItems.forEach((x,v)=>{i.strokeStyle=x.fontColor,i.fillStyle=x.fontColor;const w=i.measureText(x.text).width,E=r.textAlign(x.textAlign||(x.textAlign=s.textAlign)),k=p+h+w;let C=u.x,M=u.y;r.setWidth(this.width),m?v>0&&C+k+c>this.right&&(M=u.y+=b,u.line++,C=u.x=No(o,this.left+c,this.right-n[u.line])):v>0&&M+b>this.bottom&&(C=u.x=C+e[u.line].width+c,u.line++,M=u.y=No(o,this.top+y+c,this.bottom-e[u.line].height)),function(t,e,n){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const o=_(n.lineWidth,1);if(i.fillStyle=_(n.fillStyle,a),i.lineCap=_(n.lineCap,"butt"),i.lineDashOffset=_(n.lineDashOffset,0),i.lineJoin=_(n.lineJoin,"miter"),i.lineWidth=o,i.strokeStyle=_(n.strokeStyle,a),i.setLineDash(_(n.lineDash,[])),s.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:o},l=r.xPlus(t,p/2);ht(i,a,l,e+h,s.pointStyleWidth&&p)}else{const s=e+Math.max((d-g)/2,0),a=r.leftForLtr(t,p),l=kt(n.borderRadius);i.beginPath(),Object.values(l).some(t=>0!==t)?vt(i,{x:a,y:s,w:p,h:g,radius:l}):i.rect(a,s,p,g),i.fill(),0!==o&&i.stroke()}i.restore()}(r.x(C),M,x),C=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(E,C+p+h,m?C+k:this.right,t.rtl),function(t,e,n){xt(i,n.text,t,e+f/2,l,{strikethrough:n.hidden,textAlign:r.textAlign(n.textAlign)})}(r.x(C),M,x),m?u.x+=k+c:u.y+="string"!=typeof x.text?ni(x,l.lineHeight)+c:b}),ee(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Mt(e.font),i=Ct(e.padding);if(!e.display)return;const o=Qt(t.rtl,this.left,this.width),s=this.ctx,a=e.position,r=i.top+n.size/2;let l,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),l=this.top+r,c=No(t.align,c,this.right-d);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);l=r+No(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=No(a,c,c+d);s.textAlign=o.textAlign(Ho(a)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,xt(s,e.text,h,l,n)}_computeTitleHeight(){const t=this.options.title,e=Mt(t.font),n=Ct(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,o;if(Y(t,this.left,this.right)&&Y(e,this.top,this.bottom))for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],Y(t,i.left,i.left+i.width)&&Y(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,a=(o=n,null!==(i=s)&&null!==o&&i.datasetIndex===o.datasetIndex&&i.index===o.index);s&&!a&&E(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!a&&E(e.onHover,[t,n,this],this)}else n&&E(e.onClick,[t,n,this],this);var i,o}}var pa={id:"legend",_element:ua,start(t,e,n){const i=t.legend=new ua({ctx:t.ctx,options:n,chart:t});Is.configure(t,i,n),Is.addBox(t,i)},stop(t){Is.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Is.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),e.hidden=!0):(o.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:s,useBorderRadius:a,borderRadius:r}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=Ct(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:o||l.textAlign,borderRadius:a&&(r||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ga extends Hs{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=b(n.text)?n.text.length:1;this._padding=Ct(n.padding);const o=i*Mt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:o,options:s}=this,a=s.align;let r,l,c,d=0;return this.isHorizontal()?(l=No(a,n,o),c=e+t,r=o-n):("left"===s.position?(l=n+t,c=No(a,i,e),d=-.5*Co):(l=o-t,c=No(a,e,i),d=.5*Co),r=i-e),{titleX:l,titleY:c,maxWidth:r,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Mt(e.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:s,maxWidth:a,rotation:r}=this._drawArgs(i);xt(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:r,textAlign:Ho(e.align),textBaseline:"middle",translation:[o,s]})}}var fa={id:"title",_element:ga,start(t,e,n){!function(t,e){const n=new ga({ctx:t.ctx,options:e,chart:t});Is.configure(t,n,e),Is.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){Is.removeBox(t,t.titleBlock),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Is.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ma=new WeakMap;var ya={id:"subtitle",start(t,e,n){const i=new ga({ctx:t.ctx,options:n,chart:t});Is.configure(t,i,n),Is.addBox(t,i),ma.set(t,i)},stop(t){Is.removeBox(t,ma.get(t)),ma.delete(t)},beforeUpdate(t,e,n){const i=ma.get(t);Is.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ba={average(t){if(!t.length)return!1;let e,n,i=new Set,o=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),o+=t.y,++s}}return 0!==s&&0!==i.size&&{x:[...i].reduce((t,e)=>t+e)/i.size,y:o/s}},nearest(t,e){if(!t.length)return!1;let n,i,o,s=e.x,a=e.y,r=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=W(e,i.getCenterPoint());t<r&&(r=t,o=i)}}if(o){const t=o.tooltipPosition();s=t.x,a=t.y}return{x:s,y:a}}},xa={beforeTitle:m,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:m,beforeBody:m,beforeLabel:m,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return y(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:m,afterBody:m,beforeFooter:m,footer:m,afterFooter:m};class va extends Hs{static positioners=ba;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,o=new bs(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Pt(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(t,e){const{callbacks:n}=e,i=pi(n,"beforeTitle",this,t),o=pi(n,"title",this,t),s=pi(n,"afterTitle",this,t);let a=[];return a=ii(a,oi(i)),a=ii(a,oi(o)),a=ii(a,oi(s)),a}getBeforeBody(t,e){return hi(pi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return k(t,t=>{const e={before:[],lines:[],after:[]},o=ui(n,t);ii(e.before,oi(pi(o,"beforeLabel",this,t))),ii(e.lines,pi(o,"label",this,t)),ii(e.after,oi(pi(o,"afterLabel",this,t))),i.push(e)}),i}getAfterBody(t,e){return hi(pi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=pi(n,"beforeFooter",this,t),o=pi(n,"footer",this,t),s=pi(n,"afterFooter",this,t);let a=[];return a=ii(a,oi(i)),a=ii(a,oi(o)),a=ii(a,oi(s)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],o=[],s=[];let a,r,l=[];for(a=0,r=e.length;a<r;++a)l.push(si(this.chart,e[a]));return t.filter&&(l=l.filter((e,i,o)=>t.filter(e,i,o,n))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,n))),k(l,e=>{const n=ui(t.callbacks,e);i.push(pi(n,"labelColor",this,e)),o.push(pi(n,"labelPointStyle",this,e)),s.push(pi(n,"labelTextColor",this,e))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let o,s=[];if(i.length){const t=ba[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=ai(this,n),a=Object.assign({},t,e),r=li(this.chart,n,a),l=ci(n,a,r,this.chart);this.xAlign=r.xAlign,this.yAlign=r.yAlign,o={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const o=this.getCaretPosition(t,n,i);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:o}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:r,topRight:l,bottomLeft:c,bottomRight:d}=kt(a),{x:h,y:u}=t,{width:p,height:g}=e;let f,m,y,b,x,v;return"center"===o?(x=u+g/2,"left"===i?(f=h,m=f-s,b=x+s,v=x-s):(f=h+p,m=f+s,b=x-s,v=x+s),y=f):(m="left"===i?h+Math.max(r,c)+s:"right"===i?h+p-Math.max(l,d)-s:this.caretX,"top"===o?(b=u,x=b-s,f=m-s,y=m+s):(b=u+g,x=b+s,f=m+s,y=m-s),v=b),{x1:f,x2:m,x3:y,y1:b,y2:x,y3:v}}drawTitle(t,e,n){const i=this.title,o=i.length;let s,a,r;if(o){const l=Qt(n.rtl,this.x,this.width);for(t.x=di(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=Mt(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,r=0;r<o;++r)e.fillText(i[r],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,r+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,o){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:r,boxWidth:l}=o,c=Mt(o.bodyFont),d=di(this,"left",o),h=i.x(d),u=e.y+(r<c.lineHeight?(c.lineHeight-r)/2:0);if(o.usePointStyle){const e={radius:Math.min(l,r)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=u+r/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,dt(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,dt(t,e,n,c)}else{t.lineWidth=x(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=kt(s.borderRadius);Object.values(a).some(t=>0!==t)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,vt(t,{x:e,y:u,w:l,h:r,radius:a}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),vt(t,{x:n,y:u+1,w:l-2,h:r-2,radius:a}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,u,l,r),t.strokeRect(e,u,l,r),t.fillStyle=s.backgroundColor,t.fillRect(n,u+1,l-2,r-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:o,bodyAlign:s,displayColors:a,boxHeight:r,boxWidth:l,boxPadding:c}=n,d=Mt(n.bodyFont);let h=d.lineHeight,u=0;const p=Qt(n.rtl,this.x,this.width),g=function(n){e.fillText(n,p.x(t.x+u),t.y+h/2),t.y+=h+o},f=p.textAlign(s);let m,y,b,x,v,w,_;for(e.textAlign=s,e.textBaseline="middle",e.font=d.string,t.x=di(this,f,n),e.fillStyle=n.bodyColor,k(this.beforeBody,g),u=a&&"right"!==f?"center"===s?l/2+c:l+2+c:0,x=0,w=i.length;x<w;++x){for(m=i[x],y=this.labelTextColors[x],e.fillStyle=y,k(m.before,g),b=m.lines,a&&b.length&&(this._drawColorBox(e,t,x,p,n),h=Math.max(d.lineHeight,r)),v=0,_=b.length;v<_;++v)g(b[v]),h=d.lineHeight;k(m.after,g)}u=0,h=d.lineHeight,k(this.afterBody,g),t.y-=o}drawFooter(t,e,n){const i=this.footer,o=i.length;let s,a;if(o){const r=Qt(n.rtl,this.x,this.width);for(t.x=di(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=r.textAlign(n.footerAlign),e.textBaseline="middle",s=Mt(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,a=0;a<o;++a)e.fillText(i[a],r.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:o,yAlign:s}=this,{x:a,y:r}=t,{width:l,height:c}=n,{topLeft:d,topRight:h,bottomLeft:u,bottomRight:p}=kt(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+d,r),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+l-h,r),e.quadraticCurveTo(a+l,r,a+l,r+h),"center"===s&&"right"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+l,r+c-p),e.quadraticCurveTo(a+l,r+c,a+l-p,r+c),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(a+u,r+c),e.quadraticCurveTo(a,r+c,a,r+c-u),"center"===s&&"left"===o&&this.drawCaret(t,e,n,i),e.lineTo(a,r+d),e.quadraticCurveTo(a,r,a+d,r),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const n=ba[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=ai(this,t),a=Object.assign({},n,this._size),r=li(e,t,a),l=ci(t,a,r,e);i._to===l.x&&o._to===l.y||(this.xAlign=r.xAlign,this.yAlign=r.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Ct(e.padding);e.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,e),te(t,e.textDirection),o.y+=s.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),ee(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),o=!C(n,i),s=this._positionChanged(i,e);(o||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],s=this._getActiveElements(t,o,e,n),a=this._positionChanged(s,t),r=e||!C(s,o)||a;return r&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),r}_getActiveElements(t,e,n,i){const o=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const s=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:o}=this,s=ba[o.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}var wa=Object.freeze({__proto__:null,Colors:ra,Decimation:la,Filler:da,Legend:pa,SubTitle:ya,Title:fa,Tooltip:{id:"tooltip",_element:va,positioners:ba,afterInit(t,e,n){n&&(t.tooltip=new va({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){t.tooltip&&t.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xa},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class _a extends Ws{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return y(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const s=t=>i=e?i:t,a=t=>o=n?o:t;if(t){const t=Oo(i),e=Oo(o);t<0&&e<0?a(0):t>0&&e>0&&s(0)}if(i===o){let e=0===o?1:Math.abs(.05*o);a(o+e),t||s(i-e)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=function(t,e){const n=[],{bounds:i,step:o,min:s,max:a,precision:r,count:l,maxTicks:c,maxDigits:d,includeBounds:h}=t,u=o||1,p=c-1,{min:g,max:f}=e,m=!y(s),b=!y(a),x=!y(l),v=(f-g)/(d+1);let w,_,E,k,C=R((f-g)/p/u)*u;if(C<1e-14&&!m&&!b)return[{value:g},{value:f}];k=Math.ceil(f/C)-Math.floor(g/C),k>p&&(C=R(k*C/p/u)*u),y(r)||(w=Math.pow(10,r),C=Math.ceil(C*w)/w),"ticks"===i?(_=Math.floor(g/C)*C,E=Math.ceil(f/C)*C):(_=g,E=f),m&&b&&o&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-s)/o,C/1e3)?(k=Math.round(Math.min((a-s)/C,c)),C=(a-s)/k,_=s,E=a):x?(_=m?s:_,E=b?a:E,k=l-1,C=(E-_)/k):(k=(E-_)/C,k=O(k,Math.round(k),C/1e3)?Math.round(k):Math.ceil(k));const M=Math.max(N(C),N(_));w=Math.pow(10,y(r)?M:r),_=Math.round(_*w)/w,E=Math.round(E*w)/w;let S=0;for(m&&(h&&_!==s?(n.push({value:s}),_<s&&S++,O(Math.round((_+S*C)*w)/w,s,fi(s,v,t))&&S++):_<s&&S++);S<k;++S){const t=Math.round((_+S*C)*w)/w;if(b&&t>a)break;n.push({value:t})}return b&&h&&E!==a?n.length&&O(n[n.length-1].value,a,fi(a,v,t))?n[n.length-1].value=a:n.push({value:a}):b&&E!==a||n.push({value:E}),n}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&z(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return it(t,this.chart.options.locale,this.options.ticks.format)}}const Ea=t=>Math.floor(Do(t)),ka=(t,e)=>Math.pow(10,Ea(t)+e),Ca={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ma=Object.keys(Ca);class Sa extends Ws{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new Ms(t.adapters.date);i.init(e),L(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Si(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){function t(t){a||isNaN(t.min)||(o=Math.min(o,t.min)),r||isNaN(t.max)||(s=Math.max(s,t.max))}const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:o,max:s,minDefined:a,maxDefined:r}=this.getUserBounds();a&&r||(t(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||t(this.getMinMax(!1))),o=v(o)&&!isNaN(o)?o:+n.startOf(Date.now(),i),s=v(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,s=function(t,e,n){let i=0,o=t.length;for(;i<o&&t[i]<e;)i++;for(;o>i&&t[o-1]>n;)o--;return i>0||o<t.length?t.slice(i,o):t}(i,o,this.max);return this._unit=e.unit||(n.autoSkip?Pi(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(t,e,n,i,o){for(let s=Ma.length-1;s>=Ma.indexOf(n);s--){const n=Ma[s];if(Ca[n].common&&t._adapter.diff(o,i,n)>=e-1)return n}return Ma[n?Ma.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Ma.indexOf(t)+1,n=Ma.length;e<n;++e)if(Ca[Ma[e]].common)return Ma[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&s.reverse(),Li(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,n,i=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),o=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;i=U(i,0,s),o=U(o,0,s),this._offsets={start:i,end:o,factor:1/(i+1+o)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,o=i.time,s=o.unit||Pi(o.minUnit,e,n,this._getLabelCapacity(e)),a=_(i.ticks.stepSize,1),r="week"===s&&o.isoWeekday,l=B(r)||!0===r,c={};let d,h,u=e;if(l&&(u=+t.startOf(u,"isoWeek",r)),u=+t.startOf(u,l?"day":s),t.diff(n,e,s)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+s);const p="data"===i.ticks.source&&this.getDataTimestamps();for(d=u,h=0;d<n;d=+t.add(d,a,s),h++)Ii(c,d,p);return d!==n&&"ticks"!==i.bounds&&1!==h||Ii(c,d,p),Object.keys(c).sort(Mi).map(t=>+t)}getLabelForValue(t){const e=this.options.time;return this._adapter.format(t,e.tooltipFormat?e.tooltipFormat:e.displayFormats.datetime)}format(t,e){return this._adapter.format(t,e||this.options.time.displayFormats[this._unit])}_tickFormatFunction(t,e,n,i){const o=this.options,s=o.ticks.callback;if(s)return E(s,[t,e,n],this);const a=o.time.displayFormats,r=this._unit,l=this._majorUnit,c=l&&a[l],d=n[e];return this._adapter.format(t,i||(l&&c&&d&&d.major?c:r&&a[r]))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=F(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*s,h:n*s+a*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,Li(this,[t],this._majorUnit),i),s=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Si(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return K(t.sort(Mi))}}var Pa=Object.freeze({__proto__:null,CategoryScale:class extends Ws{static id="category";static defaults={ticks:{callback:gi}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(y(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:U(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:function(t,e,n,i){const o=t.indexOf(e);return-1===o?((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i):o!==t.lastIndexOf(e)?n:o}(n,t,_(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=0===t&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){return gi.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:class extends _a{static id="linear";static defaults={ticks:{callback:Zo.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=v(t)?t:0,this.max=v(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=F(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},LogarithmicScale:class extends Ws{static id="logarithmic";static defaults={ticks:{callback:Zo.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=_a.prototype.parse.apply(this,[t,e]);if(0!==n)return v(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=v(t)?Math.max(0,t):null,this.max=v(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!v(this._userMin)&&(this.min=t===ka(this.min,0)?ka(this.min,-1):ka(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const o=e=>n=t?n:e,s=t=>i=e?i:t;n===i&&(n<=0?(o(1),s(10)):(o(ka(n,-1)),s(ka(i,1)))),n<=0&&o(ka(i,-1)),i<=0&&s(ka(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,{min:e,max:n}){e=w(t.min,e);const i=[],o=Ea(e);let s=function(t,e){let n=Ea(e-t);for(;yi(t,e,n)>10;)n++;for(;yi(t,e,n)<10;)n--;return Math.min(n,Ea(t))}(e,n),a=s<0?Math.pow(10,Math.abs(s)):1;const r=Math.pow(10,s),l=o>s?Math.pow(10,o):0,c=Math.round((e-l)*a)/a,d=Math.floor((e-l)/r/10)*r*10;let h=Math.floor((c-d)/Math.pow(10,s)),u=w(t.min,Math.round((l+d+h*Math.pow(10,s))*a)/a);for(;u<n;)i.push({value:u,major:mi(u),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,a=s>=0?1:a),u=Math.round((l+d+h*Math.pow(10,s))*a)/a;const p=w(t.max,u);return i.push({value:p,major:mi(p),significand:h}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&z(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":it(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Do(t),this._valueRange=Do(this.max)-Do(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Do(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}},RadialLinearScale:class extends _a{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Zo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ct(bi(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=v(t)&&!isNaN(t)?t:0,this.max=v(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/bi(this.options))}generateTickLabels(t){_a.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=E(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],o=[],s=t._pointLabels.length,a=t.options.pointLabels,r=a.centerPointLabels?Co/s:0;for(let l=0;l<s;l++){const s=a.setContext(t.getPointLabelContext(l));o[l]=s.padding;const c=t.getPointPosition(l,t.drawingArea+o[l],r),d=Mt(s.font),h=xi(t.ctx,d,t._pointLabels[l]);i[l]=h;const u=$(t.getIndexAngle(l)+r),p=Math.round(H(u));wi(n,e,u,vi(p,c.x,h.w,0,180),vi(p,c.y,h.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],o=t._pointLabels.length,s=t.options,{centerPointLabels:a,display:r}=s.pointLabels,l={extra:bi(s)/2,additionalAngle:a?Co/o:0};let c;for(let s=0;s<o;s++){l.padding=n[s],l.size=e[s];const o=_i(t,s,l);i.push(o),"auto"===r&&(o.visible=Ei(o,c),o.visible&&(c=o))}return i}(t,i,o)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return $(t*(Mo/(this._pointLabels.length||1))+F(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(y(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(y(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Pt(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-Lo+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:o}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Ci(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:o}=e,s=this._pointLabels.length;let a,r,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let o=e-1;o>=0;o--){const e=t._pointLabelItems[o];if(!e.visible)continue;const s=i.setContext(t.getPointLabelContext(o));ki(n,s,e);const a=Mt(s.font),{x:r,y:l,textAlign:c}=e;xt(n,t._pointLabels[o],r,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){r=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=i.setContext(n),l=o.setContext(n);!function(t,e,n,i,o){const s=t.ctx,a=e.circular,{color:r,lineWidth:l}=e;!a&&!i||!r||!l||n<0||(s.save(),s.strokeStyle=r,s.lineWidth=l,s.setLineDash(o.dash||[]),s.lineDashOffset=o.dashOffset,s.beginPath(),Ci(t,n,a,i),s.closePath(),s.stroke(),s.restore())}(this,a,r,s,l)}}),n.display){for(t.save(),a=s-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:o,lineWidth:s}=i;s&&o&&(t.lineWidth=s,t.strokeStyle=o,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,r=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,r),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((i,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const r=n.setContext(this.getContext(a)),l=Mt(r.font);if(o=this.getDistanceFromCenterForValue(this.ticks[a].value),r.showLabelBackdrop){t.font=l.string,s=t.measureText(i.label).width,t.fillStyle=r.backdropColor;const e=Ct(r.backdropPadding);t.fillRect(-s/2-e.left,-o-l.size/2-e.top,s+e.width,l.size+e.height)}xt(t,i.label,0,-o,l,{color:r.color,strokeColor:r.textStrokeColor,strokeWidth:r.textStrokeWidth})}),t.restore()}drawTitle(){}},TimeScale:Sa,TimeSeriesScale:class extends Sa{static id="timeseries";static defaults=Sa.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ai(e,this.min),this._tableRange=Ai(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],o=[];let s,a,r,l,c;for(s=0,a=t.length;s<a;++s)l=t[s],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],r=i[s-1],l=i[s],Math.round((c+r)/2)!==l&&o.push({time:l,pos:s/(a-1)});return o}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ai(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ai(this._table,n*this._tableRange+this._minPos,!0)}}});ea.register(ks,oa,wa,Pa),window.DOMBatch=function(){function t(t){a.push(t),n()}function e(t){r.push(t),n()}function n(){l||(l=!0,requestAnimationFrame(i))}function i(){a.splice(0,a.length).forEach(t=>t()),r.splice(0,r.length).forEach(t=>t()),l=!1,(a.length||r.length)&&n()}function o(t,n,i=!1,o=50){i?t.forEach((t,i)=>{setTimeout(()=>{e(()=>n(t,i))},i*o)}):e(()=>{t.forEach(n)})}function s(n,i=!0,s=40,a=300){e(()=>{n.forEach(t=>{t.style.opacity="0",t.style.transform="translateY(15px)",t.style.transition=`opacity ${a}ms ease-out, transform ${a}ms ease-out`})}),t(()=>{document}),o(n,(t,e)=>{t.style.opacity="1",t.style.transform="translateY(0)"},i,s)}const a=[],r=[];let l=!1;return{read:t,write:e,updateElements:o,animateFadeIn:s,applyTransition:function(t,n,i={}){const{duration:s=300,easing:a="ease",staggered:r=!1,staggerDelay:l=40}=i,c=Object.keys(n).join(",");e(()=>{t.forEach(t=>{t.style.transition=`${c} ${s}ms ${a}`})}),o(t,(t,e)=>{Object.entries(n).forEach(([e,n])=>{t.style[e]=n})},r,l)},optimizeTableRendering:function(t,n=20){if(!t)return;const i=t.querySelector("table");if(!i)return;const o=Array.from(i.querySelectorAll("tbody tr"));if(o.length<=n)return;e(()=>{o.forEach((t,e)=>{e>=n&&(t.style.display="none")})});const a=document.createElement("button");a.textContent=`Show ${Math.min(20,o.length-n)} More Rows`,a.style.cssText="\n        padding: 8px 16px;\n        margin: 10px auto;\n        display: block;\n        background-color: #7adfbb;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        font-weight: bold;\n      ",e(()=>{t.appendChild(a)});let r=n;a.addEventListener("click",()=>{const t=o.slice(r,r+20);r+=t.length,e(()=>{t.forEach(t=>{t.style.display="table-row",t.style.opacity="0"})}),s(t),r>=o.length?a.style.display="none":a.textContent=`Show ${Math.min(20,o.length-r)} More Rows`})}}}(),document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("spreadsheet-container");t&&DOMBatch.optimizeTableRendering(t);const e=document.addEventListener;document.addEventListener=function(t,n,i){return e.call(this,t,"formDictionaryChanged"===t?function(t){requestAnimationFrame(()=>{document.body.style.willChange="transform",n.call(this,t),setTimeout(()=>{document.body.style.willChange="auto"},1e3)})}:n,i)}}),document.addEventListener("DOMContentLoaded",function(){function t(t,e){const n=document.getElementById(t);n&&Object.keys(e).forEach(t=>{n.querySelector(`#${t}`)&&function(t,e){const n=document.querySelector(`label[for="${t}"]`);if(!n||n.querySelector(".info-icon"))return;const i=document.createElement("span");i.className="info-icon",i.innerHTML="&#9432;",i.style.cssText="color: #a4a4a4; margin-left: 5px; cursor: pointer;",i.dataset.tooltip=e[t],i.addEventListener("mouseover",t=>{const e=document.createElement("div");e.className="tooltip",e.textContent=t.target.dataset.tooltip,document.body.appendChild(e);const n=t.target.getBoundingClientRect();e.style.left=`${n.left+window.scrollX+20}px`,e.style.top=`${n.top+window.scrollY}px`}),i.addEventListener("mouseout",()=>{document.querySelector(".tooltip").remove()}),n.appendChild(i)}(t,e)})}function e(t,e,n){let i=e;switch(n){case"currency":i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);break;case"percent":i=`${e.toFixed(2)}%`;break;case"number":i=new Intl.NumberFormat("en-US").format(e)}const o=document.getElementById(t);o&&("radio"===o.type?o.checked=o.value==e:(o.value=i,o.style.cssText="color: #7adfbb; font-weight: bold;"))}function n(t){const n=t.target;let i=parseFloat(n.value.replace(/[^\d.-]/g,""))||0;e(n.id,i,n.dataset.format),n.style.cssText="color: black; font-weight: bold;"}function i(t){Object.keys(t).forEach(n=>{const i=document.getElementById(n)?.dataset.format;e(n,t[n],i)})}if("undefined"==typeof defaultValuesBasic||"undefined"==typeof defaultValuesAdvanced||"undefined"==typeof tooltipsBasic||"undefined"==typeof tooltipsAdvanced)return void console.error("Defaults not loaded");document.querySelectorAll('input[type="number"], input[type="text"]').forEach(t=>{const e=t.dataset.format;t.style.cssText="color: #7adfbb; font-weight: bold;",t.addEventListener("focus",function(){"currency"===e?this.value=`$${this.value.replace(/[^0-9.]/g,"")}`:"percent"===e&&(this.value=`${this.value.replace(/[^0-9.]/g,"")}%`)}),t.addEventListener("blur",n),t.addEventListener("input",function(){parseFloat(this.value.replace(/[^\d.-]/g,""))<0&&(this.value=this.value.replace(/[^0-9.]/g,""))})}),document.querySelectorAll('.collapsible input[type="checkbox"]').forEach(t=>{const e=t.nextElementSibling.nextElementSibling,n=t.nextElementSibling.querySelector(".collapsible-icon");var i;e.style.display=(i=t.checked)?"block":"none",e.style.opacity=i?1:0,n.textContent=i?"-":"+",n.style.fontSize=i?"24px":"16px",t.addEventListener("change",function(){this.checked?(e.style.display="block",e.style.opacity=0,setTimeout(()=>{e.style.opacity=1,e.style.transition="opacity 0.5s ease-in-out"},10)):(e.style.opacity=0,e.style.transition="opacity 0.5s ease-in-out",setTimeout(()=>{e.style.display="none"},500)),n.textContent=this.checked?"-":"+",n.style.fontSize=this.checked?"24px":"16px"})});const o=document.getElementById("toggle-switch"),s=document.getElementById("basic-form"),a=document.getElementById("advanced-form");o.addEventListener("change",function(){const e=this.checked?s:a,n=this.checked?a:s,o=this.checked?defaultValuesAdvanced:defaultValuesBasic,r=this.checked?tooltipsAdvanced:tooltipsBasic;e.classList.remove("active"),e.style.opacity=0,e.addEventListener("transitionend",function s(){e.style.display="none",e.removeEventListener("transitionend",s),n.style.display="block",n.classList.add("active"),setTimeout(()=>{n.style.opacity=1,n.style.transition="opacity 0.5s ease-in-out",i(o),t(n.id,r)},10)})}),i(defaultValuesBasic),t("basic-form",tooltipsBasic),"undefined"!=typeof Chart?Ti():(console.error("Chart.js not loaded yet, charts will not be initialized"),setTimeout(function(){"undefined"!=typeof Chart?(console.log("Chart.js loaded after delay, initializing charts now"),Ti()):console.error("Chart.js still not loaded after delay")},1e3))}),document.addEventListener("DOMContentLoaded",function(){document.getElementById("im-term-30").checked=!0}),document.addEventListener("DOMContentLoaded",function(){function t(t){t&&(t.style.display="block",t.style.opacity=0,t.style.transition="opacity 0.5s ease-in-out",t.style.opacity=1,console.log(`Fading in element: ${t.id}`))}function e(t){t&&(t.style.opacity=1,t.style.transition="opacity 0.5s ease-in-out",t.style.opacity=0,setTimeout(function(){t.style.display="none"},500),console.log(`Fading out element: ${t.id}`))}function n(){const t=[{name:"HEL Yes",element:i},{name:"HEL No",element:o},{name:"HEL Options",element:s},{name:"HEL Extra Yes",element:a},{name:"HEL Extra No",element:r},{name:"HEL Extra Options",element:l},{name:"IM Extra Yes",element:c},{name:"IM Extra No",element:d},{name:"IM Extra Options",element:h},{name:"Refinance Yes",element:u},{name:"Refinance No",element:p},{name:"Refinance Options",element:g},{name:"RM Extra Yes",element:f},{name:"RM Extra No",element:m},{name:"RM Extra Options",element:y}];console.log("Advanced Form Elements Status:"),t.forEach(t=>{t.element?(console.log(`${t.name}: Found`),"radio"===t.element.type&&console.log(`  - Checked: ${t.element.checked}`),t.name.includes("Options")&&(console.log(`  - Display: ${window.getComputedStyle(t.element).display}`),console.log(`  - Opacity: ${window.getComputedStyle(t.element).opacity}`))):console.log(`${t.name}: Not Found`)})}console.log("Advanced form JS loaded with animations");const i=document.getElementById("use-hel-yes"),o=document.getElementById("use-hel-no"),s=document.getElementById("hel-options");i&&o&&s?(console.log("HEL elements found, setting up event handlers"),i.checked?(s.style.display="block",s.style.opacity=1):(s.style.display="none",s.style.opacity=0),i.addEventListener("click",function(){t(s)}),o.addEventListener("click",function(){e(s)})):console.log("HEL elements not found:",{useHelYes:!!i,useHelNo:!!o,helOptions:!!s});const a=document.getElementById("hel-extra-payments-yes"),r=document.getElementById("hel-extra-payments-no"),l=document.getElementById("hel-extra-payment-options");a&&r&&l&&(a.checked?(l.style.display="block",l.style.opacity=1):(l.style.display="none",l.style.opacity=0),a.addEventListener("click",function(){t(l)}),r.addEventListener("click",function(){e(l)}));const c=document.getElementById("im-extra-payments-yes"),d=document.getElementById("im-extra-payments-no"),h=document.getElementById("im-extra-payment-options");c&&d&&h&&(c.checked?(h.style.display="block",h.style.opacity=1):(h.style.display="none",h.style.opacity=0),c.addEventListener("click",function(){t(h)}),d.addEventListener("click",function(){e(h)}));const u=document.getElementById("refinance-mortgage-yes"),p=document.getElementById("refinance-mortgage-no"),g=document.getElementById("rm-options");u&&p&&g&&(u.checked?(g.style.display="block",g.style.opacity=1):(g.style.display="none",g.style.opacity=0),u.addEventListener("click",function(){t(g)}),p.addEventListener("click",function(){e(g)}));const f=document.getElementById("rm-extra-payments-yes"),m=document.getElementById("rm-extra-payments-no"),y=document.getElementById("rm-extra-payment-options");f&&m&&y&&(f.checked?(y.style.display="block",y.style.opacity=1):(y.style.display="none",y.style.opacity=0),f.addEventListener("click",function(){t(y)}),m.addEventListener("click",function(){e(y)})),setTimeout(n,1e3);const b=document.getElementById("toggle-switch");b&&b.addEventListener("change",function(){console.log("Toggle switch changed to: "+(this.checked?"Advanced":"Basic")),setTimeout(n,500)})}),document.addEventListener("DOMContentLoaded",function(){function t(t,e,n){let i=e;switch(n){case"currency":i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);break;case"percent":i=e.toFixed(0)+"%";break;case"number":i=new Intl.NumberFormat("en-US").format(e)}const o=document.getElementById(t);o.value=i,o.style.color="#7adfbb",o.style.fontWeight="bold"}function e(e){let n=e.target,i=parseFloat(n.value.replace(/[^\d.-]/g,"")),o=n.getAttribute("data-format");(isNaN(i)||i<0)&&(i=0),t(n.id,i,o),n.style.color="black",n.style.fontWeight="bold"}var n={"purchase-price":"The total price at which the property is being purchased.","closing-costs":"Additional costs incurred during the closing of the property purchase.","investment-years":"The number of years you plan to hold the investment.","home-growth-rate":"The expected annual growth rate of the property's value.","down-payment-percent":"The percentage of the purchase price paid upfront.","mortgage-rate":"The annual interest rate on the mortgage loan.","monthly-rent":"The expected monthly rental income from the property.","annual-rent-increase":"The expected annual increase in rent.","annual-insurance":"The annual cost of insuring the property.","annual-hoa":"The annual cost of homeowners association fees.","annual-property-tax":"The annual property tax rate.","annual-maintenance":"The annual cost of maintaining the property.","cpi-assumption":"The expected annual increase in consumer price index.","management-fee":"The percentage of rental income paid for property management services."};Object.keys(n).forEach(function(t){var e=document.querySelector(`label[for="${t}"]`);if(e){var i=document.createElement("span");i.className="info-icon",i.innerHTML="&#9432;",i.style.color="#a4a4a4",i.style.marginLeft="5px",i.style.cursor="pointer",i.setAttribute("data-tooltip",n[t]),i.addEventListener("mouseover",function(t){var e=document.createElement("div");e.className="tooltip",e.textContent=t.target.getAttribute("data-tooltip"),document.body.appendChild(e);var n=t.target.getBoundingClientRect();e.style.left=`${n.left+window.scrollX+20}px`,e.style.top=`${n.top+window.scrollY}px`}),i.addEventListener("mouseout",function(){var t=document.querySelector(".tooltip");t&&t.remove()}),e.appendChild(i)}}),t("purchase-price",5e5,"currency"),t("closing-costs",5e3,"currency"),t("investment-years",20,"number"),t("home-growth-rate",4,"percent"),t("down-payment-percent",25,"percent"),t("mortgage-rate",6,"percent"),t("monthly-rent",4500,"currency"),t("annual-rent-increase",2,"percent"),t("annual-insurance",2e3,"currency"),t("annual-hoa",1500,"currency"),t("annual-property-tax",2.25,"percent"),t("annual-maintenance",1e3,"currency"),t("cpi-assumption",2,"percent"),t("management-fee",10,"percent"),document.querySelectorAll('input[type="number"], input[type="text"]').forEach(t=>{let n=t.getAttribute("data-format");t.style.color="#7adfbb",t.style.fontWeight="bold",t.addEventListener("focus",function(){"currency"===n?this.value="$"+this.value.replace(/[^0-9.]/g,""):"percent"===n&&(this.value=this.value.replace(/[^0-9.]/g,"")+"%")}),t.addEventListener("blur",e),t.addEventListener("input",function(){parseFloat(this.value.replace(/[^\d.-]/g,""))<0&&(this.value=this.value.replace(/[^0-9.]/g,""))})}),document.querySelectorAll('.collapsible input[type="checkbox"]').forEach(function(t){var e=t.nextElementSibling.nextElementSibling,n=t.nextElementSibling.querySelector(".collapsible-icon");t.checked?(e.style.display="block",e.style.opacity=1,n.textContent="-",n.style.fontSize="24px"):(e.style.display="none",e.style.opacity=0,n.textContent="+",n.style.fontSize="16px"),t.addEventListener("change",function(){this.checked?(e.style.display="block",e.style.opacity=0,setTimeout(function(){e.style.opacity=1,e.style.transition="opacity 0.5s ease-in-out"},10),n.textContent="-",n.style.fontSize="24px"):(e.style.opacity=0,e.style.transition="opacity 0.5s ease-in-out",setTimeout(function(){e.style.display="none"},500),n.textContent="+",n.style.fontSize="16px")})});var i=document.getElementById("toggle-switch"),o=document.getElementById("basic-form"),s=document.getElementById("advanced-form");i.addEventListener("change",function(){this.checked?(o.style.opacity=0,o.addEventListener("transitionend",function t(){o.style.display="none",o.removeEventListener("transitionend",t),s.style.display="block",setTimeout(function(){s.style.opacity=1,s.style.transition="opacity 0.5s ease-in-out"},10)})):(s.style.opacity=0,s.addEventListener("transitionend",function t(){s.style.display="none",s.removeEventListener("transitionend",t),o.style.display="block",setTimeout(function(){o.style.opacity=1,o.style.transition="opacity 0.5s ease-in-out"},10)}))})}),console.log("JavaScript is loaded and running evaluate"),document.addEventListener("DOMContentLoaded",function(){function t(t){var e=document.getElementById(t);return e&&e.querySelectorAll("input, select, textarea").forEach(function(t){let e=t.value,n=t.id.replace("-advanced","");"radio"===t.type?t.checked&&(formDictionary[t.name.replace("-advanced","")]="yes"==t.value?1:"no"==t.value?0:parseFloat(t.value)):"text"===t.type||"number"===t.type?n in formDictionary&&("currency"===t.getAttribute("data-format")?formDictionary[n]=parseFloat(e.replace(/[^\d.-]/g,""))||0:"percent"===t.getAttribute("data-format")?formDictionary[n]=(parseFloat(e.replace(/[^\d.-]/g,""))||0)/100:formDictionary[n]=parseFloat(e.replace(/[^\d.-]/g,""))||0):"checkbox"===t.type&&t.checked&&(n=t.id.replace("-advanced",""),n in formDictionary&&(formDictionary[n]=1))}),formDictionary}function e(){Object.keys(formDictionary).forEach(t=>formDictionary[t]=0),document.getElementById("toggle-switch").checked?t("advanced-form"):t("basic-form"),function(t){const e=new CustomEvent("formDictionaryChanged",{detail:t});document.dispatchEvent(e)}(formDictionary)}if("undefined"!=typeof keysArray&&"undefined"!=typeof defaultValuesAdvanced){window.formDictionary=function(){let t={};return keysArray.forEach(e=>{t[e]=0}),t}();var n=document.getElementById("toggle-switch");n.addEventListener("change",function(){n.checked&&Object.keys(defaultValuesAdvanced).forEach(t=>{if(t.replace("-advanced","")in formDictionary){let e=document.getElementById(t);e&&("text"===e.type||"number"===e.type?e.value=defaultValuesAdvanced[t]:"radio"!==e.type&&"checkbox"!==e.type||defaultValuesAdvanced[t]==e.value&&(e.checked=!0))}}),setTimeout(e,0)}),document.querySelectorAll('input[type="text"], input[type="number"], input[type="radio"], select, textarea').forEach(function(t){t.addEventListener("change",e)}),e()}else console.error("Keys array or default values not loaded")}),document.addEventListener("DOMContentLoaded",function(){document.addEventListener("formDictionaryChanged",function(n){window.sourcesAndUses=Oi(),e=Fi(t),window.debtService=zi(e,t),window.financialOutputs=Hi(e,t,debtService),console.log(financialOutputs)});const t=window.formDictionary;window.sourcesAndUses=Oi();let e=Fi(t);window.debtService=zi(e,t),window.financialOutputs=Hi(e,t,debtService),console.log(financialOutputs)}),document.addEventListener("DOMContentLoaded",function(){if(console.log("Sources-uses-chart.js loaded"),setTimeout(Vi,500),"undefined"==typeof Chart)return void console.error("Chart.js not loaded yet!");const t=document.getElementById("sourcesUsesChart");if(!t)return void console.error("Cannot find #sourcesUsesChart canvas element");const e=Chart.getChart(t);e&&(console.log("Destroying existing chart instance"),e.destroy()),window.pauseChartUpdates=!1,window.isToggling=!1;const n=t.getContext("2d"),i={labels:["Sources","Uses"],datasets:[{label:"Equity",barPercentage:.9,backgroundColor:"rgba(122, 223, 187, 0.6)",borderColor:"rgba(122, 223, 187, 1)",data:[0,0]},{label:"HEL",barPercentage:.9,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",data:[0,0]},{label:"Initial Mortgage",barPercentage:.9,backgroundColor:"rgba(255, 206, 86, 0.6)",borderColor:"rgba(255, 206, 86, 1)",data:[0,0]},{label:"Purchase Price",barPercentage:.9,backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",data:[0,0]},{label:"Closing Costs",barPercentage:.9,backgroundColor:"rgba(252, 139, 86, 0.6)",borderColor:"rgba(252, 139, 86, 1)",data:[0,0]},{label:"Loan Fees",barPercentage:.9,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",data:[0,0]}]},o={maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(t){let e=t.dataset.label||"";return e&&(e+=": "),e+="$"+(t.raw.toLocaleString?t.raw.toLocaleString():t.raw),e}}}},scales:{y:{beginAtZero:!0,stacked:!0,ticks:{callback:function(t){return t>=1e6?"$"+t/1e6+"m":t>=1e3?"$"+t/1e3+"k":"$"+t.toLocaleString()},maxTicksLimit:10,precision:0}},x:{stacked:!0,ticks:{font:{weight:"bold"}}}}},s={id:"totalLabels",afterDraw:t=>{const e=t.ctx,n=t.totalSources||0,i=t.totalUses||0;if(0===n&&0===i)return;e.font="bold 14px Arial",e.textAlign="center",e.fillStyle="#000";const o=t.getDatasetMeta(0),s=t.getDatasetMeta(3);if(o.data.length>0&&s.data.length>0){const a=o.data[0].x,r=s.data[1].x;let l=1/0;[0,1,2].forEach(e=>{const n=t.getDatasetMeta(e);n.data[0]._model&&n.data[0]._model.y<l&&t.data.datasets[e].data[0]>0?l=n.data[0]._model.y:n.data[0]&&n.data[0].y<l&&t.data.datasets[e].data[0]>0&&(l=n.data[0].y)});let c=1/0;[3,4,5].forEach(e=>{const n=t.getDatasetMeta(e);n.data[1]._model&&n.data[1]._model.y<c&&t.data.datasets[e].data[1]>0?c=n.data[1]._model.y:n.data[1]&&n.data[1].y<c&&t.data.datasets[e].data[1]>0&&(c=n.data[1].y)}),l===1/0&&(l=t.chartArea.top+20),c===1/0&&(c=t.chartArea.top+20);const d=Ni(n),h=Ni(i);n>0&&e.fillText(d,a,l-10),i>0&&e.fillText(h,r,c-10)}}};try{console.log("Creating sources-uses chart"),document.getElementById("table-container")&&(t.style.height="350px");let a=new Chart(n,{type:"bar",data:i,options:o,plugins:[s]});console.log("Chart created successfully"),a.totalSources=0,a.totalUses=0,window.sourcesUsesChart=a;const r={};i.datasets.forEach((t,e)=>{r[e]={currentScale:1}});let l=null;function c(t){function e(t,e,n,i=!1){const o=document.createElement("tr"),s=document.createElement("td");if(s.style.textAlign="left",n){const e=document.createElement("div");e.className="oval",e.textContent=t,e.style.backgroundColor=n,s.appendChild(e)}else s.textContent=t;const a=document.createElement("td");return a.textContent=Ni(e),a.style.textAlign="right",a.style.whiteSpace="nowrap",i&&(o.style.fontWeight="bold",o.style.borderTop="4px solid black"),o.appendChild(s),o.appendChild(a),o}const n=document.getElementById("table-container");if(!n)return;n.innerHTML="";const i=document.createElement("div");i.style.cssText="width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch;";const o=document.createElement("table");o.className="summary-table";const s=calculateSourcesAndUses(window.formDictionary);o.appendChild(e("Equity",s.equity,"rgba(122, 223, 187, 0.6)")),t&&s.hel>0&&o.appendChild(e("HEL",s.hel,"rgba(54, 162, 235, 0.6)")),o.appendChild(e("Initial Mortgage",s.initialMortgage,"rgba(255, 206, 86, 0.6)")),o.appendChild(e("Total Sources",s.totalSources,null,!0));const a=document.createElement("tr");a.innerHTML='<td colspan="2">&nbsp;</td>',o.appendChild(a),o.appendChild(e("Purchase Price",s.purchasePrice,"rgba(153, 102, 255, 0.6)")),o.appendChild(e("Closing Costs",s.closingCosts,"rgba(252, 139, 86, 0.6)")),t&&s.closingLoanCosts>0&&o.appendChild(e("Loan Fees",s.closingLoanCosts,"rgba(255, 99, 132, 0.6)")),o.appendChild(e("Total Uses",s.totalUses,null,!0)),i.appendChild(o),n.appendChild(i)}function d(){const t=Date.now();if(d.lastCall&&t-d.lastCall<100)return;d.lastCall=t;const e=document.getElementById("sourcesUsesChart"),n=document.getElementById("table-container"),i=document.getElementById("charts-container"),o=document.getElementById("sourcesUsesChart-wrapper"),s=document.querySelector("#sourcesUsesChart-wrapper .chart-content");if(!e||!n||!i)return void console.warn("Missing elements for height synchronization");const a=n.querySelector("table");if(!a)return void console.warn("Table not found in container");const r=i.offsetHeight,l=a.offsetHeight,c=Math.abs(r-l);c>50&&!window.isToggling?(e.style.opacity="0",e.style.transition="opacity 0.2s ease-out",setTimeout(()=>{if(i.style.height=l+"px",e.style.height=l+"px",o&&(o.style.minHeight=l+80+"px"),s&&(s.style.minHeight=l+"px"),window.sourcesUsesChart)try{window.sourcesUsesChart.resize(),window.sourcesUsesChart.update("none")}catch(t){console.error("Error resizing chart:",t)}setTimeout(()=>{e.style.opacity="1",e.style.transition="opacity 0.3s ease-in"},50)},200)):(i.style.transition="height 0.3s ease-in-out",e.style.transition="height 0.3s ease-in-out",i.style.height=l+"px",e.style.height=l+"px",o&&(o.style.minHeight=l+80+"px"),s&&(s.style.minHeight=l+"px"),setTimeout(()=>{if(window.sourcesUsesChart)try{window.sourcesUsesChart.resize()}catch(t){console.error("Error resizing chart:",t)}},150)),console.log(`Chart height adjusted: ${r}px  ${l}px (diff: ${c}px)`)}function h(t,e=1.1,n=200){const i=a.data.datasets[t],o=i.barPercentage||.9,s=.9*e,r=performance.now();requestAnimationFrame(function t(e){const l=Math.min((e-r)/n,1);i.barPercentage=o+(s-o)*l,a.update("none"),l<1&&requestAnimationFrame(t)})}function u(t,e=200){h(t,1,e)}function p(t){document.querySelectorAll("#table-container .oval").forEach(e=>{e.textContent.trim()===t&&(e.style.transform="scale(1.2)")})}function g(){document.querySelectorAll("#table-container .oval").forEach(t=>{t.style.transform="scale(1)"})}window.updateSourcesUsesChart=function(t){if(window.pauseChartUpdates)return void console.log("Chart update paused during animation");const e=calculateSourcesAndUses(t);a.data.datasets[0].data[0]=e.equity,a.data.datasets[1].data[0]=e.hel,a.data.datasets[2].data[0]=e.initialMortgage,a.data.datasets[3].data[1]=e.purchasePrice,a.data.datasets[4].data[1]=e.closingCosts,a.data.datasets[5].data[1]=e.closingLoanCosts,a.totalSources=e.totalSources,a.totalUses=e.totalUses,a.update(),d()},c.isCreating=!1,t.addEventListener("mousemove",function(t){const e=a.getElementsAtEventForMode(t,"nearest",{intersect:!0},!1);if(e.length>0){const t=e[0].datasetIndex;if(t!==l){null!==l&&u(l,200);const e=a.data.datasets[t].label;g(),p(e),h(t,1.1,200),l=t}}}),t.addEventListener("mouseout",function(){g(),null!==l&&(u(l,200),l=null),a.tooltip.setActiveElements([],{x:0,y:0}),a.tooltip.update(),a.draw()}),document.addEventListener("formDictionaryChanged",function(t){"object"==typeof t.detail&&null!==t.detail&&(updateSourcesUsesChart(t.detail),c(document.getElementById("toggle-switch")?.checked||!1))});const f=document.getElementById("toggle-switch");function m(){const t=document.getElementById("sourcesUsesChart-wrapper"),e=document.querySelector("#sourcesUsesChart-wrapper .chart-content"),n=document.getElementById("table-container"),i=document.getElementById("charts-container"),o=document.getElementById("sourcesUsesChart");if(!(t&&n&&i&&o))return;const s=n.querySelector("table");if(!s)return;const a=s.offsetHeight;if(t.style.minHeight=a+80+"px",e&&(e.style.minHeight=a+"px"),i.style.height=a+"px",o.style.height=a+"px",window.sourcesUsesChart)try{window.sourcesUsesChart.resize(),window.sourcesUsesChart.update()}catch(t){console.error("Error in force resize:",t)}console.log("Forced container resize - tableHeight:",a)}f&&f.addEventListener("change",function(){if(window.isToggling)return void console.log("Toggle already in progress, ignoring");window.isToggling=!0,window.pauseChartUpdates=!0;const t=document.getElementById("sourcesUsesChart"),e=(document.getElementById("charts-container"),document.getElementById("table-container"));document.getElementById("sourcesUsesChart-wrapper"),t&&(t.style.opacity="0",t.style.transition="opacity 0.25s ease-out");const n=e.querySelector(".table-wrapper");n&&(n.style.opacity="0",n.style.transition="opacity 0.25s ease-out"),setTimeout(()=>{c(this.checked),setTimeout(()=>{window.pauseChartUpdates=!1,d(),setTimeout(()=>{t&&(t.style.opacity="1",t.style.transition="opacity 0.4s ease-in"),setTimeout(()=>{window.isToggling=!1},400)},100)},200)},250)}),window.addEventListener("resize",function(t){let e;return function(){const n=this,i=arguments;clearTimeout(e),e=setTimeout(()=>{t.apply(n,i)},250)}}(d)),window.formDictionary&&updateSourcesUsesChart(window.formDictionary),c(f?.checked||!1),setTimeout(d,250),setTimeout(m,1e3)}catch(y){console.error("Error creating sources-uses chart:",y)}}),window.addEventListener("resize",function(){Vi()}),document.addEventListener("DOMContentLoaded",function(){function t(){const t=document.getElementById("barChart"),n=document.getElementById("barChart-wrapper");if(t&&n)if(n.querySelectorAll(".subheading + div h2, .subheading + div h3").forEach(t=>{t.textContent.includes("Investment Performance")&&t.parentElement.remove()}),n.style.height="auto",n.style.minHeight="450px",n.style.paddingBottom="30px",t.style.height="400px",t.style.maxHeight="none",t.style.width="100%",t.style.display="block",window.myChart)try{window.myChart.resize(),window.myChart.reset(),window.myChart.update(),console.log("Existing chart resized")}catch(t){console.error("Error resizing chart:",t),window.myChart.destroy(),e()}else e();else console.error("Bar chart elements not found")}function e(){const t=document.getElementById("barChart").getContext("2d");let e=window.financialOutputs?.IRR||0;window.myChart=new Chart(t,{type:"bar",data:{labels:["S&P 500","RE ETF","Bond ETF","Your Property"],datasets:[{label:"Returns",backgroundColor:["rgba(255, 209, 81, 0.6)","rgba(0, 0, 0, 0.6)","rgba(164, 164, 164, 0.6)","rgba(122, 223, 187, 0.6)"],data:[.115,.068,.039,e],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:20}},plugins:{legend:{display:!1},title:{display:!1},tooltip:{callbacks:{label:function(t){return(100*t.raw).toFixed(1)+"%"}}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{callback:function(t){return(100*t).toFixed(0)+"%"}},max:Math.max(Math.ceil(20*Math.max(e,.115))/20+.03,.17)}}},plugins:[{afterDraw:function(t){const e=t.ctx;t.data.datasets.forEach(function(n,i){t.getDatasetMeta(i).data.forEach(function(t,i){const o=(100*n.data[i]).toFixed(1)+"%";e.fillStyle="#000",e.textAlign="center",e.textBaseline="bottom",e.font="bold 12px Arial",e.fillText(o,t.x,t.y-5)})})}}]}),console.log("New chart created")}window.addEventListener("load",function(){t()}),setTimeout(t,1e3),document.addEventListener("formDictionaryChanged",function(){if(window.myChart&&window.financialOutputs){const e=window.financialOutputs.IRR||0;window.myChart.data.datasets[0].data[3]=e,window.myChart.update(),setTimeout(t,200)}}),window.addEventListener("resize",function(){setTimeout(t,200)})}),document.addEventListener("DOMContentLoaded",function(){function t(){return window.innerWidth<768}function e(){const e=document.getElementById("annualCashFlowChart");if(!e)return{pointRadius:16,fontSize:11};const n=e.offsetWidth;let i,o,s,a,r=20;return window.annualCashFlowChart&&window.annualCashFlowChart.data&&window.annualCashFlowChart.data.labels?r=window.annualCashFlowChart.data.labels.length:window.formDictionary&&(r=window.formDictionary["investment-years"]||window.formDictionary["investment-years-advanced"]||20),n<400?(s=12,a=11):n<600?(s=14,a=12):n<800?(s=16,a=13):(s=18,a=14),t()&&(s*=.4),r<=5?(i=1.3*s,o=1.2*a):r<=10?(i=1.15*s,o=1.1*a):r<=15?(i=s,o=a):r<=25?(i=.9*s,o=.9*a):(i=.75*s,o=.75*a),{pointRadius:i,fontSize:o}}function n(t,e,n){return t.slice(e,n).reduce((t,e)=>t+e,0)}const i=document.getElementById("annualCashFlowChart");if(!i)return void console.error("Cannot find #annualCashFlowChart canvas element");if("undefined"==typeof Chart)return void console.error("Chart.js not loaded yet!");const o=Chart.getChart(i);o&&(console.log("Destroying existing annual cash flow chart instance"),o.destroy());const{pointRadius:s,fontSize:a}=e(),r={id:"dataPointLabels",afterDatasetsDraw:e=>{if(t())return;const n=e.ctx,i=e.data.datasets[8];if(!i||"line"!==i.type)return;const o=e.getDatasetMeta(8);n.font=`bold ${a}px Arial`,n.textAlign="center",n.textBaseline="middle",n.fillStyle="#000000",o.data.forEach((t,e)=>{const o=i.data[e];let s;s=Math.abs(o)>=1e6?"$"+(o/1e6).toFixed(1)+"M":Math.abs(o)>=1e3?"$"+(o/1e3).toFixed(0)+"k":"$"+o.toFixed(0),o<0&&(s="-"+s.replace("-","")),n.fillText(s,t.x,t.y)})}},l={maintainAspectRatio:!1,responsive:!0,plugins:{title:{display:!1,text:"Annual Cash Flow Breakdown",font:{size:18}},legend:{position:"bottom",labels:{boxWidth:12,usePointStyle:!0,padding:15}},tooltip:{callbacks:{title:function(t){return"Year "+t[0].label},label:function(t){let e=t.dataset.label||"";e&&(e+=": ");let n=t.raw,i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(n);return n<0&&"line"!==t.dataset.type&&(i=i.replace("-","")+" (expense)"),e+i}},position:"nearest"}},scales:{x:{title:{display:!0,text:"Year",font:{size:14,weight:"bold"}},grid:{display:!1}},y:{stacked:!0,title:{display:!0,text:"Annual Amount ($)",font:{size:14,weight:"bold"}},ticks:{callback:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}},suggestedMin:function(t){const e=t.chart.data.datasets.flatMap(t=>t.data);return 1.1*Math.min(...e.filter(t=>"number"==typeof t))}}},animation:{duration:1e3,easing:"easeOutQuart"},onResize:function(t,n){const{pointRadius:i}=e();t.data.datasets[8].pointRadius=.8*i,t.data.datasets[8].pointHoverRadius=.8*i+2,t.update()},onHover:(t,e,n)=>{e.length>0&&8===e[0].datasetIndex&&(n.tooltip.setActiveElements([],{x:0,y:0}),n.tooltip._active=[],n.tooltip._model={},n.getDatasetMeta(8).controller._active=[])}},c=new Chart(i,{type:"bar",data:{labels:[],datasets:[{label:"Insurance",backgroundColor:"rgba(255, 99, 132, 0.7)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,stack:"stack0",order:8,data:[]},{label:"Property Tax",backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1,stack:"stack0",order:7,data:[]},{label:"HOA",backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1,stack:"stack0",order:6,data:[]},{label:"Maintenance",backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,stack:"stack0",order:5,data:[]},{label:"Management Fee",backgroundColor:"rgba(255, 206, 86, 0.6)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:1,stack:"stack0",order:4,data:[]},{label:"Interest Expense",backgroundColor:"rgba(199, 199, 199, 0.6)",borderColor:"rgba(199, 199, 199, 1)",borderWidth:1,stack:"stack0",order:3,data:[]},{label:"Principal Payments",backgroundColor:"rgba(120, 120, 120, 0.6)",borderColor:"rgba(120, 120, 120, 1)",borderWidth:1,stack:"stack0",order:2,data:[]},{label:"Revenue",backgroundColor:"rgba(122, 223, 187, 0.6)",borderColor:"rgba(122, 223, 187, 1)",borderWidth:1,stack:"stack0",order:1,data:[]},{label:"Net Cash Flow",type:"line",backgroundColor:"rgba(0, 0, 0, 0)",borderColor:"rgba(0, 0, 0, 1)",borderWidth:3,pointBackgroundColor:"white",pointBorderColor:"black",pointBorderWidth:2,pointRadius:.8*s,pointHoverRadius:.8*s+2,tension:.1,stack:"stack1",order:0,data:[]}]},options:l,plugins:[r,{id:"tooltipBlocker",beforeTooltip:(t,e)=>{e.tooltip&&e.tooltip.dataPoints&&e.tooltip.dataPoints.every(t=>8===t.datasetIndex)&&(e.tooltip.opacity=0,e.tooltip.width=0,e.tooltip.height=0,e.tooltip.caretX=-1e3,e.tooltip.caretY=-1e3)}}]});window.annualCashFlowChart=c,window.updateAnnualCashFlowChart=function(t){if(!t)return;const i=t["HEL Interest"]||[],o=t["RM Interest"]||[],s=t["IM Principal"]||[],a=t["HEL Principal"]||[],r=t["RM Principal"]||[],l=function(t,e){const i={labels:Array.from({length:e},(t,e)=>`${e+1}`),revenue:[],insurance:[],propertyTax:[],hoa:[],maintenance:[],managementFee:[],interest:[],principal:[],netCashFlow:[]};for(let o=0;o<e;o++){let e,s;0===o?(e=1,s=13):(e=12*o+1,s=e+12),s=Math.min(s,t.revenue.length),e=Math.min(e,t.revenue.length-1),i.revenue.push(n(t.revenue,e,s)),i.insurance.push(Math.abs(n(t.insurance,e,s))),i.propertyTax.push(Math.abs(n(t.propertyTax,e,s))),i.hoa.push(Math.abs(n(t.hoa,e,s))),i.maintenance.push(Math.abs(n(t.maintenance,e,s))),i.managementFee.push(Math.abs(n(t.managementFee,e,s))),i.interest.push(Math.abs(n(t.interest,e,s))),i.principal.push(Math.abs(n(t.principal,e,s))),i.netCashFlow.push(n(t.netCashFlow,e,s))}return i}({revenue:t["Raw Revenue"]||t.Revenue||[],insurance:t.Insurance||[],propertyTax:t["Property Tax"]||[],hoa:t.HOA||[],maintenance:t.Maintenance||[],managementFee:t["Management Fee"]||[],interest:(t["IM Interest"]||[]).map((t,e)=>t+(i[e]||0)+(o[e]||0)),principal:s.map((t,e)=>t+(a[e]||0)+(r[e]||0)),netCashFlow:t["Levered FCF"]||[]},window.formDictionary["investment-years"]||window.formDictionary["investment-years-advanced"]||20);c.data.datasets[0].data=l.insurance.map(t=>-Math.abs(t)),c.data.datasets[1].data=l.propertyTax.map(t=>-Math.abs(t)),c.data.datasets[2].data=l.hoa.map(t=>-Math.abs(t)),c.data.datasets[3].data=l.maintenance.map(t=>-Math.abs(t)),c.data.datasets[4].data=l.managementFee.map(t=>-Math.abs(t)),c.data.datasets[5].data=l.interest.map(t=>-Math.abs(t)),c.data.datasets[6].data=l.principal.map(t=>-Math.abs(t)),c.data.datasets[7].data=l.revenue,c.data.datasets[8].data=l.netCashFlow,c.data.labels=l.labels;const{pointRadius:d}=e();c.data.datasets[8].pointRadius=.8*d,c.data.datasets[8].pointHoverRadius=.8*d+2,c.update()},document.addEventListener("formDictionaryChanged",function(){window.financialOutputs&&updateAnnualCashFlowChart(window.financialOutputs)}),window.addEventListener("resize",function(){c&&c.resize()}),window.financialOutputs&&updateAnnualCashFlowChart(window.financialOutputs)}),document.addEventListener("DOMContentLoaded",function(){!function(){const t=document.getElementById("annualDebtPaymentChart");t?(window.debtPaymentChart=new Chart(t,{type:"bar",data:{labels:[],datasets:[{label:"Initial Mortgage Principal",backgroundColor:"rgba(255, 99, 132, 0.8)",stack:"Stack 0",order:1,data:[]},{label:"Initial Mortgage Interest",backgroundColor:"rgba(255, 99, 132, 0.5)",stack:"Stack 0",order:1,data:[]},{label:"Initial Mortgage Extra Payments",backgroundColor:"rgba(255, 99, 132, 0.3)",stack:"Stack 0",order:1,data:[]},{label:"Refinanced Mortgage Principal",backgroundColor:"rgba(153, 102, 255, 0.8)",stack:"Stack 0",order:2,data:[]},{label:"Refinanced Mortgage Interest",backgroundColor:"rgba(153, 102, 255, 0.5)",stack:"Stack 0",order:2,data:[]},{label:"Refinanced Mortgage Extra Payments",backgroundColor:"rgba(153, 102, 255, 0.3)",stack:"Stack 0",order:2,data:[]},{label:"Home Equity Loan Principal",backgroundColor:"rgba(54, 162, 235, 0.8)",stack:"Stack 0",order:3,data:[]},{label:"Home Equity Loan Interest",backgroundColor:"rgba(54, 162, 235, 0.5)",stack:"Stack 0",order:3,data:[]},{label:"Home Equity Loan Extra Payments",backgroundColor:"rgba(54, 162, 235, 0.3)",stack:"Stack 0",order:3,data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1,text:"Annual Debt Payment Components"},legend:{position:"bottom",labels:{usePointStyle:!0,boxWidth:10,filter:function(t,e){return!e.datasets[t.datasetIndex].hidden}}},tooltip:{callbacks:{label:function(t){let e=t.dataset.label||"";return e&&(e+=": "),null!==t.parsed.y&&(e+=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.parsed.y)),e}}}},scales:{x:{stacked:!0,title:{display:!0,text:"Year",font:{size:14,weight:"bold"}},ticks:{callback:function(t,e){return e+1}},grid:{display:!1}},y:{stacked:!0,ticks:{callback:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(t)}},title:{display:!0,text:"Amount ($)",font:{size:14,weight:"bold"}}}}}}),window.financialOutputs&&Wi()):console.error("Debt payment chart canvas not found")}(),document.addEventListener("formDictionaryChanged",function(t){window.financialOutputs&&Wi()});const t=document.getElementById("toggle-switch");t&&t.addEventListener("change",function(){setTimeout(()=>{window.financialOutputs&&Wi()},500)})}),document.addEventListener("DOMContentLoaded",function(){console.log("Debt balance chart script loaded");const t=document.getElementById("debtBalanceChart");if(!t)return void console.error("Cannot find debt balance chart canvas");console.log("Debt balance canvas found");const e="rgba(255, 99, 132, 0.7)",n="rgba(54, 162, 235, 0.7)",i="rgba(153, 102, 255, 0.7)";try{const o=[{label:"Initial Mortgage",data:[3e5,29e4,28e4],borderColor:e,backgroundColor:e,fill:!0,tension:0,order:1},{label:"Refinanced Mortgage",data:[0,0,0],borderColor:i,backgroundColor:i,fill:!0,tension:0,order:2},{label:"Home Equity Loan",data:[5e4,45e3,4e4],borderColor:n,backgroundColor:n,fill:!0,tension:0,order:3}].filter(t=>!t.data.every(t=>0===t)),s=new Chart(t,{type:"line",data:{labels:["Close","1","2"],datasets:o},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",axis:"x",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,font:{size:12}}},tooltip:{callbacks:{title:function(t){const e=t[0].label;return"Close"===e?"At Close":"Year "+e},label:function(t){let e=t.dataset.label||"";return e&&(e+=": "),null!==t.parsed.y&&(e+=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.parsed.y)),e}}}},scales:{x:{grid:{display:!1},title:{display:!0,text:"Year",font:{size:14,weight:"bold"},padding:{top:10,bottom:0}},ticks:{font:{family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12}}},y:{stacked:!0,beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},title:{display:!0,text:"Remaining Debt Balance ($)",font:{size:14,weight:"bold"},padding:{right:10,left:0}},ticks:{callback:function(t){return t>=1e6?"$"+(t/1e6).toFixed(1)+"M":t>=1e3?"$"+(t/1e3).toFixed(0)+"K":"$"+t},maxTicksLimit:8,font:{family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12}}}},elements:{line:{tension:0},point:{radius:3,hoverRadius:5}}}});function a(t){if(console.log("Updating debt balance chart with financial outputs"),t)try{const o=t["IM Balance"]||[],a=t["HEL Balance"]||[],r=t["RM Balance"]||[],l=window.formDictionary&&(window.formDictionary["investment-years"]||window.formDictionary["investment-years-advanced"])||20,c=[],d=[],h=[],u=[];for(let t=0;t<=l;t++)c.push(0===t?"Close":t.toString());for(let t=0;t<=l;t++){const e=12*t;e<o.length?(d.push(o[e]),h.push(a[e]),u.push(r[e])):(d.push(0),h.push(0),u.push(0))}const p=[{label:"Initial Mortgage",data:d,borderColor:e,backgroundColor:e,fill:!0,tension:0},{label:"Refinanced Mortgage",data:u,borderColor:i,backgroundColor:i,fill:!0,tension:0},{label:"Home Equity Loan",data:h,borderColor:n,backgroundColor:n,fill:!0,tension:0}].filter(t=>!t.data.every(t=>0===t));s.data.labels=c,s.data.datasets=p,s.update(),console.log("Chart updated successfully")}catch(t){console.error("Error updating debt balance chart:",t)}else console.error("No financial outputs available")}console.log("Chart initially created with placeholder data"),window.debtBalanceChart=s,document.addEventListener("formDictionaryChanged",function(t){console.log("Form dictionary changed event detected"),window.financialOutputs?a(window.financialOutputs):console.warn("No financial outputs available on form change")}),window.financialOutputs?(console.log("Initial financial outputs available"),a(window.financialOutputs)):console.warn("No initial financial outputs available"),console.log("Debt balance chart setup complete")}catch(r){console.error("Error setting up debt balance chart:",r)}}),document.addEventListener("DOMContentLoaded",function(){function t(t,e=!0){if("number"!=typeof t||isNaN(t))return"-";if(0===t)return"-";const n=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),i=Math.abs(t),o=`$${n.format(i)}`;return t<0?e?`(${o})`:`-${o}`:o}function e(t,e="0px"){const n=document.createElement("tr");n.style.height=e;const i=document.createElement("td");i.innerHTML="&nbsp;",i.style.padding="2px",i.style.backgroundColor="white",i.style.borderBottom="1px solid #ddd",n.appendChild(i);for(let e=1;e<=t;e++){const t=document.createElement("td");t.innerHTML="&nbsp;",t.style.padding="2px",t.style.backgroundColor="white",t.style.borderBottom="1px solid #ddd",n.appendChild(t)}return n}function n(e,n,i,o={}){const{isHeader:s=!1,rowBgColor:a="#f9f9f9",fontColor:r="inherit",isBold:l=!0,showBorder:c=!1,valueFormatter:d=t,mortgageType:h=null,outputs:u=null}=o,p=document.createElement("tr");p.style.backgroundColor=a,p.dataset.rowBgColor=a,s&&p.classList.add("header-row");const g=document.createElement("td");g.textContent=e,g.style.padding="6px 8px",g.style.fontWeight=l?"bold":"normal",g.style.borderBottom="1px solid #ddd",g.style.position="sticky",g.style.left="0",g.style.zIndex="10",g.style.backgroundColor=a,g.dataset.originalBg=a,"inherit"!==r&&(g.style.color=r),s&&(g.style.whiteSpace="nowrap",g.style.overflow="visible",g.style.textOverflow="clip"),p.appendChild(g);for(let t=1;t<=i;t++){const i=document.createElement("td");if(i.dataset.originalBg=a,s)i.innerHTML="&nbsp;";else{let o;o=h?"Principal"===e?u[`${h} Principal`]?u[`${h} Principal`][t]:void 0:"Interest"===e?u[`${h} Interest`]?u[`${h} Interest`][t]:void 0:"Extra Payments"===e?u[`${h} Extra Payments`]?u[`${h} Extra Payments`][t]:void 0:n[t]:n[t],i.textContent=void 0!==o?d(o):"-",o&&o<0?i.style.color="#ff5555":o&&o>0&&(i.style.color="#4caf50"),"inherit"!==r&&(i.style.color=r)}i.style.padding="6px 8px",i.style.textAlign="right",i.style.borderBottom="1px solid #ddd",p.appendChild(i)}return c&&(p.style.borderTop="4px solid black"),p}function i(o){if(!o)return void console.error("No financial outputs available");s.innerHTML="";const a=o.Revenue.length;a>100&&(console.log("Large table detected, applying optimizations"),document.createDocumentFragment());const r=document.getElementById("toggle-switch")?.checked||!1,l="yes"===document.querySelector('input[name="use-hel"]:checked')?.value||!1,c="yes"===document.querySelector('input[name="refinance-mortgage"]:checked')?.value||!1,d=function(){const t=document.getElementById("toggle-switch")?.checked||!1,e="yes"===document.querySelector('input[name="use-hel"]:checked')?.value||!1,n="yes"===document.querySelector('input[name="refinance-mortgage"]:checked')?.value||!1;let i=["Revenue","Insurance","HOA","Property Tax","Maintenance","Management Fee","Operating Cash Flow","Initial Mortgage","Principal","Interest"];return"yes"===document.querySelector('input[name="im-extra-payments"]:checked')?.value&&i.push("Extra Payments"),t&&e&&(i=i.concat(["Home Equity Loan","Principal","Interest","Extra Payments"])),t&&n&&(i=i.concat(["Refinanced Mortgage","Principal","Interest","Extra Payments"])),i=i.concat(["Total Debt Service","Levered FCF","Additional Equity"]),i}(),h=document.createElement("table");h.id="cashflow-detail-table",h.className="spreadsheet-table",h.style.width="100%",h.style.borderCollapse="collapse",h.style.marginTop="15px",h.style.fontSize="14px",h.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",h.style.position="relative",h.style.borderCollapse="separate",h.style.borderSpacing="0";const u=document.createElement("thead"),p=document.createElement("tr"),g=document.createElement("th");g.textContent="Category",g.style.padding="8px",g.style.backgroundColor="#7adfbb",g.style.color="white",g.style.fontWeight="bold",g.style.textAlign="left",p.appendChild(g);let f=window.selectedMonthsToShow||Math.min(240,a-1);for(let t=1;t<=f;t++){const e=document.createElement("th");e.textContent=`Month ${t}`,e.style.padding="8px",e.style.backgroundColor="#7adfbb",e.style.color="white",e.style.fontWeight="bold",e.style.textAlign="right",p.appendChild(e)}u.appendChild(p),h.appendChild(u);const m=document.createElement("tbody");let y=null;d.forEach((i,s)=>{const a="Initial Mortgage"===i||"Home Equity Loan"===i||"Refinanced Mortgage"===i;"Initial Mortgage"===i?y="IM":"Home Equity Loan"===i?y="HEL":"Refinanced Mortgage"===i&&(y="RM");const d=a?"rgba(255, 209, 81, 0.6)":s%2==0?"#f9f9f9":"white",h="Initial Mortgage"===i||"Refinanced Mortgage"===i||"Home Equity Loan"===i||"Principal"===i||"Interest"===i||"Extra Payments"===i||"Additional Equity"===i?"black":"inherit";let u;if("Principal"!==i&&"Interest"!==i&&"Extra Payments"!==i||"IM"!==y&&"HEL"!==y&&"RM"!==y){const t=function(t){switch(t){case"Revenue":return"Revenue";case"Insurance":return"Insurance";case"HOA":return"HOA";case"Property Tax":return"Property Tax";case"Maintenance":return"Maintenance";case"Management Fee":return"Management Fee";case"Operating Cash Flow":return"Operating CF";case"Initial Mortgage":case"Home Equity Loan":case"Refinanced Mortgage":return"";case"Total Debt Service":return"Total Debt Service";case"Levered FCF":return"Levered FCF";case"Additional Equity":return"Additional Equity";default:return t}}(i);u=n(i,o[t]||[],f,{isHeader:a,rowBgColor:d,fontColor:h,showBorder:"Operating Cash Flow"===i||"Total Debt Service"===i})}else u=n(i,[],f,{isHeader:!1,rowBgColor:d,fontColor:h,showBorder:"Operating Cash Flow"===i||"Total Debt Service"===i,mortgageType:y,outputs:o});if(m.appendChild(u),"Operating Cash Flow"!==i&&"Total Debt Service"!==i||m.appendChild(e(f)),"Additional Equity"===i){m.appendChild(e(f));const i=n("Property Value",o["Property Price"]||[],f,{rowBgColor:"#f9f9f9"});if(m.appendChild(i),r&&o["Appraised Value"]){const t=n("Appraised Value",o["Appraised Value"]||[],f,{rowBgColor:"white"});m.appendChild(t)}m.appendChild(e(f));const s=n("Initial Mortgage Balance",o["IM Balance"]||[],f,{rowBgColor:"#f9f9f9"});if(m.appendChild(s),l){const t=n("Home Equity Loan Balance",o["HEL Balance"]||[],f,{rowBgColor:"white"});m.appendChild(t)}if(c){const t=n("Refinanced Mortgage Balance",o["RM Balance"]||[],f,{rowBgColor:r&&l?"#f9f9f9":"white"});m.appendChild(t)}const a=document.createElement("tr");a.style.backgroundColor=r&&(l&&c?"white":l||c?"#f9f9f9":"white"),a.style.borderTop="4px solid black";const d=document.createElement("td");d.textContent="Total Debt Balance",d.style.padding="6px 8px",d.style.fontWeight="bold",d.style.borderBottom="1px solid #ddd",d.style.position="sticky",d.style.left="0",d.style.zIndex="10",d.style.backgroundColor="white",a.appendChild(d);for(let e=1;e<=f;e++){const n=document.createElement("td");o["Total Debt Balance"]&&o["Total Debt Balance"][e]?(n.textContent=t(o["Total Debt Balance"][e]),n.style.color="#ff5555",n.style.fontWeight="bold"):n.textContent="-",n.style.padding="6px 8px",n.style.textAlign="right",n.style.borderBottom="1px solid #ddd",a.appendChild(n)}m.appendChild(a);const h=document.createElement("tr");h.style.backgroundColor="#f9f9f9";const u=document.createElement("td");u.textContent="Property Equity",u.style.padding="6px 8px",u.style.fontWeight="bold",u.style.borderBottom="1px solid #ddd",u.style.position="sticky",u.style.left="0",u.style.zIndex="10",u.style.backgroundColor="#f9f9f9",h.appendChild(u);for(let e=1;e<=f;e++){const n=document.createElement("td");if(o["Property Price"]&&o["Property Price"][e]&&o["Total Debt Balance"]&&o["Total Debt Balance"][e]){const i=o["Property Price"][e]-o["Total Debt Balance"][e];n.textContent=t(i),n.style.color=i>0?"#4caf50":"#ff5555"}else n.textContent="-";n.style.padding="6px 8px",n.style.textAlign="right",n.style.borderBottom="1px solid #ddd",h.appendChild(n)}m.appendChild(h)}});const b=u.querySelectorAll("th");b.forEach(t=>{t.style.position="sticky",t.style.top="0",t.style.zIndex="20"});const x=b[0];x&&(x.style.position="sticky",x.style.left="0",x.style.zIndex="30"),h.appendChild(m);const v=document.createElement("style");v.id="cashflow-table-styles";const w=document.getElementById("cashflow-table-styles");w&&w.remove(),v.innerHTML="\n    /* Table header styles */\n    #cashflow-detail-table th {\n        position: sticky;\n        top: 0;\n        z-index: 20;\n        background-color: #7adfbb;\n    }\n\n    /* Special style for the corner cell (top-left) */\n    #cashflow-detail-table th:first-child {\n        position: sticky;\n        left: 0;\n        top: 0;\n        z-index: 30;\n        background-color: #7adfbb;\n    }\n\n    /* Sticky first column (row headers) */\n    #cashflow-detail-table td:first-child {\n        position: sticky;\n        left: 0;\n        z-index: 10;\n    }\n\n    /* Basic row styling - alternating colors */\n    #cashflow-detail-table tbody tr:nth-child(odd):not(.header-row) {\n        background-color: #f9f9f9;\n    }\n\n    #cashflow-detail-table tbody tr:nth-child(even):not(.header-row) {\n        background-color: white;\n    }\n\n    /* Header row styling */\n    #cashflow-detail-table tbody tr.header-row,\n    #cashflow-detail-table tbody tr.header-row:hover {\n        background-color: rgba(255, 209, 81, 0.6) !important;\n    }\n\n    #cashflow-detail-table tbody tr.header-row td,\n    #cashflow-detail-table tbody tr.header-row:hover td {\n        background-color: rgba(255, 209, 81, 0.6) !important;\n    }\n\n    /* Row header (first cell) background colors to match row backgrounds */\n    #cashflow-detail-table tbody tr:nth-child(odd):not(.header-row) td:first-child {\n        background-color: #f9f9f9;\n    }\n\n    #cashflow-detail-table tbody tr:nth-child(even):not(.header-row) td:first-child {\n        background-color: white;\n    }\n\n    /* Header row first cells maintain their special styling */\n    #cashflow-detail-table tbody tr.header-row td:first-child {\n        background-color: rgba(255, 209, 81, 0.6) !important;\n    }\n\n    /* Row hover effect - applied to all cells EXCEPT the first cell */\n    #cashflow-detail-table tbody tr:not(.header-row):hover td:not(:first-child) {\n        background-color: rgba(0, 0, 0, 0.05) !important;\n    }\n\n    /* Scrollbar styling */\n    #cashflow-detail-table::-webkit-scrollbar {\n        width: 8px;\n        height: 8px;\n    }\n\n    #cashflow-detail-table::-webkit-scrollbar-track {\n        background: #f5f5f5;\n    }\n\n    #cashflow-detail-table::-webkit-scrollbar-thumb {\n        background-color: #ddd;\n        border-radius: 4px;\n    }\n    ",document.head.appendChild(v);const _=document.createElement("div");return _.style.overflowX="auto",_.style.overflowY="auto",_.style.height="500px",_.style.position="relative",_.style.scrollbarWidth="thin",_.style.scrollbarColor="#ddd #f5f5f5",_.appendChild(h),s.appendChild(_),function(t,e,n,o){const s=document.createElement("div");s.style.position="sticky",s.style.top="0",s.style.backgroundColor="white",s.style.zIndex="10",s.style.padding="15px 0",s.style.borderBottom="1px solid #ddd",s.style.marginBottom="15px";const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.flexWrap="wrap",a.style.gap="10px";const r=n.Revenue.length,l=Math.ceil((r-1)/12),c=document.createElement("div");c.textContent="I want to see cash flows from Year 1 to Year ",c.style.fontWeight="bold",c.style.fontSize="16px";const d=document.createElement("input");d.type="number",d.min="1",d.max=l.toString(),d.value=window.selectedMonthsToShow?Math.ceil(window.selectedMonthsToShow/12).toString():"20",d.style.width="60px",d.style.padding="6px 8px",d.style.fontSize="16px",d.style.border="1px solid #ccc",d.style.borderRadius="4px",d.style.textAlign="center",d.style.marginLeft="5px",d.style.marginRight="5px";const h=document.createElement("button");h.textContent="Apply",h.style.padding="8px 15px",h.style.backgroundColor="#7adfbb",h.style.border="1px solid #65c9a7",h.style.borderRadius="4px",h.style.cursor="pointer",h.style.fontWeight="bold",h.style.color="white",h.style.marginLeft="10px",h.style.transition="all 0.2s ease";const u=document.createElement("button");u.textContent="Show All Years",u.style.padding="8px 15px",u.style.backgroundColor="#f0f0f0",u.style.border="1px solid #ccc",u.style.borderRadius="4px",u.style.cursor="pointer",u.style.fontWeight="normal",u.style.color="black",u.style.marginLeft="10px",u.style.transition="all 0.2s ease",h.addEventListener("mouseover",()=>{h.style.backgroundColor="#65c9a7"}),h.addEventListener("mouseout",()=>{h.style.backgroundColor="#7adfbb"}),u.addEventListener("mouseover",()=>{u.style.backgroundColor="#e0e0e0"}),u.addEventListener("mouseout",()=>{u.style.backgroundColor="#f0f0f0"}),h.addEventListener("click",()=>{const t=parseInt(d.value)||1,e=Math.min(12*t,r-1);window.selectedMonthsToShow=e,i(n)}),u.addEventListener("click",()=>{d.value=l;const t=Math.min(12*l,r-1);window.selectedMonthsToShow=t,i(n)});const p=document.createElement("button");p.textContent="Download CSV",p.style.padding="8px 15px",p.style.backgroundColor="#2196f3",p.style.border="1px solid #0d8bf2",p.style.borderRadius="4px",p.style.cursor="pointer",p.style.fontWeight="normal",p.style.color="white",p.style.marginLeft="auto",p.style.transition="all 0.2s ease",p.addEventListener("mouseover",()=>{p.style.backgroundColor="#0d8bf2"}),p.addEventListener("mouseout",()=>{p.style.backgroundColor="#2196f3"}),p.addEventListener("click",()=>{const t=parseInt(d.value)||1,e=Math.min(12*t,r-1);!function(t,e,n,i){let o="Category";for(let t=1;t<=i;t++)o+=`,Month ${t}`;o+="\n",n.forEach(t=>{o+=`"${t}"`;const s=e[function(t,e){switch(t){case"Revenue":return"Revenue";case"Insurance":return"Insurance";case"HOA":return"HOA";case"Property Tax":return"Property Tax";case"Maintenance":return"Maintenance";case"Management Fee":return"Management Fee";case"Operating Cash Flow":return"Operating CF";case"Initial Mortgage":case"Home Equity Loan":case"Refinanced Mortgage":return"";case"Total Debt Service":return"Total Debt Service";case"Levered FCF":return"Levered FCF";case"Additional Equity":return"Additional Equity"}if(!e||0===e.length)return"Principal"===t?"IM Principal":"Interest"===t?"IM Interest":"Extra Payments"===t?"IM Extra Payments":t;const n=e.lastIndexOf(t);if(-1===n)return"Principal"===t?"IM Principal":"Interest"===t?"IM Interest":"Extra Payments"===t?"IM Extra Payments":t;let i="";for(let t=n-1;t>=0;t--)if("Initial Mortgage"===e[t]||"Home Equity Loan"===e[t]||"Refinanced Mortgage"===e[t]){i=e[t];break}if("Initial Mortgage"===i){if("Principal"===t)return"IM Principal";if("Interest"===t)return"IM Interest";if("Extra Payments"===t)return"IM Extra Payments"}else if("Home Equity Loan"===i){if("Principal"===t)return"HEL Principal";if("Interest"===t)return"HEL Interest";if("Extra Payments"===t)return"HEL Extra Payments"}else if("Refinanced Mortgage"===i){if("Principal"===t)return"RM Principal";if("Interest"===t)return"RM Interest";if("Extra Payments"===t)return"RM Extra Payments"}return"Principal"===t?"IM Principal":"Interest"===t?"IM Interest":"Extra Payments"===t?"IM Extra Payments":t}(t,n)]||[];for(let t=1;t<=i;t++)o+=void 0!==s[t]?`,${s[t]}`:",";o+="\n"});const s=encodeURI("data:text/csv;charset=utf-8,"+o),a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download","cash_flow_data.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}(0,n,o,e)}),d.addEventListener("input",function(){let t=this.value;""!==t&&(t=parseInt(t)||1,(t<1||t>l)&&setTimeout(()=>{t<1&&(this.value="1"),t>l&&(this.value=l.toString())},0))}),d.addEventListener("blur",function(){let t=parseInt(this.value)||1;t<1&&(t=1),t>l&&(t=l),this.value=t}),a.appendChild(c),a.appendChild(d),a.appendChild(h),a.appendChild(u),a.appendChild(p),s.appendChild(a),t.insertBefore(s,t.firstChild)}(s,0,o,d),h}function o(){const t=document.getElementById("chart-container");if(!t)return;let e=document.getElementById("spreadsheet-container");if(!e){const n=document.createElement("h2");n.textContent="Monthly Cash Flow Details",n.className="subheading",n.style.marginTop="30px",t.appendChild(n),e=document.createElement("div"),e.id="spreadsheet-container",e.style.marginTop="10px",e.style.width="100%",e.style.backgroundColor="#fff",e.style.border="1px solid #ccc",e.style.borderRadius="4px",e.style.padding="15px",e.style.boxSizing="border-box",e.style.position="relative",t.appendChild(e)}return e}const s=document.getElementById("spreadsheet-container");s?(document.addEventListener("formDictionaryChanged",function(){window.financialOutputs&&(o(),i(window.financialOutputs))}),document.addEventListener("change",function(t){const e=t.target;"use-hel"!==e.name&&"refinance-mortgage"!==e.name&&"im-extra-payments"!==e.name||window.financialOutputs&&i(window.financialOutputs)}),setTimeout(()=>{o(),window.financialOutputs&&i(window.financialOutputs)},500)):console.error("Cannot find #spreadsheet-container")}),document.addEventListener("DOMContentLoaded",function(){window.SpreadsheetOptimizer={init:function(){const t=document.getElementById("spreadsheet-container");t&&(console.log("Initializing spreadsheet performance optimizer"),this.setupVirtualScrolling(t),this.monkeyPatchTableCreation(),this.optimizeRendering())},setupVirtualScrolling:function(t){if(!t)return;let e=t.querySelector(".table-wrapper");e||(e=document.createElement("div"),e.className="table-wrapper",e.style.cssText="\n            overflow: auto;\n            max-height: 500px;\n            position: relative;\n            contain: strict;\n            will-change: transform;\n            transform: translateZ(0);\n          ",setTimeout(()=>{t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},100)),e.addEventListener("scroll",this.handleTableScroll.bind(this),{passive:!0})},handleTableScroll:function(t){this._scrollTimeout||(this._scrollTimeout=requestAnimationFrame(()=>{this.updateVisibleRows(t.target),this._scrollTimeout=null}))},updateVisibleRows:function(t){if(!t)return;const e=t.querySelector("table");if(!e)return;const n=e.querySelector("tbody");if(!n)return;const i=n.querySelectorAll("tr");if(!i.length)return;const o=t.scrollTop,s=o+t.clientHeight;Array.from(i).forEach(t=>{const e=t.offsetTop;e+t.offsetHeight>=o-300&&e<=s+300?t.classList.contains("virtual-row")&&(t.classList.remove("virtual-row"),t._originalContent&&Array.from(t.cells).forEach((e,n)=>{t._originalContent[n]&&(e.textContent=t._originalContent[n])})):t.classList.contains("virtual-row")||(t._originalContent||(t._originalContent=Array.from(t.cells).map(t=>t.textContent)),t.classList.add("virtual-row"))})},optimizeRendering:function(){const t=document.createElement("style");t.textContent="\n          .virtual-row td:not(:first-child) {\n            color: transparent !important;\n            background: #f9f9f9;\n          }\n          .virtual-row:nth-child(even) td:not(:first-child) {\n            background: white;\n          }\n          .table-wrapper::-webkit-scrollbar {\n            width: 8px;\n            height: 8px;\n          }\n          .table-wrapper::-webkit-scrollbar-track {\n            background: #f5f5f5;\n          }\n          .table-wrapper::-webkit-scrollbar-thumb {\n            background-color: #ddd;\n            border-radius: 4px;\n          }\n        ",document.head.appendChild(t)},monkeyPatchTableCreation:function(){window.originalCreateCashflowTable||"function"==typeof createCashflowTable&&(window.originalCreateCashflowTable=createCashflowTable,window.createCashflowTable=function(t){if(!t)return void console.error("No financial outputs available");const e=document.getElementById("spreadsheet-container");if(!e)return;const n=document.createElement("div");n.textContent="Generating Table...",n.style.cssText="\n              text-align: center;\n              padding: 20px;\n              font-weight: bold;\n              color: #7adfbb;\n            ",e.innerHTML="",e.appendChild(n),setTimeout(()=>{const n=window.originalCreateCashflowTable(t);if(n){n.querySelectorAll("td, th").forEach(t=>{t.style.transform="translateZ(0)"});const t=new IntersectionObserver(t=>{t.forEach(t=>{t.target.style.opacity=t.isIntersecting?"1":"0.5"})},{rootMargin:"100px",threshold:.1});n.querySelectorAll("tbody tr").forEach(e=>{e.style.transition="opacity 0.2s ease",t.observe(e)})}const i=e.querySelector(".table-wrapper");i&&setTimeout(()=>{SpreadsheetOptimizer.updateVisibleRows(i)},100)},50)})}},SpreadsheetOptimizer.init(),document.addEventListener("formDictionaryChanged",function(){setTimeout(()=>{SpreadsheetOptimizer.init()},500)})}),document.addEventListener("DOMContentLoaded",function(){function t(){o&&(c=!0,document.body.classList.add("mobile-scrolling"),clearTimeout(d),d=setTimeout(function(){c=!1,document.body.classList.remove("mobile-scrolling")},350))}function e(t,e=!1){const n=e?-Math.abs(t):t;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(n)}function n(t){const e=document.querySelector(`input[name="${t}"]:checked`);return e?e.value:null}function i(){if(console.trace(" updateEquitySummary() called"),o&&c)return void console.log("Skipping update during mobile scroll");if(s&&u>=5)return void console.log("Mobile initialization: max 5 updates reached");const t=window.financialOutputs,i=window.sourcesAndUses;if(!t||!i)return void console.log("Missing financial data for update");const l=t["Home Sale Components"]||{},d=l["Property Value"]||0,p=l["Initial Mortgage Balance"]||0,g=l["Home Equity Loan Balance"]||0,f=l["Refinanced Mortgage Balance"]||0,m=l["Net Sale Proceeds"]||0,y=p+g+f,b=t["Levered FCF"]?.reduce((t,e)=>t+e,0)||0,x=t["Additional Equity"]?.reduce((t,e)=>t+e,0)||0,v=i.equity||0,w=v+x,_=t.MOIC||0,E=t.IRR||0,k=document.getElementById("toggle-switch")?.checked||!1,C="yes"===n("use-hel"),M="yes"===n("refinance-mortgage"),S=m+b+x,P=JSON.stringify({homeValue:d,imBal:p,helBal:g,rmBal:f,proceeds:m,totalDebt:y,rent:b,addEquity:x,equity:w,moic:_,irr:E,isAdvanced:k,helActive:C,refiActive:M});if(P===h)return void console.log("Skipping update - no data changes");h=P,u++,console.log(`Equity table update #${u}`);const I=window.scrollY,L=document.createElement("table");L.className="summary-table",L.style.lineHeight="1.2",L.style.fontSize="14px",o&&L.classList.add("mobile-optimized");const A=document.createElement("tbody"),T=(t,e,{bold:n=!1,borderTop:i=!1,color:o="",blankBelow:s=!1}={})=>{const a=document.createElement("tr"),r=document.createElement("td"),l=document.createElement("td");if(r.textContent=t,l.textContent=e,l.className="currency-cell",o&&(l.style.color=o),n&&(a.style.fontWeight="bold"),i&&(a.style.borderTop="4px solid black"),a.appendChild(r),a.appendChild(l),A.appendChild(a),s){const t=document.createElement("tr"),e=document.createElement("td");e.colSpan=2,e.style.height="0px",t.appendChild(e),A.appendChild(t)}};T("Equity at Closing",e(v)),T("Additional Equity to Cover Cash Needs",e(x)),T("Total Equity Invested",e(w),{bold:!0,borderTop:!0,blankBelow:!0}),T("Home Value at Sale",e(d),{color:"green"}),k?(p&&T("Initial Mortgage at Sale",e(p,!0),{color:"red"}),C&&g&&T("Home Equity Loan at Sale",e(g,!0),{color:"red"}),M&&f&&T("Refinanced Mortgage at Sale",e(f,!0),{color:"red"})):T("Mortgage at Sale",e(y,!0),{color:"red"}),T("Home Sale Proceeds",e(m),{bold:!0,borderTop:!0,color:"green"}),T("Rental Proceeds After Debt Payments",e(b+x),{color:b+x<0?"red":"green"}),T("Total Investment Profits",e(S),{bold:!0,borderTop:!0,color:S<0?"red":"green",blankBelow:!0}),T("Annualized Return (IRR)",(100*E).toFixed(2)+"%"),T("Return on Equity (ROE)",_.toFixed(2)+"x"),L.appendChild(A),L.outerHTML.trim()!==(r.firstElementChild?.outerHTML?.trim()||"")?(r.innerHTML="",r.appendChild(L),console.log(" Equity summary table DOM updated")):console.log(" Skipped DOM update  content identical"),a=!0,o&&window.scrollY!==I&&window.scrollTo(0,I)}console.log("Equity summary script loaded");let o=window.innerWidth<992,s=o,a=!1;const r=document.getElementById("equity-summary-table-container");if(!r)return void console.error("Equity summary table container not found");o&&(r.classList.add("mobile-view"),document.body.classList.add("mobile-initialized"));const l=document.createElement("style");l.textContent="\n        /* Mobile enhancements - lock table rendering */\n        body.mobile-initialized #equity-summary-table-container,\n        body.mobile-initialized .summary-table {\n            transform: translateZ(0);\n            will-change: transform;\n            backface-visibility: hidden;\n            -webkit-backface-visibility: hidden;\n        }\n        \n        /* Scroll protection for mobile devices */\n        body.mobile-scrolling #equity-summary-table-container {\n            pointer-events: none;\n        }\n        \n        /* Mobile table enhancements */\n        .mobile-view .summary-table {\n            table-layout: fixed;\n            width: 100%;\n        }\n        \n        /* Optimize table rendering */\n        .summary-table {\n            contain: content;\n        }\n        \n        /* Ensure mobile table cells don't cause horizontal overflow */\n        .mobile-view .summary-table td {\n            box-sizing: border-box;\n            max-width: 100%;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n        \n        /* Force hardware acceleration for currency cells */\n        .mobile-view .currency-cell {\n            transform: translateZ(0);\n            will-change: transform;\n        }\n    ",document.head.appendChild(l);let c=!1,d=null;o&&(window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}));let h=null,u=0;document.addEventListener("formDictionaryChanged",function(t){o&&c?console.log(" Skipping equity update  scroll in progress"):s&&u>=5?console.log(" Skipping  mobile init limit reached"):window.financialOutputs&&window.sourcesAndUses&&i()});const p=function(){document.querySelectorAll('input[name="use-hel"], input[name="refinance-mortgage"]').forEach(t=>{t.removeEventListener("change",g),t.addEventListener("change",g)})},g=function(){},f=document.getElementById("toggle-switch");f&&f.addEventListener("change",function(){setTimeout(p,500)}),window.addEventListener("load",function(){o&&!a&&window.financialOutputs&&window.sourcesAndUses&&setTimeout(()=>{i(),setTimeout(()=>{s=!1,console.log("Mobile initialization period ended")},5e3)},1e3)}),p(),!window.financialOutputs||!window.sourcesAndUses||o&&c||(o?setTimeout(i,500):i()),window.addEventListener("resize",function(){const t=window.innerWidth<992;o!==t&&(console.log(`View changed: ${o?"Mobile":"Desktop"} -> ${t?"Mobile":"Desktop"}`),o=t,t?(r.classList.add("mobile-view"),document.body.classList.add("mobile-initialized")):(r.classList.remove("mobile-view"),document.body.classList.remove("mobile-initialized"),document.body.classList.remove("mobile-scrolling"),s=!1,u=0,setTimeout(i,500)))})});let Ia=window.innerWidth,La=!1;document.addEventListener("DOMContentLoaded",function(){io(),$i()&&(ji(),to(),La||eo()),window.removeEventListener("resize",qi(ji,250)),window.addEventListener("resize",qi(Ki,250)),window.addEventListener("resize",function(){const t=window.innerWidth;t!==Ia&&t<992&&to(),Ia=t}),window.addEventListener("resize",qi(function(){window.innerWidth<992&&(La||eo())},250));const t=document.getElementById("toggle-switch");t&&t.addEventListener("change",function(){La=!1,setTimeout(to,100),setTimeout(eo,150)}),document.addEventListener("formDictionaryChanged",function(){setTimeout(function(){$i()&&(Yi(),Xi(),Ui(),Gi(),Ji(),Qi())},1e3)}),setTimeout(function(){$i()&&(Ui(),Gi(),Ji(),Qi(),to())},2500)}),document.addEventListener("DOMContentLoaded",function(){console.log("Animation Optimizer waiting for other scripts to initialize..."),setTimeout(function(){console.log("Initializing Animation Optimizer..."),Aa.init()},500)});const Aa={init:function(){this.optimizeCharts(),this.addHardwareAcceleration(),this.optimizeFormTransitions(),this.optimizeCollapsibles(),this.optimizeTableAnimations(),this.setupFormChangeHandler(),this.setupResizeHandler(),console.log(" Animation optimizations applied")},optimizeCharts:function(){if("undefined"==typeof Chart)return console.log("Chart.js not loaded yet, will retry in 500ms"),void setTimeout(()=>this.optimizeCharts(),500);try{Chart.defaults.animation={duration:500,easing:"easeOutQuad",delay:0},Chart.defaults.plugins&&Chart.defaults.plugins.tooltip&&(Chart.defaults.plugins.tooltip.animation={duration:150}),Chart.defaults.elements&&(Chart.defaults.elements.point&&(Chart.defaults.elements.point.radius=3,Chart.defaults.elements.point.hoverRadius=4),Chart.defaults.elements.line&&(Chart.defaults.elements.line.tension=.1)),setTimeout(()=>{this.updateExistingCharts()},1e3),console.log(" Chart.js settings optimized")}catch(t){console.error("Failed to optimize Chart.js:",t)}},updateExistingCharts:function(){try{const t=document.querySelectorAll("canvas");let e=0;t.forEach(t=>{try{const n=Chart.getChart(t);n&&(n.options.animation={duration:500,easing:"easeOutQuad"},n.options.responsiveAnimationDuration=0,t.style.transform="translateZ(0)",t.style.backfaceVisibility="hidden",n.update("none"),e++)}catch(t){}}),e>0&&console.log(` Updated ${e} existing charts`)}catch(t){console.error("Error updating existing charts:",t)}},addHardwareAcceleration:function(){const t=document.createElement("style");t.textContent="\n          /* Enable GPU acceleration for animations */\n          .gpu-accelerated {\n              transform: translateZ(0);\n              will-change: opacity, transform;\n              backface-visibility: hidden;\n          }\n          \n          /* Optimized form transitions */\n          #basic-form,\n          #advanced-form {\n              transition: opacity 0.3s ease;\n              transform: translateZ(0);\n              will-change: opacity;\n          }\n          \n          /* Optimize collapsible sections */\n          .collapsible-content {\n              transition: height 0.3s ease-out, opacity 0.3s ease-out;\n              will-change: height, opacity;\n              transform: translateZ(0);\n              backface-visibility: hidden;\n          }\n          \n          /* Optimize table animations */\n          .summary-table tr {\n              transition: background-color 0.2s ease, transform 0.2s ease;\n              will-change: transform, opacity;\n              transform: translateZ(0);\n          }\n          \n          /* Chart containers - prevent layout shifts */\n          #chart-container > div {\n              position: relative;\n          }\n          \n          /* Optimize canvas elements for smooth rendering */\n          canvas {\n              transform: translateZ(0);\n              will-change: transform;\n              backface-visibility: hidden;\n          }\n          \n          /* Fixed height chart containers to prevent layout shifts */\n          #barChart-wrapper,\n          #sourcesUsesChart-wrapper,\n          #annual-cashflow-chart-container,\n          #annual-debt-payment-container,\n          #debt-balance-container {\n              min-height: 350px;\n          }\n          \n          /* Ensure smooth scrolling */\n          html, body {\n              scroll-behavior: smooth;\n          }\n          \n          /* Fix mobile scroll performance */\n          * {\n              -webkit-overflow-scrolling: touch;\n          }\n      ",document.head.appendChild(t),[document.getElementById("form-container"),document.getElementById("basic-form"),document.getElementById("advanced-form"),document.getElementById("chart-container"),document.getElementById("barChart-wrapper"),document.getElementById("sourcesUsesChart-wrapper"),document.getElementById("annual-cashflow-chart-container"),document.getElementById("annual-debt-payment-container"),document.getElementById("debt-balance-container"),...document.querySelectorAll("canvas"),document.getElementById("table-container"),document.getElementById("equity-summary-table-container"),document.getElementById("spreadsheet-container")].forEach(t=>{t&&t.classList.add("gpu-accelerated")}),console.log(" Hardware acceleration applied")},optimizeFormTransitions:function(){const t=document.getElementById("toggle-switch"),e=document.getElementById("basic-form"),n=document.getElementById("advanced-form");t&&e&&n?(e.style.transition="opacity 0.3s ease",n.style.transition="opacity 0.3s ease",console.log(" Form transitions optimized")):console.log("Form elements not found, skipping optimization")},optimizeCollapsibles:function(){document.querySelectorAll('.collapsible input[type="checkbox"]').forEach(t=>{const e=t.nextElementSibling?.nextElementSibling;e&&(e.style.transition="height 0.3s ease, opacity 0.3s ease",e.style.transform="translateZ(0)",e.style.willChange="height, opacity")}),console.log(" Collapsible sections optimized")},optimizeTableAnimations:function(){try{const t=document.createElement("style");t.textContent="\n              /* Optimize table rows */\n              #equity-summary-table-container table tr,\n              #spreadsheet-container table tr,\n              #cashflow-detail-table tr {\n                  transition: background-color 0.2s ease !important;\n                  transform: translateZ(0);\n              }\n              \n              /* More efficient hover effect */\n              #equity-summary-table-container table tr:hover,\n              #spreadsheet-container table tr:hover,\n              #cashflow-detail-table tr:hover {\n                  background-color: rgba(0, 0, 0, 0.05) !important;\n              }\n              \n              /* Fix for spreadsheet table */\n              #spreadsheet-container .table-wrapper {\n                  will-change: scroll-position;\n                  -webkit-overflow-scrolling: touch;\n              }\n              \n              /* Fix for table sticky headers */\n              thead th {\n                  background-color: #7adfbb;\n                  position: sticky;\n                  top: 0;\n                  z-index: 10;\n              }\n          ",document.head.appendChild(t);const e=document.getElementById("spreadsheet-container");if(e){e.classList.add("gpu-accelerated");const t=document.createElement("script");t.textContent="\n                  // Add safety check for spreadsheet variables\n                  window.ensureSpreadsheetVariables = function() {\n                      if (typeof window.selectedMonthsToShow === 'undefined') {\n                          window.selectedMonthsToShow = 12; // Default to showing 1 year\n                      }\n                  };\n              ",document.head.appendChild(t)}console.log(" Table animations optimized")}catch(t){console.error("Error optimizing table animations:",t)}},setupFormChangeHandler:function(){document.addEventListener("formDictionaryChanged",this.handleFormChange.bind(this)),console.log(" Form change handler optimized")},handleFormChange:function(t){document.body.style.willChange="transform",setTimeout(()=>{document.body.style.willChange="auto"},1e3)},setupResizeHandler:function(){const t=this.debounce(()=>{this.handleResize()},250);window.addEventListener("resize",t),console.log(" Resize handler optimized")},handleResize:function(){try{requestAnimationFrame(()=>{const t=document.querySelectorAll("canvas"),e=[],n=[];t.forEach(t=>{try{const i=Chart.getChart(t);i&&i.options&&(n.push(i.options.animation),i.options.animation=!1,e.push(i))}catch(t){}}),e.forEach((t,e)=>{try{t.resize()}catch(t){console.warn("Error resizing chart:",t.message)}}),setTimeout(()=>{e.forEach((t,e)=>{try{t.options.animation=n[e]}catch(t){}})},100)})}catch(t){console.error("Error handling resize:",t)}},debounce:function(t,e){let n;return function(){const i=this,o=arguments;clearTimeout(n),n=setTimeout(()=>{t.apply(i,o)},e)}}};window.addEventListener("error",function(t){return t.filename&&t.filename.includes("animation-optimizer")&&(console.error("Animation Optimizer Error:",t.message),t.message.includes("Cannot access 'months'")&&(console.log("Attempting to fix 'months' variable error..."),window.ensureSpreadsheetVariables&&window.ensureSpreadsheetVariables())),!1}),window.addEventListener("load",function(){setTimeout(function(){try{document.querySelectorAll("canvas").forEach(t=>{t.classList.contains("gpu-accelerated")||t.classList.add("gpu-accelerated")}),"undefined"==typeof Chart||Chart._optimized||(Aa.optimizeCharts(),Chart._optimized=!0)}catch(t){console.warn("Error in fallback recovery:",t)}},2e3)});
/*! HYCalc v1.0.0  Single-file bundle entry (Rollup) */
try{"object"==typeof window.formDictionary&&window.formDictionary&&document.dispatchEvent(new CustomEvent("formDictionaryChanged",{detail:window.formDictionary}))}catch(t){console.error("Init broadcast error:",t)}}();
//# sourceMappingURL=mortgage-calc.bundle.min.js.map
